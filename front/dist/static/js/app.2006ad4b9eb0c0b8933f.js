webpackJsonp([1],{"+G8z":function(e,t){},"+T1s":function(e,t){},"0Qzf":function(e,t){},"0XER":function(e,t){},"1nGp":function(e,t){},"2OxD":function(e,t){},"4BPl":function(e,t){},"6oco":function(e,t){},ALcT:function(e,t){},AeFz:function(e,t){},FPSF:function(e,t){},FZO8:function(e,t){},K1l2:function(e,t){},LbxH:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),o=n("eFvv"),i=n.n(o),a={name:"App",components:{VueElementLoading:i.a},watch:{$route:function(e,t){document.title=e.meta.title}},computed:{isStateLoading:function(){return this.$store.state.isStateLoading}},created:function(){this.$store.dispatch("getState")}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("vue-element-loading",{attrs:{active:this.isStateLoading,"is-full-screen":!0,color:"#1C457D"}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]},l=n("VU/8")(a,r,!1,null,null,null).exports,c=n("/ocq"),u=n("fZjL"),d=n.n(u),m=n("mtWM"),v=n.n(m),p={name:"Menu",props:["selectedElement"],data:function(){return{adminSubmenuShown:!1,reportsSubmenuShown:!1,isOverAdmin:!1,isOverReports:!1,isOverNoSubmenuEl:!1,isOverMenu:!1}},methods:{openMenu:function(e){var t=this;"admin"===e&&(this.isOverAdmin=!0,setTimeout(function(){t.isOverAdmin&&!t.isOverNoSubmenuEl&&t.isOverMenu&&(t.adminSubmenuShown=!0,t.reportsSubmenuShown=!1)},100)),"reports"===e&&(this.isOverReports=!0,setTimeout(function(){t.isOverReports&&!t.isOverNoSubmenuEl&&t.isOverMenu&&(t.adminSubmenuShown=!1,t.reportsSubmenuShown=!0)},100))},closeMenus:function(e){(this.isOverNoSubmenuEl||!this.isOverMenu||e)&&(this.reportsSubmenuShown=!1,this.adminSubmenuShown=!1)},leaveMenu:function(){this.isOverMenu=!1,setTimeout(this.closeMenus,300)},enterNoSubmenuEl:function(){this.isOverNoSubmenuEl=!0,setTimeout(this.closeMenus,300)},logout:function(){v.a.post("/logout").then(function(e){window.location.href="/login"})}},computed:{navClass:function(){var e="main-menu";return(this.adminSubmenuShown||this.reportsSubmenuShown)&&(e+=" submenu-shown"),e},adminClass:function(){var e="with-submenu";return"admin"===this.selectedElement&&(e+=" selected"),this.adminSubmenuShown&&(e+=" hovered"),e},reportsClass:function(){var e="with-submenu";return"reports"===this.selectedElement&&(e+=" selected"),this.reportsSubmenuShown&&(e+=" hovered"),e}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{class:e.navClass,on:{"&mouseleave":function(t){e.leaveMenu()},"&mouseover":function(t){e.isOverMenu=!0}}},[n("ul",{staticClass:"cell auto",class:e.adminSubmenuShown?"submenu shown":"submenu hidden"},[n("li",{staticClass:"close-item",on:{click:function(t){e.closeMenus(!0)}}},[n("button",{staticClass:"close-button",attrs:{type:"button"}},[e._v("×")])]),e._v(" "),n("li",[n("router-link",{attrs:{to:"/UploadExpenses"}},[e._v("Внести расходы")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/Offices"}},[e._v("Отделения")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/ServiceTypes"}},[e._v("Услуги")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/GoodsTypes"}},[e._v("Товары")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/ExpenseTypes"}},[e._v("Типы расходов")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/EmployeePaymentTypes"}},[e._v("Типы выплат сотрудникам")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/Employees"}},[e._v("Сотрудники")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/MasterTypes"}},[e._v("Категории мастеров")])],1)]),e._v(" "),n("ul",{class:e.reportsSubmenuShown?"submenu shown":"submenu hidden"},[n("li",{staticClass:"close-item",on:{click:function(t){e.closeMenus(!0)}}},[n("button",{staticClass:"close-button",attrs:{type:"button"}},[e._v("×")])]),e._v(" "),n("li",[n("router-link",{attrs:{to:"/EmployeesReport"}},[e._v("Отчёт по сотрудникам")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/ClientsReport"}},[e._v("Отчёт по клиентам")])],1),e._v(" "),n("li",[n("router-link",{attrs:{to:"/FinancialReport"}},[e._v("Финансовый отчёт")])],1)]),e._v(" "),n("ul",[n("li",{class:"session"===e.selectedElement?"selected":"",on:{"&mouseenter":function(t){e.enterNoSubmenuEl()},"&mouseleave":function(t){e.isOverNoSubmenuEl=!1}}},[n("router-link",{attrs:{to:"/"}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40ZM20 36.5217C29.1247 36.5217 36.5217 29.1247 36.5217 20C36.5217 10.8753 29.1247 3.47826 20 3.47826C10.8753 3.47826 3.47826 10.8753 3.47826 20C3.47826 29.1247 10.8753 36.5217 20 36.5217Z",fill:"session"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M22.8986 20C22.8986 21.6008 21.6008 22.8986 20 22.8986C18.3992 22.8986 17.1014 21.6008 17.1014 20C17.1014 18.3992 18.3992 17.1014 20 17.1014C21.6008 17.1014 22.8986 18.3992 22.8986 20Z",fill:"session"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M20.8387 18.226C21.5283 18.8945 21.5455 19.9955 20.877 20.6852C20.2085 21.3749 19.1075 21.3921 18.4178 20.7236L13.4227 15.8819C12.733 15.2134 12.7158 14.1124 13.3843 13.4227C14.0528 12.733 15.1539 12.7158 15.8435 13.3843L20.8387 18.226Z",fill:"session"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M30.0853 12.4165C30.6349 12.088 31.3468 12.2673 31.6753 12.8169C32.0038 13.3666 31.8245 14.0784 31.2749 14.4069L20.8252 20.6525C20.2755 20.981 19.5636 20.8017 19.2351 20.2521C18.9066 19.7025 19.0859 18.9906 19.6355 18.6621L30.0853 12.4165Z",fill:"session"===e.selectedElement?"#FDFCFC":"#38342E"}})]),e._v(" "),n("label",[e._v("Смена")])])],1),e._v(" "),n("li",{class:"clients"===e.selectedElement?"selected":"",on:{"&mouseenter":function(t){e.enterNoSubmenuEl()},"&mouseleave":function(t){e.isOverNoSubmenuEl=!1}}},[n("router-link",{attrs:{to:"/Clients"}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.6527 19.9163C22.1525 19.9163 26.6109 15.4579 26.6109 9.95816C26.6109 4.45842 22.1525 0 16.6527 0C11.153 0 6.69456 4.45842 6.69456 9.95816C6.69456 15.4579 11.153 19.9163 16.6527 19.9163ZM16.6527 16.9038C20.4887 16.9038 23.5983 13.7941 23.5983 9.95816C23.5983 6.12221 20.4887 3.01255 16.6527 3.01255C12.8168 3.01255 9.70711 6.12221 9.70711 9.95816C9.70711 13.7941 12.8168 16.9038 16.6527 16.9038Z",fill:"clients"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.48354 22.4455C3.95261 23.9909 3.01255 26.1093 3.01255 28.4519C3.01255 33.1659 6.83405 36.9874 11.5481 36.9874H21.9247C26.6387 36.9874 30.4602 33.1659 30.4602 28.4519C30.4602 26.069 29.4874 23.9175 27.9092 22.3657C27.8771 22.3775 27.8405 22.3926 27.7999 22.412C27.6784 22.47 27.5482 22.5532 27.4258 22.657C24.5233 25.1214 20.7581 26.6109 16.6527 26.6109C12.5906 26.6109 8.86116 25.1526 5.97115 22.7342C5.84761 22.6308 5.7161 22.5482 5.59338 22.4909C5.5526 22.4719 5.51585 22.457 5.48354 22.4455ZM3.61116 20.0635C4.80923 18.9296 6.63933 19.3652 7.90445 20.4239C10.2726 22.4055 13.3233 23.5983 16.6527 23.5983C20.0174 23.5983 23.0975 22.3801 25.4761 20.3606C26.7281 19.2975 28.5447 18.8476 29.7521 19.9612C32.0398 22.0713 33.4728 25.0942 33.4728 28.4519C33.4728 34.8297 28.3025 40 21.9247 40H11.5481C5.17027 40 0 34.8297 0 28.4519C0 25.1481 1.38732 22.1684 3.61116 20.0635Z",fill:"clients"===e.selectedElement?"#FDFCFC":"#38342E"}})]),e._v(" "),n("label",[e._v("Клиенты")])])],1),e._v(" "),n("li",{class:"history"===e.selectedElement?"selected":"",on:{"&mouseenter":function(t){e.enterNoSubmenuEl()},"&mouseleave":function(t){e.isOverNoSubmenuEl=!1}}},[n("router-link",{attrs:{to:"/SessionsHistory"}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 40 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M21.2034 33.7265C29.4489 33.7265 36.1333 27.0422 36.1333 18.7966C36.1333 10.5511 29.4489 3.86675 21.2034 3.86675C12.9578 3.86675 6.27348 10.5511 6.27348 18.7966C6.27348 19.7609 6.36488 20.7038 6.53951 21.6171C4.39123 21.6171 2.47413 20.0852 2.47329 17.9369C2.47205 14.7476 3.34525 11.7897 5.17282 8.86298C7.68288 4.84332 11.6154 1.917 16.1866 0.66717C20.7578 -0.582655 25.6321 -0.0642086 29.8382 2.11919C34.0442 4.3026 37.2731 7.99063 38.8815 12.4483C40.4899 16.9061 40.3596 21.8061 38.5166 26.1721C36.6736 30.538 33.2533 34.0493 28.9371 36.0061C24.621 37.9629 19.726 38.2216 15.2277 36.7306C15.2277 36.7306 13.6015 36.0441 14.1091 34.5212C14.6168 32.9982 21.2034 33.7265 21.2034 33.7265Z",fill:"history"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M6.09435 16.0347C6.52977 15.2054 7.55502 14.8862 8.38429 15.3216C9.21357 15.757 9.53285 16.7823 9.09743 17.6115L6.29421 22.9503C5.85878 23.7796 4.83354 24.0989 4.00426 23.6635C3.17499 23.228 2.85571 22.2028 3.29113 21.3735L6.09435 16.0347Z",fill:"history"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M0.217815 17.7556C-0.241102 16.9391 0.0487836 15.9051 0.865294 15.4462C1.6818 14.9873 2.71574 15.2772 3.17466 16.0937L6.12913 21.3503C6.58804 22.1668 6.29816 23.2008 5.48165 23.6597C4.66514 24.1186 3.6312 23.8287 3.17228 23.0122L0.217815 17.7556Z",fill:"history"===e.selectedElement?"#FDFCFC":"#38342E"}})]),e._v(" "),n("label",[e._v("История")])])],1),e._v(" "),n("li",{class:e.reportsClass,on:{"&mouseenter":function(t){e.openMenu("reports")},"&mouseleave":function(t){e.isOverReports=!1}}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 30 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M7.584 11.5C7.584 10.6716 8.25557 10 9.084 10H20.9723C21.8008 10 22.4723 10.6716 22.4723 11.5C22.4723 12.3284 21.8008 13 20.9723 13H9.084C8.25557 13 7.584 12.3284 7.584 11.5Z",fill:"reports"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M9.084 16C8.25557 16 7.584 16.6716 7.584 17.5C7.584 18.3284 8.25557 19 9.084 19H20.9723C21.8008 19 22.4723 18.3284 22.4723 17.5C22.4723 16.6716 21.8008 16 20.9723 16H9.084Z",fill:"reports"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M7.584 23.5C7.584 22.6716 8.25557 22 9.084 22H20.9723C21.8008 22 22.4723 22.6716 22.4723 23.5C22.4723 24.3284 21.8008 25 20.9723 25H9.084C8.25557 25 7.584 24.3284 7.584 23.5Z",fill:"reports"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{d:"M9.084 28C8.25557 28 7.584 28.6716 7.584 29.5C7.584 30.3284 8.25557 31 9.084 31H20.9723C21.8008 31 22.4723 30.3284 22.4723 29.5C22.4723 28.6716 21.8008 28 20.9723 28H9.084Z",fill:"reports"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.95533 0C2.66629 0 0 2.75517 0 6.15385V33.8462C0 37.2448 2.66629 40 5.95533 40H23.8213C27.1104 40 30 37.9554 30 34.5567V6C30 2.60132 27.1104 0 23.8213 0H5.95533ZM23.7097 3H5.56452C4.33113 3 2.90323 4.7255 2.90323 6V34.5567C2.90323 35.8312 4.08919 37 5.32258 37H23.7097C24.9431 37 27.0968 35.7745 27.0968 34.5V6C27.0968 4.7255 24.9431 3 23.7097 3Z",fill:"reports"===e.selectedElement?"#FDFCFC":"#38342E"}})]),e._v(" "),n("label",[e._v("Отчёты")])]),e._v(" "),n("li",{class:e.adminClass,on:{"&mouseenter":function(t){e.openMenu("admin")},"&mouseleave":function(t){e.isOverAdmin=!1}}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 39 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8605 0.000916544C15.8252 -4.58791e-05 15.7899 -0.000250263 15.7546 0.000303043C15.7028 -0.000509942 15.6509 0.000312842 15.599 0.0027714C15.5226 0.00639501 15.4466 0.0153202 15.3715 0.0294827C14.9113 0.116205 14.4865 0.331734 14.1452 0.649237C13.808 0.962833 13.566 1.36303 13.4433 1.80377L12.2876 5.81626C11.6168 6.15169 10.9829 6.53386 10.382 6.95065L6.39835 5.94375C5.87186 5.80563 5.31501 5.8455 4.81378 6.05663C4.30859 6.26942 3.89051 6.64312 3.62141 7.11632C3.62102 7.117 3.62063 7.11769 3.62025 7.11837L0.322345 12.9012C0.319141 12.9069 0.31597 12.9125 0.312832 12.9182C0.0539981 13.3847 -0.0478188 13.9216 0.0208605 14.4493C0.089535 14.977 0.325533 15.4709 0.697179 15.8562L3.52658 18.7822C3.48641 19.1623 3.45669 19.5711 3.45669 20.0005C3.45669 20.4298 3.48641 20.8386 3.52658 21.2186L0.697121 24.1448C0.325547 24.53 0.0895705 25.0239 0.0208941 25.5515C-0.0477771 26.0792 0.0539731 26.616 0.312774 27.0826C0.315931 27.0883 0.319121 27.0939 0.322345 27.0996L3.62017 32.8823C3.62045 32.8828 3.62074 32.8833 3.62102 32.8838C3.89006 33.3573 4.30823 33.7313 4.81364 33.9442C5.31509 34.1555 5.87199 34.1952 6.39831 34.0571L10.382 33.0502C10.9829 33.467 11.6168 33.8492 12.2876 34.1846L13.4467 38.2089C13.5963 38.725 13.9094 39.1809 14.3419 39.5054C14.7725 39.8283 15.2974 40.0028 15.8377 40H22.4255C22.9659 40.0028 23.4907 39.8283 23.9213 39.5054C24.3539 39.1809 24.6669 38.725 24.8165 38.2089L25.9756 34.1846C26.6465 33.8492 27.2803 33.467 27.8812 33.0502L31.8649 34.0572C32.3913 34.1952 32.9481 34.1555 33.4496 33.9442C33.9551 33.7312 34.3734 33.3571 34.6424 32.8835C34.6426 32.8831 34.6428 32.8827 34.6431 32.8823L37.9409 27.0996C37.9441 27.0939 37.9473 27.0883 37.9505 27.0826C38.2093 26.616 38.311 26.0792 38.2423 25.5515C38.1737 25.0239 37.9377 24.53 37.5661 24.1448L34.7367 21.2186C34.7768 20.8386 34.8065 20.4298 34.8065 20.0005C34.8065 19.5711 34.7768 19.1623 34.7366 18.7822L37.566 15.8562C37.9377 15.4709 38.1737 14.977 38.2424 14.4493C38.3111 13.9215 38.2092 13.3847 37.9504 12.9182C37.9473 12.9125 37.9441 12.9069 37.9409 12.9012L34.643 7.11837C34.6428 7.11801 34.6426 7.11766 34.6424 7.11731C34.3733 6.64367 33.955 6.26958 33.4495 6.05663C32.9482 5.8455 32.3914 5.80563 31.8649 5.94374L27.8813 6.95065C27.2803 6.53386 26.6464 6.15169 25.9756 5.81626L24.8165 1.79192C24.6669 1.27594 24.3539 0.820015 23.9212 0.495482C23.4909 0.172663 22.9661 -0.00192348 22.4258 0.000916544H15.8605ZM16.4483 3.30367H21.8149L23.0098 7.45221C23.1466 7.92701 23.4888 8.31563 23.9424 8.51138C24.859 8.90686 25.7162 9.42972 26.5329 10.0536C26.9334 10.3595 27.4516 10.4659 27.9401 10.3424L32.0824 9.29538L34.7659 14.0008L31.8134 17.0542C31.4617 17.4178 31.2962 17.9225 31.3641 18.4237C31.4436 19.0111 31.5038 19.4979 31.5038 20.0005C31.5038 20.503 31.4436 20.9897 31.3641 21.577C31.2962 22.0783 31.4617 22.583 31.8133 22.9466L34.7658 26.0001L32.0824 30.7055L27.9401 29.6585C27.4516 29.535 26.9334 29.6413 26.533 29.9472C25.7162 30.5711 24.8589 31.0941 23.9425 31.4895C23.4888 31.6852 23.1466 32.0739 23.0098 32.5487L21.8149 36.6972H16.4483L15.2534 32.5487C15.1166 32.0739 14.7744 31.6852 14.3207 31.4895C13.4043 31.0941 12.5471 30.5711 11.7302 29.9472C11.3298 29.6413 10.8116 29.535 10.3231 29.6585L6.18083 30.7055L3.49738 26.0001L6.44989 22.9466C6.8015 22.583 6.96706 22.0783 6.89916 21.577C6.8196 20.9897 6.75944 20.503 6.75944 20.0005C6.75944 19.4979 6.81961 19.0111 6.89916 18.4238C6.96706 17.9225 6.80149 17.4178 6.44988 17.0542L3.49737 14.0008L6.1808 9.29538L10.3231 10.3424C10.8117 10.4659 11.3299 10.3595 11.7303 10.0536C12.547 9.42972 13.4043 8.90686 14.3208 8.51138C14.7745 8.31563 15.1167 7.92701 15.2534 7.45221L16.4483 3.30367Z",fill:"admin"===e.selectedElement?"#FDFCFC":"#38342E"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.0826 23.3027C20.9066 23.3027 22.3853 21.8241 22.3853 20C22.3853 18.1759 20.9066 16.6972 19.0826 16.6972C17.2585 16.6972 15.7798 18.1759 15.7798 20C15.7798 21.8241 17.2585 23.3027 19.0826 23.3027ZM19.0826 26.6055C22.7307 26.6055 25.6881 23.6481 25.6881 20C25.6881 16.3519 22.7307 13.3945 19.0826 13.3945C15.4345 13.3945 12.4771 16.3519 12.4771 20C12.4771 23.6481 15.4345 26.6055 19.0826 26.6055Z",fill:"admin"===e.selectedElement?"#FDFCFC":"#38342E"}})]),e._v(" "),n("label",[e._v("Админка")])]),e._v(" "),n("li",{staticClass:"with-submenu logout show-for-large",on:{click:e.logout}},[n("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 35 41",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.6499 15.5398C28.3715 14.8104 29.5415 14.8104 30.2631 15.5398L33.9588 19.2751C34.6804 20.0045 34.6804 21.1871 33.9588 21.9164L30.2631 25.6518C29.5415 26.3812 28.3715 26.3812 27.6499 25.6518C26.9283 24.9224 26.9283 23.7399 27.6499 23.0105L30.039 20.5958L27.6499 18.1811C26.9283 17.4517 26.9283 16.2691 27.6499 15.5398Z",fill:"#38342E"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6522 20.5958C15.6522 19.5643 16.4795 18.7281 17.5 18.7281H30.8043C31.8249 18.7281 32.6522 19.5643 32.6522 20.5958C32.6522 21.6273 31.8249 22.4635 30.8043 22.4635H17.5C16.4795 22.4635 15.6522 21.6273 15.6522 20.5958Z",fill:"#38342E"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9754 6.42773C7.36164 8.79587 4.19565 12.5554 4.19565 20.9693C4.19565 29.3907 7.26591 32.6137 10.7289 34.5583C14.3807 36.6088 18.8998 36.6552 22.1003 36.2958C23.1146 36.1818 24.0282 36.9206 24.1409 37.9458C24.2536 38.971 23.5227 39.8944 22.5084 40.0083C19.0567 40.3959 13.5976 40.4422 8.93414 37.8236C4.08191 35.0989 0.5 30.4777 0.5 20.9693C0.5 11.4536 4.17097 6.43501 8.96486 3.29348C13.6327 0.234532 19.1159 -0.17273 22.6255 0.453269C23.6305 0.632528 24.3014 1.60131 24.1241 2.61711C23.9467 3.6329 22.9882 4.31105 21.9832 4.13179C19.2102 3.63718 14.7151 3.977 10.9754 6.42773Z",fill:"#38342E"}})]),e._v(" "),n("label",[e._v("Выйти")])])])])},staticRenderFns:[]};var h=n("VU/8")(p,f,!1,function(e){n("ecyf")},null,null).exports,g=n("T1ft"),_=n.n(g),y={name:"EmployeeCard",components:{VueElementLoading:i.a,"v-select":_.a},props:["employee"],data:function(){return{selectedEmployeePayment:1,paymentSum:"",servicesSearch:"",goodsSearch:""}},computed:{services:{get:function(){return this.$store.state.serviceTypes}},goods:{get:function(){return this.$store.state.goodsTypes}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}},employeeName:function(){return this.$store.getters.getEmployeeName(this.employee.id)},filteredServices:function(){var e=this;return this.services.filter(function(t){return t.name.toLowerCase().includes(e.servicesSearch.toLowerCase())})},filteredGoods:function(){var e=this;return this.goods.filter(function(t){return t.name.toLowerCase().includes(e.goodsSearch.toLowerCase())})},adminId:function(){return this.$store.state.currentSession.employees.filter(function(e){return"officeAdmin"===e.role})[0].id}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cell large-6 columns card employee-card"},[n("div",{staticClass:"employee-card-header grid-x grid-padding-x align-middle"},[n("div",{staticClass:"cell auto"},[n("h5",[e._v(e._s(e.employeeName))])]),e._v(" "),n("div",{staticClass:"cell auto show-for-medium"},[n("p",[e._v("Длина смены "),n("strong",[e._v(e._s(e.employee.workHours))]),e._v(" ч.")])])]),e._v(" "),n("div",{staticClass:"employee-card-content grid-x grid-padding-x grid-padding-y"},[n("div",{staticClass:"cell small-6"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.servicesSearch,expression:"servicesSearch"}],attrs:{type:"text",placeholder:"Поиск по услугам"},domProps:{value:e.servicesSearch},on:{input:function(t){t.target.composing||(e.servicesSearch=t.target.value)}}}),e._v(" "),n("ul",{staticClass:"services-goods-list"},e._l(e.filteredServices,function(t){return n("li",{key:t.id},[n("router-link",{attrs:{to:{path:"/EditService/",query:{serviceTypeId:t.id,masterId:e.employee.id,adminId:e.adminId}}}},[e._v(e._s(t.name))])],1)}))]),e._v(" "),n("div",{staticClass:"cell small-6"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.goodsSearch,expression:"goodsSearch"}],attrs:{type:"text",placeholder:"Поиск по товарам"},domProps:{value:e.goodsSearch},on:{input:function(t){t.target.composing||(e.goodsSearch=t.target.value)}}}),e._v(" "),n("ul",{staticClass:"services-goods-list"},e._l(e.filteredGoods,function(t){return n("li",{key:t.id},[n("router-link",{attrs:{to:{path:"/EditGoodsSell/",query:{goodTypeId:t.id,masterId:e.employee.id,adminId:e.adminId}}}},[e._v(e._s(t.name))])],1)}))])]),e._v(" "),n("div",{staticClass:"employee-card-footer grid-x grid-padding-x grid-padding-y"},[n("label",{staticClass:"cell small-12 no-padding-top-bottom"},[e._v("Выплата сотруднику")]),e._v(" "),n("div",{staticClass:"cell medium-6"},[n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.selectedEmployeePayment,label:"name",options:e.employeePaymentTypes},model:{value:e.selectedEmployeePayment,callback:function(t){e.selectedEmployeePayment=t},expression:"selectedEmployeePayment"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentSum,expression:"paymentSum"}],attrs:{type:"number",placeholder:"Сумма"},domProps:{value:e.paymentSum},on:{input:function(t){t.target.composing||(e.paymentSum=t.target.value)}}})]),e._v(" "),e._m(0)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell shrink"},[t("button",{staticClass:"button secondary"},[this._v("Сохранить")])])}]};var b={name:"Session",components:{appMenu:h,employeeCard:n("VU/8")(y,C,!1,function(e){n("0Qzf")},null,null).exports,VueElementLoading:i.a,"v-select":_.a},mounted:function(){var e=this;document.title=this.$route.meta.title,setInterval(function(){e.time=e.getTime(),e.date=e.getDate()},1e3),this.$store.state.refreshCurrentSession=setInterval(function(){e.getCurrentSession()},1e4)},beforeRouteLeave:function(e,t,n){this.$store.state.refreshCurrentSession&&clearInterval(this.$store.state.refreshCurrentSession),n()},data:function(){return{selectedSpendType:1,spendSum:"",time:this.getTime(),date:this.getDate()}},methods:{getGreeting:function(){var e=(new Date).getHours();return e<=12?"Доброе утро!":e>12&&e<17?"Добрый день!":e>=17?"Добрый вечер!":void 0},getGreetingEmojis:function(){for(var e=["✂️","😀","💪","👋","😎","👏","🦄","🌄","🌅","❤️","🍒","🌈","😄","✌️","😉","🙂","✂️"],t=0,n="";t<3;){var s=Math.ceil(Math.random()*e.length-1);s<0&&(s=0),s>e.length&&(s=e.length-1),n+=e[s],t++}return n},getTime:function(){return this.moment().format("HH : mm")},getDate:function(){return this.moment().format("DD.MM.YY")},getCurrentSession:function(){this.$store.dispatch("getCurrentSession")},changeOffice:function(){this.$store.commit("updateStore",{name:"currentOfficeId",value:null}),this.$store.commit("updateStore",{name:"currentSession",value:{}}),this.$store.state.refreshCurrentSession&&clearInterval(this.$store.state.refreshCurrentSession)}},computed:{session:{get:function(){return this.$store.state.currentSession}},currentOfficeId:{get:function(){return this.$store.state.currentOfficeId},set:function(e){this.$store.commit("updateStore",{name:"currentOfficeId",value:e})}},isCurrentSessionLoading:{get:function(){return this.$store.state.isCurrentSessionLoading}},spendTypes:{get:function(){return this.$store.state.spendTypes}},offices:{get:function(){return this.$store.state.offices}},servicesCount:function(){return d()(this.session).length&&this.session.operations?this.session.operations.filter(function(e){return"serviceoperation"===e.operationType}).length:0},goodsCount:function(){return d()(this.session).length&&this.session.operations?this.session.operations.filter(function(e){return"goodsoperation"===e.operationType}).length:0},revenue:function(){if(d()(this.session).length&&this.session.operations){var e=0,t=this.session.operations.filter(function(e){return"serviceoperation"===e.operationType}),n=this.session.operations.filter(function(e){return"goodsoperation"===e.operationType});return t.map(function(t){e+=t.cashSum+t.cashlessSum-t.discountSum}),n.map(function(t){e+=t.cashSum+t.cashlessSum-t.discountSum}),e}return 0},costs:function(){if(d()(this.session).length&&this.session.operations){var e=0,t=this.session.operations.filter(function(e){return"spendoperation"===e.operationType}),n=this.session.operations.filter(function(e){return"employeePayment"===e.operationType});return t.map(function(t){e+=t.sum}),n.map(function(t){e+=t.sum}),e}return 0},bonus:function(){if(d()(this.session).length&&this.session.operations){var e=0,t=this.session.operations.filter(function(e){return"serviceoperation"===e.operationType}),n=this.session.operations.filter(function(e){return"goodsoperation"===e.operationType});return t.map(function(t){e+=t.adminBonus+t.masterBonus}),n.map(function(t){e+=t.adminBonus+t.masterBonus}),e}return 0}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"background"},[n("appMenu",{attrs:{"selected-element":"session"}}),e._v(" "),Object.keys(e.session).length?e._e():n("div",{staticClass:"grid-x align-center-middle content"},[n("div",{staticClass:"card cell shrink text-center greeting-card"},[n("h1",[e._v(e._s(e.getGreeting())),n("br"),e._v(e._s(e.getGreetingEmojis()))]),e._v(" "),n("label",[e._v("Отделение")]),e._v(" "),n("v-select",{attrs:{disabled:e.isCurrentSessionLoading,clearable:!1,reduce:function(e){return e.id},value:e.currentOfficeId,label:"name",options:e.offices},on:{input:e.getCurrentSession},model:{value:e.currentOfficeId,callback:function(t){e.currentOfficeId=t},expression:"currentOfficeId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",{staticClass:"position-relative"},[n("vue-element-loading",{attrs:{active:e.isCurrentSessionLoading,color:"#1C457D"}}),e._v(" "),!Object.keys(e.session).length&&e.currentOfficeId?n("router-link",{staticClass:"button primary",attrs:{to:"/EditSession"}},[e._v("Открыть смену")]):e._e()],1)],1)]),e._v(" "),Object.keys(e.session).length?n("div",{staticClass:"session-info grid-x align-middle"},[n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.time))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v(e._s(e.date))])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.servicesCount))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v("Услуг оказано")])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.goodsCount))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v("Товаров продано")])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.revenue))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v("Выручка, ₽")])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.costs))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v("Расход, ₽")])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-auto small-6"},[n("span",{staticClass:"session-info-big-number"},[e._v(e._s(e.bonus))]),e._v(" "),n("label",{staticClass:"session-info-big-label"},[e._v("Премия, ₽")])]),e._v(" "),n("div",{staticClass:"session-info-block cell medium-2 small-12"},[n("router-link",{staticClass:"button secondary small",attrs:{to:"/EditSession/"+e.session.id.toString()}},[e._v("Изменить/закрыть смену")])],1)]):e._e(),e._v(" "),Object.keys(e.session).length?n("div",{staticClass:"session-content"},[n("div",{staticClass:"grid-x grid-margin-x grid-margin-y"},[e._l(e.session.employees,function(t){return"master"===t.role?n("employeeCard",{key:t.id,attrs:{employee:t}}):e._e()}),e._v(" "),e._l(e.session.employees,function(t){return"officeAdmin"===t.role?n("employeeCard",{key:t.id,attrs:{employee:t}}):e._e()}),e._v(" "),n("div",{staticClass:"cell large-6 columns card employee-card"},[n("div",{staticClass:"employee-card-footer grid-x grid-padding-x grid-padding-y"},[n("h4",{staticClass:"cell small-12"},[e._v("Внести расход")]),e._v(" "),n("div",{staticClass:"cell medium-6"},[n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.selectedSpendType,label:"name",options:e.spendTypes},model:{value:e.selectedSpendType,callback:function(t){e.selectedSpendType=t},expression:"selectedSpendType"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.spendSum,expression:"spendSum"}],attrs:{type:"number",placeholder:"Сумма"},domProps:{value:e.spendSum},on:{input:function(t){t.target.composing||(e.spendSum=t.target.value)}}})]),e._v(" "),e._m(0)])]),e._v(" "),n("div",{staticClass:"cell small-12 columns card"},[n("table",{staticClass:"operations-table stack hover"},[e._m(1),e._v(" "),n("tbody",e._l(e.session.operations,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                  "+e._s(e.$store.getters.getTimeFromOperation(t))+"\n                ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                  "+e._s(e.$store.getters.getEmployeeNameFromOperation(t))+"\n                ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)},domProps:{innerHTML:e._s(e.$store.getters.getOperationContent(t))}})],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                  "+e._s(e.$store.getters.getOperationSum(t))+"\n                ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                  "+e._s(e.$store.getters.getOperationBonus(t))+"\n                ")])],1)])}))])]),e._v(" "),n("div",{staticClass:"cell large-6 columns card"},[n("button",{staticClass:"button secondary small",on:{click:e.changeOffice}},[e._v("Изменить отделение")])])],2)]):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cell shrink"},[t("button",{staticClass:"button secondary"},[this._v("Сохранить")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Время")]),e._v(" "),n("th",[e._v("Сотрудник")]),e._v(" "),n("th",[e._v("Операция")]),e._v(" "),n("th",[e._v("Сумма")]),e._v(" "),n("th",[e._v("Премия")])])])}]};var S=n("VU/8")(b,E,!1,function(e){n("2OxD")},null,null).exports,T=v.a.create({baseURL:"http://localhost:5000/api/"}),k={name:"EditSession",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",session:this.getEmptyItem()}},methods:{addAdmin:function(){this.session.employees.push({id:this.admins[0].id,role:"officeAdmin",workHours:6})},addMaster:function(){this.session.employees.push({id:this.masters[0].id,role:"master",workHours:6})},removeEmployee:function(e){var t=this.session.employees.findIndex(function(t){return t.id===e});this.session.employees.splice(t,1)},load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetSession/",{id:e,withOperations:!1}).then(function(e){var n=e.data;null===n.employees&&(n.employees=[]),n.dateOpened&&(n.dateOpened=t.moment(n.dateOpened,"DD.MM.YYYY HH:mm")),n.dateClosed&&(n.dateClosed=t.moment(n.dateClosed,"DD.MM.YYYY HH:mm")),t.session=n,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(e){var t=this;this.isSaving=!0,this.savingError="";var n=this.session;e&&(n.state="closed",n.dateClosed=this.moment()),null===n.dateClosed&&delete n.dateClosed,T.post("EditSession/",this.session).then(function(e){t.isSaving=!1,t.$store.dispatch("getCurrentSession"),t.$router.push({path:"/"})}).catch(function(e){t.savingError=e,t.isSaving=!1})},getEmptyItem:function(){return{id:null,dateOpened:this.moment(),dateClosed:null,employees:[],officeId:this.$store.state.currentOfficeId,state:"open",openCash:0}}},computed:{offices:{get:function(){return this.$store.state.offices}},admins:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("officeAdmin")})}},masters:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("master")})}},selectedAdmins:{get:function(){return this.session.employees?this.session.employees.filter(function(e){return"officeAdmin"===e.role}):null},set:function(e){var t=this.session.employees.findIndex(function(t){return t.id===e.id});e.role="officeAdmin",this.session.employees.$set(t,e)}},selectedMasters:{get:function(){return this.session.employees?this.session.employees.filter(function(e){return"master"===e.role}):null},set:function(e){var t=this.session.employees.findIndex(function(t){return t.id===e.id});e.role="master",this.session.employees.$set(t,e)}},canEdit:function(){return"open"===this.session.state&&(this.session.id===this.$store.state.currentSession.id||!this.session.id)}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":e.canEdit?"session":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[e.canEdit?n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Назад")])],1):n("li",[n("router-link",{attrs:{to:"/SessionsHistory/"}},[e._v("Назад")])],1)])]),e._v(" "),n("h1",[e._v("Смена")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Отделение")]),e._v(" "),n("v-select",{attrs:{clearable:!1,disabled:!e.canEdit,reduce:function(e){return e.id},value:e.session.officeId,label:"name",options:e.offices},model:{value:e.session.officeId,callback:function(t){e.$set(e.session,"officeId",t)},expression:"session.officeId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("h2",[e._v("Администраторы")]),e._v(" "),e._l(e.selectedAdmins,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Администратор "+e._s(s>0?s+1:""))]),e._v(" "),s>0&&e.canEdit?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeEmployee(t.id)}}},[e._v("\n              Удалить\n            ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,disabled:!e.canEdit,reduce:function(e){return e.id},value:t.id,label:"name",options:e.admins},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"admin.id"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Продолжительность смены, часы")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.workHours,expression:"admin.workHours"}],attrs:{type:"number",disabled:!e.canEdit},domProps:{value:t.workHours},on:{input:function(n){n.target.composing||e.$set(t,"workHours",n.target.value)}}})],1)}),e._v(" "),e.canEdit?n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addAdmin}},[e._v("Добавить администратора")])]):e._e(),e._v(" "),n("h2",[e._v("Мастера")]),e._v(" "),e._l(e.selectedMasters,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Мастер "+e._s(s>0?s+1:""))]),e._v(" "),s>0&&e.canEdit?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeEmployee(t.id)}}},[e._v("\n              Удалить\n            ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,disabled:!e.canEdit,reduce:function(e){return e.id},value:t.id,label:"name",options:e.masters},model:{value:t.id,callback:function(n){e.$set(t,"id",n)},expression:"master.id"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Продолжительность смены, часы")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.workHours,expression:"master.workHours"}],attrs:{type:"number",disabled:!e.canEdit},domProps:{value:t.workHours},on:{input:function(n){n.target.composing||e.$set(t,"workHours",n.target.value)}}})],1)}),e._v(" "),e.canEdit?n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addMaster}},[e._v("Добавить мастера")])]):e._e(),e._v(" "),e.canEdit?n("div",{staticClass:"grid-x align-justify"},[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary cell shrink",attrs:{type:"button"},on:{click:function(t){e.save(!1)}}},[e._v(e._s(e.session.id?"Сохранить":"Открыть смену"))]),e._v(" "),e.session.id?n("button",{staticClass:"button secondary alert cell shrink",attrs:{type:"button"},on:{click:function(t){e.save(!0)}}},[e._v("Закрыть смену")]):e._e()],1):e._e(),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении смены")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],2)],1)])],1)},staticRenderFns:[]};var I=n("VU/8")(k,$,!1,function(e){n("ban/")},null,null).exports,x={name:"SessionsHistory",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.load()},data:function(){return{dateFrom:null,dateTo:null,selectedOperationTypes:[],employeeIds:[],clientIds:[],officeIds:[],isLoading:!1,loadingError:"",noSessions:!1,sessions:[]}},methods:{load:function(){var e=this;this.isLoading=!0,this.noSessions=!1;var t={withOperations:!0};this.dateFrom&&(t.dateFrom=this.moment(this.dateFrom).format("DD.MM.YYYY")),this.dateTo&&(t.dateTo=this.moment(this.dateTo).format("DD.MM.YYYY")),this.selectedOperationTypes&&this.selectedOperationTypes.length>0&&(t.operationType=this.selectedOperationTypes),this.employeeIds&&this.employeeIds.length>0&&(t.employeeIds=this.employeeIds),this.clientIds&&this.clientIds.length>0&&(t.clientIds=this.clientIds),this.officeIds&&this.officeIds.length>0&&(t.officeIds=this.officeIds),T.post("GetSessions/",t).then(function(t){e.sessions=t.data,Array.isArray(e.sessions)||(e.noSessions=!0),e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})}},computed:{operationTypes:{get:function(){return this.$store.state.operationTypes}},offices:{get:function(){return this.$store.state.offices}},employees:{get:function(){return this.$store.state.employees}},clients:{get:function(){return this.$store.state.clients}}}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("История смен и операций")]),e._v(" "),n("div",{staticClass:"grid-x grid-padding-x no-padding-small"},[n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Дата от")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:e.dateFrom},on:{input:function(t){t.target.composing||(e.dateFrom=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Дата до")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:e.dateTo},on:{input:function(t){t.target.composing||(e.dateTo=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Типы операций")]),e._v(" "),n("v-select",{attrs:{multiple:"",reduce:function(e){return e.id},value:e.selectedOperationTypes,label:"name",options:e.operationTypes},model:{value:e.selectedOperationTypes,callback:function(t){e.selectedOperationTypes=t},expression:"selectedOperationTypes"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Отделения")]),e._v(" "),n("v-select",{attrs:{multiple:"",reduce:function(e){return e.id},value:e.officeIds,label:"name",options:e.offices},model:{value:e.officeIds,callback:function(t){e.officeIds=t},expression:"officeIds"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Клиенты")]),e._v(" "),n("v-select",{attrs:{multiple:"",reduce:function(e){return e.id},value:e.clientIds,"get-option-label":e.$store.getters.getClientDescription,options:e.clients},model:{value:e.clientIds,callback:function(t){e.clientIds=t},expression:"clientIds"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell large-4 small-12"},[n("label",[e._v("Сотрудники")]),e._v(" "),n("v-select",{attrs:{multiple:"",reduce:function(e){return e.id},value:e.employeeIds,label:"name",options:e.employees},model:{value:e.employeeIds,callback:function(t){e.employeeIds=t},expression:"employeeIds"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])])],1),e._v(" "),n("div",{staticClass:"cell small-12"},[n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.load}},[e._v("Показать")])])]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),e.noSessions?n("div",[e._v("Не найдено данных, подходящих под заданные фильтры")]):e._e(),e._v(" "),e.isLoading?n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}})],1):e._e(),e._v(" "),e._l(e.sessions,function(t){return e.noSessions||e.isLoading?e._e():n("div",{key:t.id},[n("h4",[n("router-link",{attrs:{to:"/EditSession/"+t.id.toString()}},[e._v("Смена "+e._s(e.moment(t.dateOpened,"DD.MM.YYYY HH:mm").format("DD.MM.YY"))+" "+e._s(e.$store.getters.getOfficeName(t.officeId)))])],1),e._v(" "),n("table",{staticClass:"operations-table hover margin-bottom-30px"},[e._m(0,!0),e._v(" "),n("tbody",e._l(t.operations,function(t){return n("tr",{key:t},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getTimeFromOperation(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getEmployeeNameFromOperation(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)},domProps:{innerHTML:e._s(e.$store.getters.getOperationContent(t))}})],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getOperationSum(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getOperationBonus(t))+"\n              ")])],1)])}))])])})],2)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Время")]),e._v(" "),n("th",[e._v("Сотрудник")]),e._v(" "),n("th",[e._v("Операция")]),e._v(" "),n("th",[e._v("Сумма")]),e._v(" "),n("th",[e._v("Премия")])])])}]};var w=n("VU/8")(x,L,!1,function(e){n("+T1s")},null,null).exports,P=n("Gu7T"),M=n.n(P),D={name:"EditService",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},created:function(){this.$route.params.id?this.load(this.$route.params.id):this.operations=this.getEmptyItem()},mounted:function(){document.title=this.$route.meta.title},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",operations:[],newClient:this.getEmptyClient()}},methods:{getEmptyItem:function(){return[{operationType:"serviceoperation",sessionId:this.currentSession.id,id:null,officeId:this.currentSession.officeId,serviceId:this.$route.query.serviceTypeId||this.serviceTypes[0].id,startDatetime:this.moment().subtract(1,"hours"),finishDatetime:this.moment(),adminId:this.$route.query.adminId||this.admins[0].id,masterId:this.$route.query.masterId||this.masters[0].id,clientId:null,cashSum:this.getServiceSum(this.$route.query.serviceTypeId,this.$route.query.masterId),cashlessSum:0,discountSum:0,adminBonusSum:0,masterBonusSum:0,clientRating:null,review:"",photos:null,comment:""}]},addItem:function(){this.operations.push({operationType:"goodsoperation",id:null,goodsId:this.goodsTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment(),adminId:this.service.adminId,masterId:this.service.masterId,clientId:this.service.clientId,amount:1,cashSum:this.goodsTypes[0].price,cashlessSum:0,discountSum:0,adminBonusSum:0,masterBonusSum:0,comment:""})},removeItem:function(e){var t=this.operations.findIndex(function(t){return"goodsoperation"===t.operationType&&t.goodsId===e.goodsId&&t.id===e.id});this.operations.splice(t,1)},addExpense:function(){this.operations.push({operationType:"spendoperation",id:null,expenseTypeId:this.spendTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment(),sum:this.spendTypes[0].defaultSum,comment:""})},removeExpense:function(e){var t=this.operations.findIndex(function(t){return"spendoperation"===t.operationType&&t.expenseTypeId===e.expenseTypeId&&t.id===e.id});this.operations.splice(t,1)},addEmployeePayment:function(){this.operations.push({operationType:"employeepayment",id:null,employeePaymentTypeId:this.employeePaymentTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment(),employeeId:this.service.masterId,sum:this.employeePaymentTypes[0].defaultSum,comment:""})},removeEmployeePayment:function(e){var t=this.operations.findIndex(function(t){return"employeepayment"===t.operationType&&t.employeePaymentTypeId===e.employeePaymentTypeId&&t.id===e.id});this.operations.splice(t,1)},load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetServiceOperation/",{id:e}).then(function(e){var n=e.data;n.operationType="serviceoperation",n.startDatetime=t.moment(n.startDatetime,"DD.MM.YYYY HH:mm"),n.finishDatetime=t.moment(n.startDatetime,"DD.MM.YYYY HH:mm"),t.operations=[n],t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="";var t=this.operations;for(var n in t)console.log(n,t[n]),"serviceoperation"!==t[n].operationType&&"goodsoperation"!==t[n].operationType||(t[n].adminBonusSum=this.getAdminBonus(t[n].cashSum+t[n].cashlessSum,t[n].adminId,t[n].operationType),t[n].masterBonusSum=this.getMasterBonus(t[n].cashSum+t[n].cashlessSum,t[n].masterId,t[n].operationType)),console.log(n,t[n]);if(this.operations=t,null===this.service.clientId){var s=this.newClient;null===s.photo&&delete s.photo,null===s.comment&&(s.comment=""),null!==s.contacts&&s.contacts!==[]||delete s.contacts,T.post("EditClient/",s).then(function(t){var n=t.data.id,s=e.operations;for(var o in s)"clientId"in s[o]&&(s[o].clientId=n);e.operations=s,T.post("EditOperations/",e.operations).then(function(t){e.$store.dispatch("getCurrentSession"),e.$router.push({path:"/"}),e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})}).catch(function(t){e.savingError=t,e.isSaving=!1})}else T.post("EditOperations/",this.operations).then(function(t){e.$store.dispatch("getCurrentSession"),e.$router.push({path:"/"}),e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},getEmptyClient:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}]}},getServiceSum:function(e,t){var n=this.serviceTypes.filter(function(t){return t.id===e})[0],s=this.masters.filter(function(e){return e.id===t})[0],o=n.prices.filter(function(e){return e.category===s.categoryId});return o.length?o[0].price:0},getAdminBonus:function(e,t,n){var s=this.admins.filter(function(e){return e.id===t})[0];return console.log(s),"serviceoperation"===n?e*s.servicePercent:"goodsoperation"===n?e*s.goodsPercent:void 0},getMasterBonus:function(e,t,n){var s=this.masters.filter(function(e){return e.id===t})[0];return console.log(s),"serviceoperation"===n?e*s.servicePercent:"goodsoperation"===n?e*s.goodsPercent:void 0},addContact:function(){this.newClient.contacts||(this.newClient.contacts=[]),this.newClient.contacts.push({type:"phone",value:""})},removeContact:function(e){this.newClient.contacts.splice(e,1)}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},serviceTypes:{get:function(){return this.$store.state.serviceTypes}},clients:{get:function(){var e=[].concat(M()(this.$store.state.clients));return e.unshift(this.getEmptyClient()),e}},admins:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("officeAdmin")})}},masters:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("master")})}},goodsTypes:{get:function(){return this.$store.state.goodsTypes}},spendTypes:{get:function(){return this.$store.state.spendTypes}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}},contactTypes:{get:function(){return this.$store.state.contactTypes}},service:{get:function(){return this.operations.filter(function(e){return"serviceoperation"===e.operationType})[0]},set:function(e){var t=this.operations.findIndex(function(e){return"serviceoperation"===e.operationType})||0;this.operations.$set(t,e)}},soldGoods:{get:function(){return this.operations.filter(function(e){return"goodsoperation"===e.operationType})},set:function(e){var t=this.operations.findIndex(function(t){return"goodsoperation"===t.operationType&&t.goodsId===e.goodsId&&t.id===e.id});this.operations.$set(t,e)}},expenses:{get:function(){return this.operations.filter(function(e){return"spendoperation"===e.operationType})},set:function(e){var t=this.operations.findIndex(function(t){return"spendoperation"===t.operationType&&t.expenseTypeId===e.expenseTypeId&&t.id===e.id});this.operations.$set(t,e)}},employeePayments:{get:function(){return this.operations.filter(function(e){return"employeepayment"===e.operationType})},set:function(e){var t=this.operations.findIndex(function(t){return"employeepayment"===t.operationType&&t.employeePaymentTypeId===e.employeePaymentTypeId&&t.id===e.id&&t.employeeId===e.employeeId});this.operations.$set(t,e)}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)},startTime:{get:function(){return this.service.startDatetime.format("HH:mm")},set:function(e){this.service.startDatetime=this.moment(e,"HH:mm")}},endTime:{get:function(){return this.service.finishDatetime.format("HH:mm")},set:function(e){this.service.finishDatetime=this.moment(e,"HH:mm")}}}},O={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":e.canEdit?"session":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[e.canEdit?n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Назад")])],1):n("li",[n("router-link",{attrs:{to:"/SessionsHistory"}},[e._v("История смен и операций")])],1)])]),e._v(" "),n("h1",[e._v("Услуга")]),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),e.service?n("div",{staticClass:"cell large-6"},[n("label",[e._v("Услуга")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.service.serviceId,label:"name",options:e.serviceTypes},model:{value:e.service.serviceId,callback:function(t){e.$set(e.service,"serviceId",t)},expression:"service.serviceId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",{staticClass:"grid-x grid-margin-x"},[n("div",{staticClass:"cell medium-6"},[n("label",[e._v("Время начала")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.startTime,expression:"startTime"}],attrs:{type:"time"},domProps:{value:e.startTime},on:{input:function(t){t.target.composing||(e.startTime=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"cell medium-6"},[n("label",[e._v("Время завершения")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.endTime,expression:"endTime"}],attrs:{type:"time"},domProps:{value:e.endTime},on:{input:function(t){t.target.composing||(e.endTime=t.target.value)}}})])]),e._v(" "),n("label",[e._v("Администратор")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.service.adminId,label:"name",options:e.admins},model:{value:e.service.adminId,callback:function(t){e.$set(e.service,"adminId",t)},expression:"service.adminId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Мастер")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.service.masterId,label:"name",options:e.masters},model:{value:e.service.masterId,callback:function(t){e.$set(e.service,"masterId",t)},expression:"service.masterId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Клиент")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.service.clientId,"get-option-label":e.$store.getters.getClientDescription,options:e.clients},model:{value:e.service.clientId,callback:function(t){e.$set(e.service,"clientId",t)},expression:"service.clientId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),null===e.service.clientId?n("div",[n("label",[e._v("Имя")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newClient.name,expression:"newClient.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.newClient.name},on:{input:function(t){t.target.composing||e.$set(e.newClient,"name",t.target.value)}}}),e._v(" "),e._l(e.newClient.contacts,function(t,s){return n("div",{key:t},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Контакт "+e._s(s>0?s+1:""))]),e._v(" "),n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(t){e.removeContact(s)}}},[e._v("\n                Удалить\n              ")])]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.contactTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"contact.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})],1)}),e._v(" "),n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addContact}},[e._v("\n              Добавить контакт\n            ")])]),e._v(" "),n("label",[e._v("Комментарий к клиенту")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newClient.comment,expression:"newClient.comment"}],attrs:{rows:"3"},domProps:{value:e.newClient.comment},on:{input:function(t){t.target.composing||e.$set(e.newClient,"comment",t.target.value)}}}),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении клиента")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],2):e._e(),e._v(" "),n("label",[e._v("Сумма (наличка)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.service.cashSum,expression:"service.cashSum"}],attrs:{type:"number"},domProps:{value:e.service.cashSum},on:{input:function(t){t.target.composing||e.$set(e.service,"cashSum",t.target.value)}}}),e._v(" "),n("label",[e._v("Сумма (безнал)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.service.cashlessSum,expression:"service.cashlessSum"}],attrs:{type:"number"},domProps:{value:e.service.cashlessSum},on:{input:function(t){t.target.composing||e.$set(e.service,"cashlessSum",t.target.value)}}}),e._v(" "),n("label",[e._v("Скидка, руб.")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.service.discountSum,expression:"service.discountSum"}],attrs:{type:"number"},domProps:{value:e.service.discountSum},on:{input:function(t){t.target.composing||e.$set(e.service,"discountSum",t.target.value)}}}),e._v(" "),n("label",[e._v("Оценка от клиента от 1 до 10")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.service.score,expression:"service.score"}],attrs:{type:"number"},domProps:{value:e.service.score},on:{input:function(t){t.target.composing||e.$set(e.service,"score",t.target.value)}}}),e._v(" "),n("label",[e._v("Отзыв клиента")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.service.review,expression:"service.review"}],attrs:{rows:"2"},domProps:{value:e.service.review},on:{input:function(t){t.target.composing||e.$set(e.service,"review",t.target.value)}}}),e._v(" "),e._v('le" style="display:none" multiple="multiple" accept="image/*">\n        '),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.service.comment,expression:"service.comment"}],attrs:{rows:"2"},domProps:{value:e.service.comment},on:{input:function(t){t.target.composing||e.$set(e.service,"comment",t.target.value)}}}),e._v(" "),e.canEdit?n("div",[n("h2",[e._v("Проданные товары")]),e._v(" "),e._l(e.soldGoods,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Товар "+e._s(s>0?s+1:""))]),e._v(" "),e.canEdit?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeItem(t)}}},[e._v("\n                Удалить\n              ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.goodsId,label:"name",options:e.goodsTypes},model:{value:t.goodsId,callback:function(n){e.$set(t,"goodsId",n)},expression:"soldItem.goodsId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Количество")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"soldItem.amount"}],attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(n){n.target.composing||e.$set(t,"amount",n.target.value)}}}),e._v(" "),n("label",[e._v("Сумма (наличка)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cashSum,expression:"soldItem.cashSum"}],attrs:{type:"number"},domProps:{value:t.cashSum},on:{input:function(n){n.target.composing||e.$set(t,"cashSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Сумма (безнал)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cashlessSum,expression:"soldItem.cashlessSum"}],attrs:{type:"number"},domProps:{value:t.cashlessSum},on:{input:function(n){n.target.composing||e.$set(t,"cashlessSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Скидка, руб.")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.discountSum,expression:"soldItem.discountSum"}],attrs:{type:"number"},domProps:{value:t.discountSum},on:{input:function(n){n.target.composing||e.$set(t,"discountSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"soldItem.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),n("div",[e.canEdit?n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addItem}},[e._v("\n              Добавить товар\n            ")]):e._e()]),e._v(" "),n("h2",[e._v("Расходы")]),e._v(" "),e._l(e.expenses,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Расход "+e._s(s>0?s+1:""))]),e._v(" "),e.canEdit?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeExpense(t)}}},[e._v("\n                Удалить\n              ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.expenseTypeId,label:"name",options:e.spendTypes},model:{value:t.expenseTypeId,callback:function(n){e.$set(t,"expenseTypeId",n)},expression:"expense.expenseTypeId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Сумма")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sum,expression:"expense.sum"}],attrs:{type:"number"},domProps:{value:t.sum},on:{input:function(n){n.target.composing||e.$set(t,"sum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"expense.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),e.canEdit?n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addExpense}},[e._v("\n              Добавить расход\n            ")])]):e._e(),e._v(" "),n("h2",[e._v("Выплаты мастеру")]),e._v(" "),e._l(e.employeePayments,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Выплата мастеру "+e._s(s>0?s+1:""))]),e._v(" "),e.canEdit?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeEmployeePayment(t)}}},[e._v("\n                Удалить\n              ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.employeePaymentTypeId,label:"name",options:e.employeePaymentTypes},model:{value:t.employeePaymentTypeId,callback:function(n){e.$set(t,"employeePaymentTypeId",n)},expression:"payment.employeePaymentTypeId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Сумма")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sum,expression:"payment.sum"}],attrs:{type:"number"},domProps:{value:t.sum},on:{input:function(n){n.target.composing||e.$set(t,"sum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"payment.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),e.canEdit?n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addEmployeePayment}},[e._v("\n              Добавить выплату мастеру\n            ")])]):e._e()],2):e._e(),e._v(" "),e.canEdit?n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")])],1):e._e()],1):e._e()],1)])],1)},staticRenderFns:[]};var j=n("VU/8")(D,O,!1,function(e){n("qjGC")},null,null).exports,N={name:"EditGoodsSell",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},created:function(){this.$route.params.id?this.load(this.$route.params.id):this.operations=[this.getEmptyItem()]},mounted:function(){document.title=this.$route.meta.title},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",newClient:this.getEmptyClient(),operations:[],adminId:this.$route.query.adminId||this.admins[0].id,masterId:this.$route.query.masterId||this.masters[0].id,clientId:null}},methods:{addItem:function(){this.operations.push(this.getEmptyItem())},removeItem:function(e){var t=this.operations.findIndex(function(t){return"goodsoperation"===t.operationType&&t.goodsId===e.goodsId&&t.id===e.id});this.operations.splice(t,1)},getEmptyItem:function(){return{operationType:"goodsoperation",id:null,goodsId:this.goodsTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment(),adminId:this.adminId,masterId:this.masterId,clientId:null,amount:1,cashSum:this.goodsTypes[0].price,cashlessSum:0,discountSum:0,adminBonusSum:0,masterBonusSum:0,comment:""}},load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetGoodsOperation/",{id:e}).then(function(e){var n=e.data;n.operationType="goodsoperation",n.datetime=t.moment(n.datetime,"DD.MM.YYYY HH:mm"),t.operations=[n],t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="";var t=this.operations;for(var n in t)"serviceoperation"!==t[n].operationType&&"goodsoperation"!==t[n].operationType||(t[n].adminBonusSum=this.getAdminBonus(t[n].cashSum+t[n].cashlessSum,t[n].adminId,t[n].operationType),t[n].masterBonusSum=this.getMasterBonus(t[n].cashSum+t[n].cashlessSum,t[n].masterId,t[n].operationType),t[n].adminId=this.adminId,t[n].masterId=this.masterId,t[n].clientId=this.clientId);if(this.operations=t,null===this.clientId){var s=this.newClient;null===s.photo&&delete s.photo,null===s.comment&&(s.comment=""),null!==s.contacts&&s.contacts!==[]||delete s.contacts,T.post("EditClient/",s).then(function(t){var n=t.data.id,s=e.operations;for(var o in s)"clientId"in s[o]&&(s[o].clientId=n);e.operations=s,T.post("EditOperations/",e.operations).then(function(t){e.$store.dispatch("getCurrentSession"),e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})}).catch(function(t){e.savingError=t,e.isSaving=!1})}else{var o=this.clientId;for(n in t=this.operations)"clientId"in t[n]&&(t[n].clientId=o);this.operations=t,T.post("EditOperations/",this.operations).then(function(t){e.$store.dispatch("getCurrentSession"),e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})}},getEmptyClient:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}]}},getAdminBonus:function(e,t,n){var s=this.admins.filter(function(e){return e.id===t})[0];return console.log(s),"serviceoperation"===n?e*s.servicePercent:"goodsoperation"===n?e*s.goodsPercent:void 0},getMasterBonus:function(e,t,n){var s=this.masters.filter(function(e){return e.id===t})[0];return console.log(s),"serviceoperation"===n?e*s.servicePercent:"goodsoperation"===n?e*s.goodsPercent:void 0},addContact:function(){this.newClient.contacts||(this.newClient.contacts=[]),this.newClient.contacts.push({type:"phone",value:""})},removeContact:function(e){this.newClient.contacts.splice(e,1)}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},clients:{get:function(){return this.$store.state.clients}},admins:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("officeAdmin")})}},masters:{get:function(){return this.$store.state.employees.filter(function(e){return e.roles.includes("master")})}},goodsTypes:{get:function(){return this.$store.state.goodsTypes}},contactTypes:{get:function(){return this.$store.state.contactTypes}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":e.canEdit?"session":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[e.canEdit?n("li",[n("router-link",{attrs:{to:"/"}},[e._v("Назад")])],1):n("li",[n("router-link",{attrs:{to:"/SessionsHistory"}},[e._v("История смен и операций")])],1)])]),e._v(" "),n("h1",[e._v("Продажа товаров")]),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Администратор")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.adminId,label:"name",options:e.admins},model:{value:e.adminId,callback:function(t){e.adminId=t},expression:"adminId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Мастер")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.masterId,label:"name",options:e.masters},model:{value:e.masterId,callback:function(t){e.masterId=t},expression:"masterId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Клиент")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.clientId,"get-option-label":e.$store.getters.getClientDescription,options:e.clients},model:{value:e.clientId,callback:function(t){e.clientId=t},expression:"clientId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),null===e.clientId?n("div",[n("label",[e._v("Имя")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newClient.name,expression:"newClient.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.newClient.name},on:{input:function(t){t.target.composing||e.$set(e.newClient,"name",t.target.value)}}}),e._v(" "),e._l(e.newClient.contacts,function(t,s){return n("div",{key:t},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Контакт "+e._s(s>0?s+1:""))]),e._v(" "),n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(t){e.removeContact(s)}}},[e._v("\n                Удалить\n              ")])]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.contactTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"contact.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})],1)}),e._v(" "),n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addContact}},[e._v("\n              Добавить контакт\n            ")])]),e._v(" "),n("label",[e._v("Комментарий к клиенту")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newClient.comment,expression:"newClient.comment"}],attrs:{rows:"3"},domProps:{value:e.newClient.comment},on:{input:function(t){t.target.composing||e.$set(e.newClient,"comment",t.target.value)}}})],2):e._e(),e._v(" "),e._l(e.operations,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Товар "+e._s(s>0?s+1:""))]),e._v(" "),e.canEdit&&s>0?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeItem(t)}}},[e._v("\n              Удалить\n            ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.goodsId,label:"name",options:e.goodsTypes},model:{value:t.goodsId,callback:function(n){e.$set(t,"goodsId",n)},expression:"soldItem.goodsId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Количество")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"soldItem.amount"}],attrs:{type:"number"},domProps:{value:t.amount},on:{input:function(n){n.target.composing||e.$set(t,"amount",n.target.value)}}}),e._v(" "),n("label",[e._v("Сумма (наличка)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cashSum,expression:"soldItem.cashSum"}],attrs:{type:"number"},domProps:{value:t.cashSum},on:{input:function(n){n.target.composing||e.$set(t,"cashSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Сумма (безнал)")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cashlessSum,expression:"soldItem.cashlessSum"}],attrs:{type:"number"},domProps:{value:t.cashlessSum},on:{input:function(n){n.target.composing||e.$set(t,"cashlessSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Скидка, руб.")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.discountSum,expression:"soldItem.discountSum"}],attrs:{type:"number"},domProps:{value:t.discountSum},on:{input:function(n){n.target.composing||e.$set(t,"discountSum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"soldItem.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),n("div",[e.canEdit?n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addItem}},[e._v("\n            Добавить товар\n          ")]):e._e()]),e._v(" "),e.canEdit?n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")])],1):e._e()],2)],1)])],1)},staticRenderFns:[]};var G=n("VU/8")(N,F,!1,function(e){n("i3qE")},null,null).exports,H={name:"EditEmployeePayment",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&(this.operations=[{operationType:"employeePayment",id:8,officeId:1,sessionId:1,employeeId:4,type:2,datetime:"21.09.2019 18:22",sum:600,comment:""}])},data:function(){return{isLoading:!1,isSaving:!1,operations:[{operationType:"employeePayment",id:null,type:1,sessionId:this.$route.query.sessionId,officeId:this.$route.query.officeId,datetime:this.$store.getters.getDateTimeNow,employeeId:4,sum:500,comment:""}]}},methods:{addEmployeePayment:function(){this.operations.push({operationType:"employeePayment",id:null,type:1,sessionId:this.$route.query.sessionId,officeId:this.$route.query.officeId,datetime:this.$store.getters.getDateTimeNow,employeeId:4,sum:500,comment:""})},removeEmployeePayment:function(e){var t=this.operations.findIndex(function(t){return"employeePayment"===t.operationType&&t.type===e.type&&t.id===e.id});this.operations.splice(t,1)},save:function(){},deleteOperation:function(){}},computed:{employees:{get:function(){return this.$store.state.employees}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":e.operations[0].sessionId===e.$store.state.currentSession.id?"session":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[e.operations[0].sessionId===e.$store.state.currentSession.id?n("li",[n("router-link",{attrs:{to:"/Session"}},[e._v("Смена")])],1):n("li",[n("router-link",{attrs:{to:"/SessionsHistory"}},[e._v("История смен и операций")])],1)])]),e._v(" "),n("h1",[e._v("Выплата сотруднику")]),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[e._l(e.operations,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Выплата сотруднику "+e._s(s>0?s+1:""))]),e._v(" "),e.operations[0].sessionId===e.$store.state.currentSession.id&&s>0?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeEmployeePayment(t)}}},[e._v("\n              Удалить\n            ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.employeePaymentTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"payment.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Время")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.datetime,expression:"payment.datetime"}],attrs:{type:"text"},domProps:{value:t.datetime},on:{input:function(n){n.target.composing||e.$set(t,"datetime",n.target.value)}}}),e._v(" "),n("label",[e._v("Сотрудник")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.employeeId,label:"name",options:e.employees},model:{value:t.employeeId,callback:function(n){e.$set(t,"employeeId",n)},expression:"payment.employeeId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Сумма")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sum,expression:"payment.sum"}],attrs:{type:"number"},domProps:{value:t.sum},on:{input:function(n){n.target.composing||e.$set(t,"sum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"payment.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),n("div",[e.operations[0].sessionId===e.$store.state.currentSession.id?n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addEmployeePayment}},[e._v("\n            Добавить выплату сотруднику\n          ")]):e._e()]),e._v(" "),e.operations[0].sessionId===e.$store.state.currentSession.id?n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")])],1):e._e()],2)],1)])],1)},staticRenderFns:[]};var V=n("VU/8")(H,R,!1,function(e){n("UU9T")},null,null).exports,A={name:"EditExpense",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&(this.operations=[{operationType:"spend",id:7,officeId:1,sessionId:1,type:2,datetime:"21.09.2019 12:44",sum:600,comment:""}])},data:function(){return{isLoading:!1,isSaving:!1,operations:[{operationType:"spend",id:null,type:1,sessionId:this.$route.query.sessionId,officeId:this.$route.query.officeId,datetime:this.$store.getters.getDateTimeNow,sum:500,comment:""}]}},methods:{addExpense:function(){this.operations.push({operationType:"spend",id:null,type:1,sessionId:this.$route.query.sessionId,officeId:this.$route.query.officeId,datetime:this.$store.getters.getDateTimeNow,sum:500,comment:""})},removeExpense:function(e){var t=this.operations.findIndex(function(t){return"spend"===t.operationType&&t.type===e.type&&t.id===e.id});this.operations.splice(t,1)},save:function(){},deleteOperation:function(){}},computed:{spendTypes:{get:function(){return this.$store.state.spendTypes}}}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":e.operations[0].sessionId===e.$store.state.currentSession.id?"session":"history"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[e.operations[0].sessionId===e.$store.state.currentSession.id?n("li",[n("router-link",{attrs:{to:"/Session"}},[e._v("Смена")])],1):n("li",[n("router-link",{attrs:{to:"/SessionsHistory"}},[e._v("История смен и операций")])],1)])]),e._v(" "),n("h1",[e._v("Расход")]),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[e._l(e.operations,function(t,s){return n("div",{key:t.id},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Расход "+e._s(s>0?s+1:""))]),e._v(" "),e.operations[0].sessionId===e.$store.state.currentSession.id&&s>0?n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(n){e.removeExpense(t)}}},[e._v("\n              Удалить\n            ")]):e._e()]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.spendTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"expense.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Время")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.datetime,expression:"expense.datetime"}],attrs:{type:"text"},domProps:{value:t.datetime},on:{input:function(n){n.target.composing||e.$set(t,"datetime",n.target.value)}}}),e._v(" "),n("label",[e._v("Сумма")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.sum,expression:"expense.sum"}],attrs:{type:"number"},domProps:{value:t.sum},on:{input:function(n){n.target.composing||e.$set(t,"sum",n.target.value)}}}),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"expense.comment"}],attrs:{rows:"2"},domProps:{value:t.comment},on:{input:function(n){n.target.composing||e.$set(t,"comment",n.target.value)}}})],1)}),e._v(" "),n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addExpense}},[e._v("Добавить расход")])]),e._v(" "),e.operations[0].sessionId===e.$store.state.currentSession.id?n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary cell shrink",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")])],1):e._e()],2)],1)])],1)},staticRenderFns:[]};var U=n("VU/8")(A,B,!1,function(e){n("O8QB")},null,null).exports,q={name:"EditClient",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",client:this.getEmptyItem()}},methods:{addContact:function(){this.client.contacts||(this.client.contacts=[]),this.client.contacts.push({type:"phone",value:""})},removeContact:function(e){this.client.contacts.splice(e,1)},load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetClient/",{id:e}).then(function(e){t.client=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="";var t=this.client;null===t.photo&&delete t.photo,null===t.comment&&(t.comment=""),null!==t.contacts&&t.contacts!==[]||delete t.contacts,delete t.operations,T.post("EditClient/",t).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.client=this.getEmptyItem(),this.$router.push("/EditClient")},getEmptyItem:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}],comment:""}}},computed:{contactTypes:{get:function(){return this.$store.state.contactTypes}}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"clients"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/Clients"}},[e._v("Клиенты")])],1)])]),e._v(" "),n("h1",[e._v("Клиент")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Имя")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.client.name,expression:"client.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.client.name},on:{input:function(t){t.target.composing||e.$set(e.client,"name",t.target.value)}}}),e._v(" "),e._l(e.client.contacts,function(t,s){return n("div",{key:t},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Контакт "+e._s(s>0?s+1:""))]),e._v(" "),n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(t){e.removeContact(s)}}},[e._v("\n              Удалить\n            ")])]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.contactTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"contact.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})],1)}),e._v(" "),n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addContact}},[e._v("\n            Добавить контакт\n          ")])]),e._v(" "),n("label",[e._v("Комментарий")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.client.comment,expression:"client.comment"}],attrs:{rows:"3"},domProps:{value:e.client.comment},on:{input:function(t){t.target.composing||e.$set(e.client,"comment",t.target.value)}}}),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении клиента")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],2)],1),e._v(" "),e.client.id>0?n("div",[n("h2",[e._v("История операций по клиенту")]),e._v(" "),n("table",{staticClass:"operations-table hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.client.operations,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getDateTimeFromOperation(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getEmployeeNameFromOperation(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)},domProps:{innerHTML:e._s(e.$store.getters.getOperationContent(t))}})],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getOperationSum(t))+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:e.$store.getters.getOperationLink(t)}},[e._v("\n                "+e._s(e.$store.getters.getOperationBonus(t))+"\n              ")])],1)])}))])]):e._e()])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Дата")]),e._v(" "),n("th",[e._v("Мастер")]),e._v(" "),n("th",[e._v("Услуга / товар")]),e._v(" "),n("th",[e._v("Сумма")]),e._v(" "),n("th",[e._v("Премия")])])])}]};var z=n("VU/8")(q,Y,!1,function(e){n("X7O4")},null,null).exports,Z={name:"Clients",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadClients()},data:function(){return{q:"",clients:[],isLoading:!1,error:""}},methods:{loadClients:function(){var e=this;this.isLoading=!0,T.post("GetClients/",{q:this.q}).then(function(t){e.clients=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},watch:{clients:function(){""===this.q&&this.$store.commit("updateStore",{name:"clients",value:this.clients})}}},X={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"clients"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Клиенты "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditClient/"}},[e._v("Добавить")])],1),e._v(" "),n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.q,expression:"q"}],staticClass:"input-group-field",attrs:{type:"text",placeholder:"Имя или контакт клиента"},domProps:{value:e.q},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.stopPropagation(),e.loadClients(t)},input:function(t){t.target.composing||(e.q=t.target.value)}}}),e._v(" "),n("div",{staticClass:"input-group-button"},[n("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.loadClients}},[e._v("Найти")])])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),e.error?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.error))])]):e._e(),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.clients,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+t.id}},e._l(t.contacts,function(t,s){return n("div",{key:s},[e._v("\n                  "+e._s(e.$store.getters.getContactTypeName(t.type))+": "+e._s(t.value)+"\n                ")])}))],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+t.id}},[e._v("\n                "+e._s(t.comment)+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Имя")]),this._v(" "),t("th",[this._v("Контакты")]),this._v(" "),t("th",[this._v("Комментарий")])])])}]};var W=n("VU/8")(Z,X,!1,function(e){n("+G8z")},null,null).exports,K={name:"UploadExpenses",components:{appMenu:h},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},Q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("appMenu",{attrs:{"selected-element":"admin"}}),this._v(" "),t("div",{staticClass:"content"},[t("h1",[this._v("Загрузка расходов")]),this._v(" "),t("div",{staticClass:"grid-x grid-margin-x align-middle"},[t("div",{staticClass:"cell shrink"},[t("button",{staticClass:"button no-margin",attrs:{type:"button"}},[this._v("Загрузить расходы")]),this._v(" "),t("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"}})]),this._v(" "),t("div",{staticClass:"cell auto"},[t("router-link",{attrs:{to:""}},[this._v("Скачать шаблон")])],1)])])],1)},staticRenderFns:[]};var J=n("VU/8")(K,Q,!1,function(e){n("lMXO")},null,null).exports,ee={name:"Offices",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadOffices()},data:function(){return{isLoading:!1,error:""}},methods:{loadOffices:function(){var e=this;this.isLoading=!0,T.post("GetOffices/",{}).then(function(t){e.offices=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{offices:{get:function(){return this.$store.state.offices},set:function(e){this.$store.commit("updateStore",{name:"offices",value:e})}}}},te={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Отделения "),n("router-link",{staticClass:"button no-margin",attrs:{to:"/EditOffice/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.offices,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditOffice/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditOffice/"+t.id}},[e._v("\n                "+e._s(e.$store.getters.getOfficeStateName(t.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Название")]),this._v(" "),t("th",[this._v("Статус")])])])}]};var ne=n("VU/8")(ee,te,!1,function(e){n("musY")},null,null).exports,se={name:"EditOffice",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",office:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetOffice/",{id:e}).then(function(e){t.office=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="",T.post("EditOffice/",this.office).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.office=this.getEmptyItem(),this.$router.push("/EditOffice")},getEmptyItem:function(){return{id:null,name:"",state:"open",city:"null",address:"null",coordinatex:"null",coordinatey:"null"}}},computed:{officeStates:{get:function(){return this.$store.state.officeStates}}}},oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/Offices"}},[e._v("Отделения")])],1)])]),e._v(" "),n("h1",[e._v("Отделение")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.office.name,expression:"office.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.office.name},on:{input:function(t){t.target.composing||e.$set(e.office,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.office.state,label:"name",options:e.officeStates},model:{value:e.office.state,callback:function(t){e.$set(e.office,"state",t)},expression:"office.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],1)],1)])],1)},staticRenderFns:[]};var ie=n("VU/8")(se,oe,!1,function(e){n("1nGp")},null,null).exports,ae={name:"ServiceTypes",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetServicesPrices/",{}).then(function(t){e.serviceTypes=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{serviceTypes:{get:function(){return this.$store.state.serviceTypes},set:function(e){this.$store.commit("updateStore",{name:"serviceTypes",value:e})}}}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Услуги "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditServiceType/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.serviceTypes,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditServiceType/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditServiceType/"+t.id}},e._l(t.prices,function(t){return n("div",{key:t},[t.category?n("span",[e._v("\n                    "+e._s(e.$store.getters.getMasterCategoryName(t.category))+": "+e._s(t.price)+" ₽\n                  ")]):e._e(),e._v(" "),t.category||0===t.category?e._e():n("span",[e._v("\n                    Все категории мастеров: "+e._s(t.price)+" ₽\n                  ")])])}))],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Название")]),this._v(" "),t("th",[this._v("Цены")])])])}]};var le=n("VU/8")(ae,re,!1,function(e){n("K1l2")},null,null).exports,ce={name:"EditServiceType",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",serviceType:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetService/",{id:e}).then(function(e){t.serviceType=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="";var t=this.serviceType;t.prices=this.mergedPrices,T.post("EditService/",t).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.serviceType=this.getEmptyItem(),this.$router.push("/EditServiceType")},getEmptyItem:function(){return{id:null,name:"",prices:[]}}},computed:{mergedPrices:function(){var e=this,t=[];return this.$store.state.masterCategories.map(function(n){var s=0;try{s=e.serviceType.prices.filter(function(e){return e.category===n.id})[0].price}catch(e){}t.push({category:n.id,price:s})}),t}}},ue={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/ServiceTypes"}},[e._v("Услуги")])],1)])]),e._v(" "),n("h1",[e._v("Тип услуги")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.serviceType.name,expression:"serviceType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.serviceType.name},on:{input:function(t){t.target.composing||e.$set(e.serviceType,"name",t.target.value)}}}),e._v(" "),e._l(e.mergedPrices,function(t){return n("div",{key:t},[n("label",[e._v("Категория мастера: "+e._s(e.$store.getters.getMasterCategoryName(t.category)))]),e._v(" "),n("label",[e._v("Цена")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price.price"}],attrs:{type:"number"},domProps:{value:t.price},on:{input:function(n){n.target.composing||e.$set(t,"price",n.target.value)}}})])}),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],2)],1)])],1)},staticRenderFns:[]};var de=n("VU/8")(ce,ue,!1,function(e){n("FPSF")},null,null).exports,me={name:"GoodsTypes",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetGoods/",{}).then(function(t){e.goodsTypes=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{goodsTypes:{get:function(){return this.$store.state.goodsTypes},set:function(e){this.$store.commit("updateStore",{name:"goodsTypes",value:e})}}}},ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Товары "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditGoodsType/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.goodsTypes,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+t.id}},[e._v("\n                "+e._s(t.price)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+t.id}},[e._v("\n                "+e._s(e.$store.getters.getGoodsStateName(t.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Название")]),this._v(" "),t("th",[this._v("Цена")]),this._v(" "),t("th",[this._v("Статус")])])])}]};var pe=n("VU/8")(me,ve,!1,function(e){n("SYys")},null,null).exports,fe={name:"EditGoodsType",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",goodsType:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetGood/",{id:e}).then(function(e){t.goodsType=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="",T.post("EditGood/",this.goodsType).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.goodsType=this.getEmptyItem(),this.$router.push("/EditGoodsType")},getEmptyItem:function(){return{id:null,name:"",price:"",state:"active"}}},computed:{goodsStates:{get:function(){return this.$store.state.goodsStates}}}},he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/GoodsTypes"}},[e._v("Товары")])],1)])]),e._v(" "),n("h1",[e._v("Товар")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.goodsType.name,expression:"goodsType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.goodsType.name},on:{input:function(t){t.target.composing||e.$set(e.goodsType,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Цена")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.goodsType.price,expression:"goodsType.price"}],attrs:{type:"number",autofocus:""},domProps:{value:e.goodsType.price},on:{input:function(t){t.target.composing||e.$set(e.goodsType,"price",t.target.value)}}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.goodsType.state,label:"name",options:e.goodsStates},model:{value:e.goodsType.state,callback:function(t){e.$set(e.goodsType,"state",t)},expression:"goodsType.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],1)],1)])],1)},staticRenderFns:[]};var ge=n("VU/8")(fe,he,!1,function(e){n("4BPl")},null,null).exports,_e={name:"ExpenseTypes",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetSpendTypes/",{}).then(function(t){e.spendTypes=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{spendTypes:{get:function(){return this.$store.state.spendTypes},set:function(e){this.$store.commit("updateStore",{name:"spendTypes",value:e})}}}},ye={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Типы расходов "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditExpenseType/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.spendTypes,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+t.id}},[e._v("\n                "+e._s(t.defaultSum)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+t.id}},[e._v("\n                "+e._s(e.$store.getters.getSpendTypeStateName(t.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Название")]),this._v(" "),t("th",[this._v("Сумма по умолчанию")]),this._v(" "),t("th",[this._v("Статус")])])])}]};var Ce=n("VU/8")(_e,ye,!1,function(e){n("yID9")},null,null).exports,be={name:"EditExpenseType",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",spendType:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetSpendType/",{id:e}).then(function(e){t.spendType=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="",T.post("EditSpendType/",this.spendType).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.spendType=this.getEmptyItem(),this.$router.push("/EditSpendType")},getEmptyItem:function(){return{id:null,name:"",defaultSum:0,state:"active"}}},computed:{spendTypeStates:{get:function(){return this.$store.state.spendTypeStates}}}},Ee={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/ExpenseTypes"}},[e._v("Типы расходов")])],1)])]),e._v(" "),n("h1",[e._v("Тип расхода")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.spendType.name,expression:"spendType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.spendType.name},on:{input:function(t){t.target.composing||e.$set(e.spendType,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Сумма по умолчанию")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.spendType.defaultSum,expression:"spendType.defaultSum"}],attrs:{type:"number",autofocus:""},domProps:{value:e.spendType.defaultSum},on:{input:function(t){t.target.composing||e.$set(e.spendType,"defaultSum",t.target.value)}}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.spendType.state,label:"name",options:e.spendTypeStates},model:{value:e.spendType.state,callback:function(t){e.$set(e.spendType,"state",t)},expression:"spendType.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],1)],1)])],1)},staticRenderFns:[]};var Se=n("VU/8")(be,Ee,!1,function(e){n("AeFz")},null,null).exports,Te={name:"EmployeePaymentTypes",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetEmployeePaymentTypes/",{}).then(function(t){e.employeePaymentTypes=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes},set:function(e){this.$store.commit("updateStore",{name:"employeePaymentTypes",value:e})}}}},ke={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Типы выплат сотрудникам "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditEmployeePaymentType/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.employeePaymentTypes,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+t.id}},[e._v("\n                "+e._s(t.defaultSum)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+t.id}},[e._v("\n                "+e._s(e.$store.getters.getEmployeePaymentStateName(t.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Название")]),this._v(" "),t("th",[this._v("Сумма по умолчанию")]),this._v(" "),t("th",[this._v("Статус")])])])}]};var $e=n("VU/8")(Te,ke,!1,function(e){n("h4iA")},null,null).exports,Ie={name:"EditEmployeePaymentType",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",employeePaymentType:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetEmployeePaymentType/",{id:e}).then(function(e){t.employeePaymentType=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="",T.post("EditEmployeePaymentType/",this.employeePaymentType).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.employeePaymentType=this.getEmptyItem(),this.$router.push("/EditEmployeePaymentType")},getEmptyItem:function(){return{id:null,name:"",defaultSum:0,state:"active"}}},computed:{employeePaymentTypeStates:{get:function(){return this.$store.state.employeePaymentTypeStates}}}},xe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/EmployeePaymentTypes"}},[e._v("Типы выплат сотрудникам")])],1)])]),e._v(" "),n("h1",[e._v("Тип выплаты сотрудникам")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employeePaymentType.name,expression:"employeePaymentType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.employeePaymentType.name},on:{input:function(t){t.target.composing||e.$set(e.employeePaymentType,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Сумма по умолчанию")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employeePaymentType.defaultSum,expression:"employeePaymentType.defaultSum"}],attrs:{type:"number",autofocus:""},domProps:{value:e.employeePaymentType.defaultSum},on:{input:function(t){t.target.composing||e.$set(e.employeePaymentType,"defaultSum",t.target.value)}}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.employeePaymentType.state,label:"name",options:e.employeePaymentTypeStates},model:{value:e.employeePaymentType.state,callback:function(t){e.$set(e.employeePaymentType,"state",t)},expression:"employeePaymentType.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],1)],1)])],1)},staticRenderFns:[]};var Le=n("VU/8")(Ie,xe,!1,function(e){n("6oco")},null,null).exports,we={name:"Employees",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetEmployees/",{}).then(function(t){e.employees=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{employees:{get:function(){return this.$store.state.employees},set:function(e){this.$store.commit("updateStore",{name:"employees",value:e})}}}},Pe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Сотрудники "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditEmployee/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.employees,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployee/"+t.id}},[t.photo?n("img",{attrs:{src:"url("+t.photo+")"}}):e._e(),e._v(" "),t.photo?e._e():n("div",[e._v(e._s(e.$store.getters.getUserPicturePlaceholderText(t.name)))]),e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployee/"+t.id}},e._l(t.roles,function(t){return n("div",{key:t},[e._v("\n                    "+e._s(e.$store.getters.getUserRoleName(t))+"\n                ")])}))],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Сотрудник")]),this._v(" "),t("th",[this._v("Роли")])])])}]};var Me=n("VU/8")(we,Pe,!1,function(e){n("0XER")},null,null).exports,De={name:"EditEmployee",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",employee:this.getEmptyItem()}},methods:{addContact:function(){this.employee.contacts||(this.employee.contacts=[]),this.employee.contacts.push({type:"phone",value:""})},removeContact:function(e){this.employee.contacts.splice(e,1)},load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetEmployee/",{id:e}).then(function(e){t.employee=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="";var t=this.employee;t.contacts&&0===t.contacts.length&&delete t.contacts,t.photo||delete t.photo,T.post("EditEmployee/",t).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.employee=this.getEmptyItem(),this.$router.push("/EditEmployee/")},getEmptyItem:function(){return{id:null,name:"",login:"",password:"",contacts:[],roles:["master"],photo:null,salary:0,servicePercent:.1,goodsPercent:.1,categoryId:0,state:"working"}}},computed:{userRoles:{get:function(){return this.$store.state.userRoles}},employeeStates:{get:function(){return this.$store.state.employeeStates}},contactTypes:{get:function(){return this.$store.state.contactTypes}},masterCategories:{get:function(){return this.$store.state.masterCategories}}}},Oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/Employees"}},[e._v("Сотрудники")])],1)])]),e._v(" "),n("h1",[e._v("Сотрудник")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Имя")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.name,expression:"employee.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.employee.name},on:{input:function(t){t.target.composing||e.$set(e.employee,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Фото")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"}},[e._v("Выбрать")]),e._v(" "),n("input",{ref:"photoSelector",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.employee.state,label:"name",options:e.employeeStates},model:{value:e.employee.state,callback:function(t){e.$set(e.employee,"state",t)},expression:"employee.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Роли")]),e._v(" "),n("v-select",{attrs:{multiple:"",reduce:function(e){return e.id},value:e.employee.roles,label:"name",options:e.userRoles},model:{value:e.employee.roles,callback:function(t){e.$set(e.employee,"roles",t)},expression:"employee.roles"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Категория мастера")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.employee.categoryId,label:"name",options:e.masterCategories},model:{value:e.employee.categoryId,callback:function(t){e.$set(e.employee,"categoryId",t)},expression:"employee.categoryId"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("label",[e._v("Логин")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.login,expression:"employee.login"}],attrs:{type:"text"},domProps:{value:e.employee.login},on:{input:function(t){t.target.composing||e.$set(e.employee,"login",t.target.value)}}}),e._v(" "),n("label",[e._v("Пароль")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.password,expression:"employee.password"}],attrs:{type:"password"},domProps:{value:e.employee.password},on:{input:function(t){t.target.composing||e.$set(e.employee,"password",t.target.value)}}}),e._v(" "),e._l(e.employee.contacts,function(t,s){return n("div",{key:t},[n("label",{staticClass:"grid-x",on:{click:function(e){e.preventDefault()}}},[n("span",{staticClass:"cell auto"},[e._v("Контакт "+e._s(s>0?s+1:""))]),e._v(" "),n("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(t){e.removeContact(s)}}},[e._v("\n              Удалить\n            ")])]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:t.type,label:"name",options:e.contactTypes},model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"contact.type"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})],1)}),e._v(" "),n("div",[n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.addContact}},[e._v("\n            Добавить контакт\n          ")])]),e._v(" "),n("label",[e._v("Оклад")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.salary,expression:"employee.salary"}],attrs:{type:"number"},domProps:{value:e.employee.salary},on:{input:function(t){t.target.composing||e.$set(e.employee,"salary",t.target.value)}}}),e._v(" "),n("label",[e._v("% премии от услуг")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.servicePercent,expression:"employee.servicePercent"}],attrs:{type:"number"},domProps:{value:e.employee.servicePercent},on:{input:function(t){t.target.composing||e.$set(e.employee,"servicePercent",t.target.value)}}}),e._v(" "),n("label",[e._v("% премии от товаров")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.employee.goodsPercent,expression:"employee.goodsPercent"}],attrs:{type:"number"},domProps:{value:e.employee.goodsPercent},on:{input:function(t){t.target.composing||e.$set(e.employee,"goodsPercent",t.target.value)}}}),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],2)],1)])],1)},staticRenderFns:[]};var je=n("VU/8")(De,Oe,!1,function(e){n("FZO8")},null,null).exports,Ne={name:"MasterTypes",components:{appMenu:h,VueElementLoading:i.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var e=this;this.isLoading=!0,T.post("GetBarberCategories/",{}).then(function(t){e.masterCategories=t.data,e.isLoading=!1}).catch(function(t){e.error=t,e.isLoading=!1})}},computed:{masterCategories:{get:function(){return this.$store.state.masterCategories},set:function(e){this.$store.commit("updateStore",{name:"masterCategories",value:e})}}}},Fe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("h1",[e._v("Категории мастеров "),n("router-link",{staticClass:"button no-margion",attrs:{to:"/EditMasterType/"}},[e._v("Добавить")])],1),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("table",{staticClass:"hover"},[e._m(0),e._v(" "),n("tbody",e._l(e.masterCategories,function(t){return n("tr",{key:t.id},[n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditMasterType/"+t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])],1),e._v(" "),n("td",[n("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+t.id}},[e._v("\n                "+e._s(e.$store.getters.getMasterCategoryStateName(t.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("Категория")]),this._v(" "),t("th",[this._v("Статус")])])])}]};var Ge=n("VU/8")(Ne,Fe,!1,function(e){n("LbxH")},null,null).exports,He={name:"EditMasterType",components:{appMenu:h,VueElementLoading:i.a,"v-select":_.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",masterCategory:this.getEmptyItem()}},methods:{load:function(e){var t=this;this.isLoading=!0,this.loadingError="",T.post("GetBarberCategory/",{id:e}).then(function(e){t.masterCategory=e.data,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})},save:function(){var e=this;this.isSaving=!0,this.savingError="",T.post("EditBarberCategory/",this.masterCategory).then(function(t){e.isSaving=!1}).catch(function(t){e.savingError=t,e.isSaving=!1})},saveAndAddMore:function(){this.save(),this.masterCategory=this.getEmptyItem(),this.$router.push("/EditMasterType")},getEmptyItem:function(){return{id:null,name:"",state:"active"}}},computed:{masterCategoryStates:{get:function(){return this.$store.state.masterCategoryStates}}}},Re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("appMenu",{attrs:{"selected-element":"admin"}}),e._v(" "),n("div",{staticClass:"content"},[n("nav",[n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:"/MasterTypes"}},[e._v("Категории мастеров")])],1)])]),e._v(" "),n("h1",[e._v("Категория мастера")]),e._v(" "),e.loadingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при загрузке данных")]),e._v(" "),n("p",[e._v(e._s(e.loadingError))])]):e._e(),e._v(" "),n("div",{staticClass:"grid-x"},[n("vue-element-loading",{attrs:{active:e.isLoading,color:"#1C457D"}}),e._v(" "),n("div",{staticClass:"cell large-6"},[n("label",[e._v("Название")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.masterCategory.name,expression:"masterCategory.name"}],attrs:{type:"text",autofocus:""},domProps:{value:e.masterCategory.name},on:{input:function(t){t.target.composing||e.$set(e.masterCategory,"name",t.target.value)}}}),e._v(" "),n("label",[e._v("Статус")]),e._v(" "),n("v-select",{attrs:{clearable:!1,reduce:function(e){return e.id},value:e.masterCategory.state,label:"name",options:e.masterCategoryStates},model:{value:e.masterCategory.state,callback:function(t){e.$set(e.masterCategory,"state",t)},expression:"masterCategory.state"}},[n("div",{attrs:{slot:"no-options"},slot:"no-options"},[e._v("Ничего не найдено")])]),e._v(" "),n("div",[n("vue-element-loading",{attrs:{active:e.isSaving,color:"#1C457D"}}),e._v(" "),n("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:e.save}},[e._v("Сохранить")]),e._v(" "),n("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:e.saveAndAddMore}},[e._v("Сохранить и добавить ещё")])],1),e._v(" "),e.savingError?n("div",{staticClass:"callout alert"},[n("h5",[e._v("Произошла ошибка при сохранении данных")]),e._v(" "),n("p",[e._v(e._s(e.savingError))])]):e._e()],1)],1)])],1)},staticRenderFns:[]};var Ve=n("VU/8")(He,Re,!1,function(e){n("kxPN")},null,null).exports,Ae={name:"EmployeesReport",components:{appMenu:h},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},Be={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("appMenu",{attrs:{"selected-element":"reports"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content grid-x"},[t("h1",{staticClass:"cell small-12"},[this._v("Отчёт по сотрудникам")])])}]};var Ue=n("VU/8")(Ae,Be,!1,function(e){n("v44N")},null,null).exports,qe={name:"ClientsReport",components:{appMenu:h},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},Ye={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("appMenu",{attrs:{"selected-element":"reports"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content grid-x"},[t("h1",{staticClass:"cell small-12"},[this._v("Отчёт по клиентам")]),this._v(" "),t("form",{staticClass:"cell small-6"})])}]};var ze=n("VU/8")(qe,Ye,!1,function(e){n("ALcT")},null,null).exports,Ze={name:"FinancialReport",components:{appMenu:h},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},Xe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("appMenu",{attrs:{"selected-element":"reports"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content grid-x"},[t("h1",{staticClass:"cell small-12"},[this._v("Финансовый отчёт")]),this._v(" "),t("form",{staticClass:"cell small-6"})])}]};var We=n("VU/8")(Ze,Xe,!1,function(e){n("WGrW")},null,null).exports,Ke={name:"NotFound",components:{appMenu:h},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},Qe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("main",[t("appMenu"),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"content"},[t("h1",[this._v("Страница не найдена")]),this._v(" "),t("p",[t("a",{attrs:{href:"/"}},[this._v("На главную")])])])}]};var Je=n("VU/8")(Ke,Qe,!1,function(e){n("lbBR")},null,null).exports;s.a.use(c.a);var et=new c.a({routes:[{path:"/",name:"Session",component:S,meta:{title:"Смена"}},{path:"/EditSession/:id?",name:"EditSession",component:I,meta:{title:"Смена"}},{path:"/SessionsHistory",name:"SessionsHistory",component:w,meta:{title:"История смен и операций"}},{path:"/EditService/:id?",name:"EditService",component:j,meta:{title:"Услуга"}},{path:"/EditGoodsSell/:id?",name:"EditGoodsSell",component:G,meta:{title:"Продажа товаров"}},{path:"/EditEmployeePayment/:id?",name:"EditEmployeePayment",component:V,meta:{title:"Выплата сотруднику"}},{path:"/EditExpense/:id?",name:"EditExpense",component:U,meta:{title:"Расход"}},{path:"/EditClient/:id?",name:"EditClient",component:z,meta:{title:"Клиент"}},{path:"/Clients",name:"Clients",component:W,meta:{title:"Клиенты"}},{path:"/UploadExpenses",name:"UploadExpenses",component:J,meta:{title:"Загрузка расходов"}},{path:"/Offices",name:"Offices",component:ne,meta:{title:"Отделения"}},{path:"/EditOffice/:id?",name:"EditOffice",component:ie,meta:{title:"Отделение"}},{path:"/ServiceTypes",name:"ServiceTypes",component:le,meta:{title:"Услуги"}},{path:"/EditServiceType/:id?",name:"EditServiceType",component:de,meta:{title:"Тип услуги"}},{path:"/GoodsTypes",name:"GoodsTypes",component:pe,meta:{title:"Товары"}},{path:"/EditGoodsType/:id?",name:"EditGoodsType",component:ge,meta:{title:"Товар"}},{path:"/ExpenseTypes",name:"ExpenseTypes",component:Ce,meta:{title:"Типы расходов"}},{path:"/EditExpenseType/:id?",name:"EditExpenseType",component:Se,meta:{title:"Тип расхода"}},{path:"/EmployeePaymentTypes",name:"EmployeePaymentTypes",component:$e,meta:{title:"Типы выплат сотруднику"}},{path:"/EditEmployeePaymentType/:id?",name:"EditEmployeePaymentType",component:Le,meta:{title:"Тип выплаты сотруднику"}},{path:"/Employees",name:"Employees",component:Me,meta:{title:"Сотрудники"}},{path:"/EditEmployee/:id?",name:"EditEmployee",component:je,meta:{title:"Сотрудник"}},{path:"/MasterTypes",name:"MasterTypes",component:Ge,meta:{title:"Категории мастеров"}},{path:"/EditMasterType/:id?",name:"EditMasterType",component:Ve,meta:{title:"Категория мастера"}},{path:"/EmployeesReport",name:"EmployeesReport",component:Ue,meta:{title:"Отчёт по сотрудникам"}},{path:"/ClientsReport",name:"ClientsReport",component:ze,meta:{title:"Отчёт по клиентам"}},{path:"/FinancialReport",name:"FinancialReport",component:We,meta:{title:"Финансовый отчёт"}},{path:"*",component:Je,meta:{title:"Страница не найдена"}}],scrollBehavior:function(e,t,n){return n||{x:0,y:0}}}),tt=n("gRE1"),nt=n.n(tt),st=n("NYxO"),ot=n("PJh5"),it=n.n(ot);s.a.use(st.a),s.a.config.devtools=!0;var at=new st.a.Store({state:{isStateLoading:!1,isStateLoaded:!1,stateLoadDetails:{serviceTypes:!1,goodsTypes:!1,employeePaymentTypes:!1,spendTypes:!1,offices:!1,employees:!1,clients:!1,masterCategories:!1},stateGetError:"",currentOfficeId:null,currentSessionGetError:"",isCurrentSessionLoading:!1,currentSession:{},refreshCurrentSession:null,operationTypes:[{id:"serviceoperation",name:"Услуга"},{id:"goodsoperation",name:"Продажа товара"},{id:"spendoperation",name:"Расход"},{id:"employeepayment",name:"Выплата сотруднику"}],officeStates:[{id:"open",name:"Работает"},{id:"closed",name:"Не работает"}],goodsStates:[{id:"active",name:"В продаже"},{id:"notactive",name:"Не продается"}],spendTypeStates:[{id:"active",name:"Используется"},{id:"notactive",name:"Не используется"}],employeePaymentTypeStates:[{id:"active",name:"Используется"},{id:"notactive",name:"Не используется"}],masterCategoryStates:[{id:"active",name:"Используется"},{id:"notactive",name:"Не используется"}],employeeStates:[{id:"working",name:"Работает"},{id:"notworking",name:"Не работает"}],userRoles:[{id:"officeAdmin",name:"Администратор офиса"},{id:"manager",name:"Управляющий"},{id:"master",name:"Мастер"},{id:"other",name:"Сотрудник"}],contactTypes:[{id:"phone",name:"Телефон"},{id:"whatsapp",name:"WhatsApp"},{id:"telegram",name:"Telegram"},{id:"viber",name:"Viber"},{id:"email",name:"Почта"},{id:"instagram",name:"Instagram"},{id:"vk",name:"ВКонтакте"},{id:"facebook",name:"Facebook"},{id:"other",name:"Другое"}],serviceTypes:[],goodsTypes:[],employeePaymentTypes:[],spendTypes:[],offices:[],employees:[],clients:[],masterCategories:[]},getters:{getServiceName:function(e){return function(t){var n=e.serviceTypes.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getEmployeeName:function(e){return function(t){var n=e.employees.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getItemName:function(e){return function(t){var n=e.goodsTypes.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getContactTypeName:function(e){return function(t){var n=e.contactTypes.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getSpendTypeName:function(e){return function(t){var n=e.spendTypes.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getEmployeePaymentTypeName:function(e){return function(t){var n=e.employeePaymentTypes.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getMasterCategoryName:function(e){return function(t){var n=e.masterCategories.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getClientDescription:function(e){return function(t){var n=t;if("number"==typeof n&&(n=e.clients.filter(function(e){return e.id===n})[0]),n){if(null===n.id)return"Новый клиент";var s=n.contacts.filter(function(e){return"phone"===e.type})[0];return s?n.name+" ("+s.value+")":n.name+" (телефон не указан)"}return"–"}},getDateTimeFromOperation:function(e){return function(e){var t="";return e.startDatetime?t=e.startDatetime:e.datetime&&(t=e.datetime),it()(t).format("DD.MM.YYYY HH:mm")}},getTimeFromOperation:function(e){return function(e){var t="";return e.startDatetime?t=e.startDatetime:e.datetime&&(t=e.datetime),it()(t).format("HH:mm")}},getEmployeeNameFromOperation:function(e,t){return function(e){return e.masterId?t.getEmployeeName(e.masterId):e.adminId?t.getEmployeeName(e.adminId):e.employeeId?t.getEmployeeName(e.employeeId):"–"}},getOperationContent:function(e,t){return function(e){if("serviceoperation"===e.type)return t.getServiceName(e.serviceId);if("goodsoperation"===e.type){var n=[];for(var s in e.goodsIds)n.push(t.getItemName(e.goodsIds[s]));return n.join("\n")}return"spendoperation"===e.type?t.getSpendTypeName(e.expenseTypeId):"employeepayment"===e.type?t.getEmployeePaymentTypeName(e.employeePaymentTypeId):"–"}},getOperationSum:function(e){return function(e){return"serviceoperation"===e.type?e.cashSum+e.cashlessSum-e.discountSum:"goodsoperation"===e.type?e.cashSum+e.cashlessSum-e.discountSum:"spendoperation"===e.type?e.sum:"employeepayment"===e.type?e.sum:"–"}},getOperationBonus:function(e){return function(e){return"serviceoperation"===e.type?e.masterBonusSum+e.adminBonusSum:"goodsoperation"===e.type?e.masterBonusSum+e.adminBonusSum:"–"}},getOperationLink:function(e){return function(e){return"serviceoperation"===e.type?"/EditService/"+e.id.toString():"goodsoperation"===e.type?"/EditGoodsSell/"+e.id.toString():"spendoperation"===e.type?"/EditExpense/"+e.id.toString():"employeepayment"===e.type?"/EditEmployeePayment/"+e.id.toString():void 0}},getOfficeName:function(e){return function(t){var n=e.offices.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getOfficeStateName:function(e){return function(t){var n=e.officeStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getGoodsStateName:function(e){return function(t){var n=e.goodsStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getSpendTypeStateName:function(e){return function(t){var n=e.spendTypeStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getEmployeePaymentStateName:function(e){return function(t){var n=e.employeePaymentTypeStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getMasterCategoryStateName:function(e){return function(t){var n=e.masterCategoryStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getEmployeeStateName:function(e){return function(t){var n=e.employeeStates.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getUserRoleName:function(e){return function(t){var n=e.userRoles.filter(function(e){return e.id===t})[0];return n?n.name:"–"}},getUserPicturePlaceholderText:function(e){return function(e){var t="";return e.split(" ").map(function(e){t+=e[0].toUpperCase()}),t}}},mutations:{updateStore:function(e,t){e[t.name]=t.value},updateStateLoadingDetails:function(e,t){e.stateLoadDetails[t.name]=t.value},updateIfExists:function(e,t){var n=t.data,s=t.key;n[s]&&(e[s]=n[s])}},actions:{getCurrentSession:function(e){e.state.currentOfficeId&&(e.commit("updateStore",{name:"isCurrentSessionLoading",value:!0}),T.post("GetCurrentSession/",{officeId:e.state.currentOfficeId,withOperations:!0}).then(function(t){var n=t.data;e.commit("updateStore",{name:"currentSession",value:n}),e.commit("updateStore",{name:"isCurrentSessionLoading",value:!1})}).catch(function(t){e.commit("updateStore",{name:"currentSessionGetError",value:t}),e.commit("updateStore",{name:"isCurrentSessionLoading",value:!1})}))},checkIfStateLoaded:function(e){var t=nt()(e.state.stateLoadDetails).every(function(e){return e});t!==e.state.isStateLoaded&&(e.commit("updateStore",{name:"isStateLoaded",value:t}),e.commit("updateStore",{name:"isStateLoading",value:!t}))},getState:function(e,t){e.state.isStateLoaded||(e.commit("updateStore",{name:"isStateLoading",value:!0}),e.commit("updateStore",{name:"isStateLoaded",value:!1})),T.post("GetServicesPrices/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"serviceTypes",value:n}),e.commit("updateStateLoadingDetails",{name:"serviceTypes",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetGoods/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"goodsTypes",value:n}),e.commit("updateStateLoadingDetails",{name:"goodsTypes",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetEmployeePaymentTypes/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"employeePaymentTypes",value:n}),e.commit("updateStateLoadingDetails",{name:"employeePaymentTypes",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetSpendTypes/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"spendTypes",value:n}),e.commit("updateStateLoadingDetails",{name:"spendTypes",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetOffices/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"offices",value:n}),e.commit("updateStateLoadingDetails",{name:"offices",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetEmployees/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"employees",value:n}),e.commit("updateStateLoadingDetails",{name:"employees",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetClients/",{q:""}).then(function(t){var n=t.data;e.commit("updateStore",{name:"clients",value:n}),e.commit("updateStateLoadingDetails",{name:"clients",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})}),T.post("GetBarberCategories/",{}).then(function(t){var n=t.data;e.commit("updateStore",{name:"masterCategories",value:n}),e.commit("updateStateLoadingDetails",{name:"masterCategories",value:!0}),e.dispatch("checkIfStateLoaded")}).catch(function(t){e.commit("updateStore",{name:"stateGetError",value:t})})}}});s.a.prototype.moment=it.a,s.a.config.productionTip=!1,new s.a({store:at,el:"#app",router:et,components:{App:l},template:"<App/>"})},O8QB:function(e,t){},SYys:function(e,t){},UU9T:function(e,t){},WGrW:function(e,t){},X7O4:function(e,t){},"ban/":function(e,t){},ecyf:function(e,t){},h4iA:function(e,t){},i3qE:function(e,t){},kxPN:function(e,t){},lMXO:function(e,t){},lbBR:function(e,t){},musY:function(e,t){},qjGC:function(e,t){},uslO:function(e,t,n){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function o(e){return n(i(e))}function i(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id="uslO"},v44N:function(e,t){},yID9:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2006ad4b9eb0c0b8933f.js.map