webpackJsonp([1],{Lacd:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},o=a("VU/8")({name:"App"},i,!1,null,null,null).exports,r=a("/ocq"),n=a("mtWM"),d=a.n(n).a.create({baseURL:"api/",auth:{username:"offeruser",password:'D_f$7u-SVX9v"h;j'}}),l={name:"KeywordsToRemove",data:function(){return{filename:""}},computed:{errors:{get:function(){return this.$store.state.keywordsToRemoveState.errors},set:function(t){var e=this.$store.state.keywordsToRemoveState;e.errors=t,this.$store.commit("updateStore",{name:"keywordsToRemoveState",value:e})}},isLoaded:{get:function(){return this.$store.state.keywordsToRemoveState.isLoaded},set:function(t){var e=this.$store.state.keywordsToRemoveState;e.isLoaded=t,this.$store.commit("updateStore",{name:"keywordsToRemoveState",value:e})}},isLoading:{get:function(){return this.$store.state.keywordsToRemoveState.isLoading},set:function(t){var e=this.$store.state.keywordsToRemoveState;e.isLoading=t,this.$store.commit("updateStore",{name:"keywordsToRemoveState",value:e})}},minKeywordRivals:{get:function(){return this.$store.state.minKeywordRivals},set:function(t){this.$store.commit("updateStore",{name:"minKeywordRivals",value:t})}},keywordsToRemove:{get:function(){return this.$store.state.keywordsToRemove}}},methods:{fetchKeywordsToRemove:function(){this.errors=[],this.isLoading=!0,this.$store.dispatch("getKeywordsToRemove")},exportToExcel:function(){var t=this;this.filename="",d.post("ExportToExcel/",{keywords:this.$store.state.keywordsWithData,regions:this.$store.state.regions,rivals:this.$store.state.rivals,offerid:this.$store.state.offerid,maxRivalsCount:this.$store.state.maxRivalsCount,sqiDiffCoef:this.$store.state.sqiDiffCoef,maxPos:this.$store.state.maxPos,minCountInSerm:this.$store.state.minCountInSerm,minKeywordRivals:this.$store.state.minKeywordRivals,keywordsToRemove:this.$store.state.keywordsToRemove}).then(function(e){t.filename=e.data}).catch(function(t){alert(t)})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Запросы для удаления")]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("label",[t._v("Минимальное количество конкурентов")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.minKeywordRivals,expression:"minKeywordRivals"}],attrs:{disabled:t.isLoading,type:"text",autocomplete:"on"},domProps:{value:t.minKeywordRivals},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.fetchKeywordsToRemove(e)},input:function(e){e.target.composing||(t.minKeywordRivals=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("button",{staticClass:"button primary",attrs:{disabled:t.isLoading,type:"button"},on:{click:t.fetchKeywordsToRemove}},[t._v("Получить запросы с количеством конкурентов меньше "+t._s(this.$store.state.minKeywordRivals)+" ")])]),t._v(" "),t.isLoading||t.isLoaded?a("div",{staticClass:"keywordsToRemove"},[t._l(t.errors,function(e){return t.isLoaded&&t.errors.length>0?a("div",{key:e,staticClass:"error-text"},[a("p",[t._v("Ошибка получения данных с сервера:")]),t._v(" "),a("p",[t._v(t._s(e))])]):t._e()}),t._v(" "),t.isLoading?a("p",[t._v("Загрузка..."),a("br"),t._v("Получение данных может занять несколько минут.")]):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("div",[t._l(t.keywordsToRemove,function(e){return a("div",{key:e.region,staticClass:"large-12 cell"},[a("label",[t._v(t._s(e.region))]),t._v(" "),a("textarea",{attrs:{rows:"10"},domProps:{value:e.keywordsToDelete.join("\n")}})])}),t._v(" "),0===t.keywordsToRemove.length?a("p",[t._v("Нет запросов для удаления.")]):t._e(),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.exportToExcel}},[t._v("Выгрузить в .xlsx")])]),t._v(" "),t.filename.length>0?a("iframe",{staticStyle:{display:"none"},attrs:{src:"download/"+t.filename}}):t._e()],2):t._e()],2):t._e()])},staticRenderFns:[]};var v={name:"SermModal",props:["keyword","regionName","searchEngine","rivalsCount","regionId","seName","isMobile","maxPos","startDate","rivals","regions","notRivals"],data:function(){return{data:[],errors:[],isLoaded:!1,isLoading:!1}},mounted:function(){var t=this;this.errors=[],this.isLoading=!0,d.post("GetSerm/",{keyword:this.keyword,regionId:this.regionId,searchEngine:this.searchEngine,isMobile:this.isMobile,maxPos:this.maxPos,startDate:this.startDate,rivals:this.rivals,regions:this.regions,notRivals:this.notRivals}).then(function(e){t.data=e.data,t.errors=[],t.isLoaded=!0,t.isLoading=!1}).catch(function(e){t.errors=[],t.errors.push(e),t.isLoaded=!0,t.isLoading=!1})},methods:{getIsRivalText:function(t){return t?"Нет":"Да"},hideModal:function(){this.$emit("hidemodal")},getTableClass:function(t){return{"dark-background":t}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reveal-overlay",staticStyle:{display:"block"}},[a("div",{staticClass:"reveal large",staticStyle:{display:"block"}},[a("h1",[t._v("Выдача по запросу")]),t._v(" "),a("p",[t._v("Запрос: "+t._s(t.keyword))]),t._v(" "),a("p",[t._v("Регион: "+t._s(t.regionName))]),t._v(" "),a("p",[t._v("ПС: "+t._s(t.seName))]),t._v(" "),a("p",[t._v("Кол-во конкурентов: "+t._s(t.rivalsCount))]),t._v(" "),t.isLoading?a("p",[t._v("Загрузка..."),a("br"),t._v("Получение данных может занять несколько минут.")]):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("div",[0===t.data.length?a("p",[t._v("Не найдено ни одного результата выдачи.")]):t._e(),t._v(" "),t.data.length>0?a("table",{staticClass:"unstriped"},[t._m(0),t._v(" "),a("tbody",t._l(t.data,function(e){return a("tr",{key:e.position+e.domain,class:t.getTableClass(e.isExcluded)},[a("td",[t._v(t._s(e.position))]),t._v(" "),a("td",[a("a",{attrs:{href:"http://"+e.domain,target:"_blank"}},[t._v(t._s(e.domain))])]),t._v(" "),a("td",[a("a",{attrs:{href:e.foundUrl,target:"_blank"}},[t._v(t._s(e.foundUrl))])]),t._v(" "),a("td",[t._v(t._s(t.getIsRivalText(e.isExcluded)))])])}))]):t._e()]):t._e(),t._v(" "),a("button",{staticClass:"close-button",attrs:{type:"button"},on:{click:t.hideModal}},[a("span",[t._v("×")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("Позиция")]),this._v(" "),e("th",[this._v("Домен")]),this._v(" "),e("th",[this._v("Страница в выдаче")]),this._v(" "),e("th",[this._v("Конкурент")])])}]};var c={name:"Keywords",components:{keywordsToRemove:a("VU/8")(l,u,!1,function(t){a("sV3R")},null,null).exports,sermModal:a("VU/8")(v,m,!1,function(t){a("tlis")},null,null).exports},data:function(){return{isModalShown:!1,modalData:{isModalShown:!1}}},computed:{errors:{get:function(){return this.$store.state.keywordsState.errors},set:function(t){var e=this.$store.state.keywordsState;e.errors=t,this.$store.commit("updateStore",{name:"keywordsState",value:e})}},isLoaded:{get:function(){return this.$store.state.keywordsState.isLoaded},set:function(t){var e=this.$store.state.keywordsState;e.isLoaded=t,this.$store.commit("updateStore",{name:"keywordsState",value:e})}},isLoading:{get:function(){return this.$store.state.keywordsState.isLoading},set:function(t){var e=this.$store.state.keywordsState;e.isLoading=t,this.$store.commit("updateStore",{name:"keywordsState",value:e})}},keywordsWithData:{get:function(){return this.$store.state.keywordsWithData}}},methods:{fetchKeywords:function(){this.errors=[],this.isLoading=!0,this.$store.dispatch("getKeywords")},getSearchEngineName:function(t){return 1===t?"Яндекс":2===t?"Google":"—"},showModal:function(t){this.modalData=t,this.modalData.maxPos=this.$store.state.maxPos,this.modalData.startDate=this.$store.state.startDate,this.modalData.rivals=this.$store.state.rivals,this.modalData.seName=this.getSearchEngineName(t.searchEngine),this.modalData.regions=this.$store.state.regions,this.modalData.notRivals=this.$store.state.notRivals,this.modalData.isModalShown=!0},hideModal:function(){this.modalData={isModalShown:!1}}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Запросы")]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("button",{staticClass:"button primary",attrs:{disabled:t.isLoading,type:"button"},on:{click:t.fetchKeywords}},[t._v("Получить данные по запросам")])]),t._v(" "),t.isLoading||t.isLoaded?a("div",{staticClass:"keywords"},[t._l(t.errors,function(e){return t.isLoaded&&t.errors.length>0?a("div",{key:e,staticClass:"error-text"},[a("p",[t._v("Ошибка получения данных с сервера:")]),t._v(" "),a("p",[t._v(t._s(e))])]):t._e()}),t._v(" "),t.isLoading?a("p",[t._v("Загрузка..."),a("br"),t._v("Получение данных может занять несколько минут.")]):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("div",[a("table",{staticClass:"unstriped"},[a("thead",[a("tr",[a("th",[t._v("Ключевое слово")]),t._v(" "),a("th",[t._v("Регион")]),t._v(" "),a("th",[t._v("ПС")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Кол-во конкурентов в топ "+t._s(t.maxPos))])])]),t._v(" "),a("tbody",t._l(t.keywordsWithData,function(e){return a("tr",{key:e.id+e.regionName+e.searchEngine},[a("td",[a("a",{on:{click:function(a){t.showModal(e)}}},[t._v(t._s(e.keyword))])]),t._v(" "),a("td",[t._v(t._s(e.regionName))]),t._v(" "),a("td",[t._v(t._s(t.getSearchEngineName(e.searchEngine)))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.rivalsCount))])])}))])]):t._e(),t._v(" "),t.modalData.isModalShown?a("sermModal",t._b({on:{hidemodal:t.hideModal}},"sermModal",t.modalData,!1)):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("keywordsToRemove"):t._e()],2):t._e()])},staticRenderFns:[]};var h={name:"Rivals",components:{keywords:a("VU/8")(c,f,!1,function(t){a("Spu9")},null,null).exports},data:function(){return{offerUrl:this.$route.params.offerid}},mounted:function(){if(this.$route.params.offerid){var t=this.$route.params.offerid;this.offerid=t,this.isLoading=!0,this.$store.dispatch("loadData",t)}},computed:{errors:{get:function(){return this.$store.state.rivalsState.errors},set:function(t){var e=this.$store.state.rivalsState;e.errors=t,this.$store.commit("updateStore",{name:"rivalsState",value:e})}},isValid:{get:function(){return this.$store.state.rivalsState.isValid},set:function(t){var e=this.$store.state.rivalsState;e.isValid=t,this.$store.commit("updateStore",{name:"rivalsState",value:e})}},isLoaded:{get:function(){return this.$store.state.rivalsState.isLoaded},set:function(t){var e=this.$store.state.rivalsState;e.isLoaded=t,this.$store.commit("updateStore",{name:"rivalsState",value:e})}},isLoading:{get:function(){return this.$store.state.rivalsState.isLoading},set:function(t){var e=this.$store.state.rivalsState;e.isLoading=t,this.$store.commit("updateStore",{name:"rivalsState",value:e})}},maxRivalsCount:{get:function(){return this.$store.state.maxRivalsCount},set:function(t){this.$store.commit("updateStore",{name:"maxRivalsCount",value:t})}},sqiDiffCoef:{get:function(){return this.$store.state.sqiDiffCoef},set:function(t){this.$store.commit("updateStore",{name:"sqiDiffCoef",value:t})}},maxPos:{get:function(){return this.$store.state.maxPos},set:function(t){this.$store.commit("updateStore",{name:"maxPos",value:t})}},minCountInSerm:{get:function(){return this.$store.state.minCountInSerm},set:function(t){this.$store.commit("updateStore",{name:"minCountInSerm",value:t})}},offerid:{get:function(){return this.$store.state.offerid},set:function(t){this.$store.commit("updateStore",{name:"offerid",value:t})}},rivals:{get:function(){return this.$store.state.rivals}}},watch:{offerUrl:function(){var t=this.offerUrl;t&&"http://"===t.slice(0,7)?t=t.slice(7,t.length).split("/")[3]:t&&t.includes("/")&&(t=t.split("/")[3]),this.offerid=t},$route:function(t,e){this.offerUrl=this.$route.params.offerid}},methods:{validateAndFetch:function(){this.errors=[],this.offerid.length>0?(this.isValid=!0,this.isLoading=!0,this.$router.replace("/"+this.offerid),this.$store.dispatch("getRivals")):(this.isValid=!1,this.isLoading=!1)},makeValid:function(){this.isValid=!0},setOfferUrl:function(t){this.offerUrl=t},updateRivalIsExcluded:function(t){t.isExcluded=!t.isExcluded,this.$store.commit("updateRival",t)},updateRivalOpenedSite:function(t){t.openedSite=!0,this.$store.commit("updateRival",t)},toggleAllisExcluded:function(t){var e=t.target.checked;this.$store.dispatch("toggleAllisExcluded",e)}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main grid-container"},[a("h1",[t._v("Фильтрация запросов по количеству конкурентов")]),t._v(" "),a("form",{staticClass:"rivals-form"},[a("div",{staticClass:"large-12 cell"},[a("label",[t._v("\n              ID КП или ссылка\n              "),a("br"),t._v(" "),a("small",[t._v("Например, "),a("a",{on:{click:function(e){t.setOfferUrl("http://client.ingate.ru/Offers/offer/5d56807f7e76808f64a3b555/keywords")}}},[t._v("\n                  http://client.ingate.ru/Offers/offer/5d56807f7e76808f64a3b555/keywords\n              ")])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.offerUrl,expression:"offerUrl"}],attrs:{disabled:t.isLoading,type:"text",autofocus:"autofocus",autocomplete:"on"},domProps:{value:t.offerUrl},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.validateAndFetch(e)},input:function(e){e.target.composing||(t.offerUrl=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("label",[t._v("Не считать конкурентом, если встречается в выдаче реже этого числа раз")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.minCountInSerm,expression:"minCountInSerm"}],attrs:{disabled:t.isLoading,type:"text",autocomplete:"on"},domProps:{value:t.minCountInSerm},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.validateAndFetch(e)},input:function(e){e.target.composing||(t.minCountInSerm=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("label",[t._v("Максимальное количество конкурентов")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxRivalsCount,expression:"maxRivalsCount"}],attrs:{disabled:t.isLoading,type:"text",autocomplete:"on"},domProps:{value:t.maxRivalsCount},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.validateAndFetch(e)},input:function(e){e.target.composing||(t.maxRivalsCount=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("label",[t._v("Максимальное отклонение Яндекс ИКС конкурентов (количество раз)")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sqiDiffCoef,expression:"sqiDiffCoef"}],attrs:{disabled:t.isLoading,type:"text",autocomplete:"on"},domProps:{value:t.sqiDiffCoef},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.validateAndFetch(e)},input:function(e){e.target.composing||(t.sqiDiffCoef=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("label",[t._v("Максимальная позиция для поиска конкурентов")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.maxPos,expression:"maxPos"}],attrs:{disabled:t.isLoading,type:"text",autocomplete:"on"},domProps:{value:t.maxPos},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.validateAndFetch(e)},input:function(e){e.target.composing||(t.maxPos=e.target.value)}}})]),t._v(" "),t.isValid?t._e():a("div",{staticClass:"callout alert"},[t._v("\n        Необходимо указать ID или ссылку на КП\n        "),a("button",{staticClass:"close-button",attrs:{href:"#"},on:{click:t.makeValid}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"large-12 cell"},[a("button",{staticClass:"button primary",attrs:{disabled:t.isLoading,type:"button"},on:{click:t.validateAndFetch}},[t._v("Получить данные по конкурентам")])])]),t._v(" "),t.isLoading||t.isLoaded?a("div",{staticClass:"rivals"},[a("h2",[t._v("Конкуренты")]),t._v(" "),t._l(t.errors,function(e){return t.isLoaded&&t.errors.length>0?a("div",{key:e,staticClass:"error-text"},[a("p",[t._v("Ошибка получения данных с сервера:")]),t._v(" "),a("p",[t._v(t._s(e))])]):t._e()}),t._v(" "),t.isLoading?a("p",[t._v("Загрузка..."),a("br"),t._v("Получение данных может занять несколько минут.")]):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("div",[t._l(t.rivals,function(e){return a("div",{key:e.domain},[e.isOfferDomain?a("div",[a("p",[t._v("Домен КП: "),a("a",{attrs:{href:"http://"+e.domain,target:"_blank"},on:{click:function(a){t.updateRivalOpenedSite(e)}}},[t._v(t._s(e.domain))])]),t._v(" "),a("p",[t._v("Встречается в топ "+t._s(t.maxPos)+": "+t._s(e.countInSerm))]),t._v(" "),a("p",[t._v("Яндекс ИКС: "+t._s(e.sqi[0]))]),t._v(" "),a("p",[t._v("Данные только по десктопной выдаче.")])]):t._e()])}),t._v(" "),a("table",{staticClass:"unstriped"},[a("thead",[a("tr",[a("th",[t._v("Сайт")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Не конкурент "),a("input",{attrs:{type:"checkbox",id:"toggle-all"},on:{input:t.toggleAllisExcluded}})]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Встречается в топ "+t._s(t.maxPos))]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Яндекс ИКС")]),t._v(" "),a("th",{staticClass:"text-right"},[t._v("Отклонение ИКС от сайта КП")])])]),t._v(" "),a("tbody",t._l(t.rivals,function(e){return e.isOfferDomain?t._e():a("tr",{key:e.title+e.domain},[a("td",[a("a",{attrs:{href:"http://"+e.domain,target:"_blank"},on:{click:function(a){t.updateRivalOpenedSite(e)}}},[a("img",{attrs:{width:"16",height:"16",src:e.icon}}),t._v(" "+t._s(e.domain))]),t._v(" "),a("br"),t._v("\n                      "+t._s(e.title)+"\n                      "),a("br"),t._v(" "),a("small",[t._v(t._s(e.description))])]),t._v(" "),a("td",{staticClass:"text-right checkbox-td"},[a("label",{staticClass:"checkbox-padding"},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e.isExcluded},on:{change:function(a){t.updateRivalIsExcluded(e)}}})])]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.countInSerm))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.sqi[0]))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.sqiDiff.toFixed(2)))])])}))])],2):t._e()],2):t._e(),t._v(" "),t.isLoaded&&!t.isLoading?a("keywords"):t._e()],1)},staticRenderFns:[]};var p=a("VU/8")(h,_,!1,function(t){a("Lacd")},null,null).exports;s.a.use(r.a);var g=new r.a({routes:[{path:"/:offerid?",name:"Rivals",component:p}]}),y=a("NYxO");s.a.use(y.a),s.a.config.devtools=!0;var k=new y.a.Store({state:{offerid:"",maxRivalsCount:1e5,sqiDiffCoef:100,maxPos:10,minCountInSerm:6,rivals:[],startDate:"",keywordsStr:"",regionsStr:"",notRivals:[],keywords:[],regions:[],keywordsWithData:[],minKeywordRivals:2,keywordsToRemove:{},rivalsState:{errors:[],isValid:!0,isLoaded:!1,isLoading:!1},keywordsState:{errors:[],isLoaded:!1,isLoading:!1},keywordsToRemoveState:{errors:[],isLoaded:!1,isLoading:!1}},mutations:{updateStore:function(t,e){t[e.name]=e.value},updateIfExists:function(t,e){var a=e.data,s=e.key;a[s]&&(t[s]=a[s])},updateRival:function(t,e){var a=t.rivals,i=0;for(var o in a)if(a[o].domain===e.domain){i=o;break}s.a.set(a,i,e)}},actions:{loadData:function(t,e){return d.post("LoadData/",{offerid:e}).then(function(e){var a=e.data;t.commit("updateIfExists",{data:a,key:"rivals"}),t.commit("updateIfExists",{data:a,key:"keywords"}),t.commit("updateIfExists",{data:a,key:"startDate"}),t.commit("updateIfExists",{data:a,key:"keywordsStr"}),t.commit("updateIfExists",{data:a,key:"regionsStr"}),t.commit("updateIfExists",{data:a,key:"regions"}),t.commit("updateIfExists",{data:a,key:"offerid"}),t.commit("updateIfExists",{data:a,key:"keywordsWithData"}),t.commit("updateIfExists",{data:a,key:"keywordsToRemove"}),t.commit("updateIfExists",{data:a,key:"minKeywordRivals"}),t.commit("updateIfExists",{data:a,key:"notRivals"}),t.commit("updateIfExists",{data:a,key:"maxRivalsCount"}),t.commit("updateIfExists",{data:a,key:"sqiDiffCoef"}),t.commit("updateIfExists",{data:a,key:"maxPos"}),t.commit("updateIfExists",{data:a,key:"minCountInSerm"}),t.commit("updateStore",{name:"rivalsState",value:{errors:[],isLoaded:!0,isLoading:!1,isValid:!0}}),t.commit("updateStore",{name:"keywordsState",value:{errors:[],isLoaded:!0,isLoading:!1}}),t.commit("updateStore",{name:"keywordsToRemoveState",value:{errors:[],isLoaded:!0,isLoading:!1}})}).catch(function(e){t.commit("updateStore",{name:"rivalsState",value:{errors:[e],isLoaded:!0,isLoading:!1,isValid:!0}})}),!0},getRivals:function(t){t.commit("updateStore",{name:"keywordsState",value:{errors:[],isLoaded:!1,isLoading:!1}}),t.commit("updateStore",{name:"keywordsToRemoveState",value:{errors:[],isLoaded:!1,isLoading:!1}}),d.post("GetRivals/",{offerid:t.state.offerid,maxRivalsCount:t.state.maxRivalsCount,sqiDiffCoef:t.state.sqiDiffCoef,maxPos:t.state.maxPos,minCountInSerm:t.state.minCountInSerm}).then(function(e){var a=e.data;for(var s in t.commit("updateStore",{name:"rivals",value:a.rivals}),t.commit("updateStore",{name:"keywords",value:a.keywords}),t.commit("updateStore",{name:"startDate",value:a.startDate}),t.commit("updateStore",{name:"keywordsStr",value:a.keywordsStr}),t.commit("updateStore",{name:"regionsStr",value:a.regionsStr}),t.commit("updateStore",{name:"regions",value:a.regions}),t.commit("updateStore",{name:"offerid",value:a.offerid}),t.commit("updateStore",{name:"rivalsState",value:{errors:[],isLoaded:!0,isLoading:!1,isValid:!0}}),a.rivals){var i=a.rivals[s].domain;d.post("GetDomainInfo/",{domain:i}).then(function(e){var i=e.data,o=i.domain,r=a.rivals;for(s in r){var n=r[s];n.domain===o&&(n.title=i.title,n.description=i.description,n.icon=i.icon,t.commit("updateRival",n))}})}}).catch(function(e){t.commit("updateStore",{name:"rivalsState",value:{errors:[e],isLoaded:!0,isLoading:!1,isValid:!0}})})},getKeywords:function(t){t.commit("updateStore",{name:"keywordsToRemoveState",value:{errors:[],isLoaded:!1,isLoading:!1}}),d.post("GetKeywordsRivals/",{keywords:t.state.keywords,rivals:t.state.rivals,maxPos:t.state.maxPos,startDate:t.state.startDate,keywordsStr:t.state.keywordsStr,regionsStr:t.state.regionsStr,regions:t.state.regions,minCountInSerm:t.state.minCountInSerm,offerid:t.state.offerid}).then(function(e){t.commit("updateStore",{name:"keywordsWithData",value:e.data.keywords}),t.commit("updateStore",{name:"notRivals",value:e.data.notRivals}),t.commit("updateStore",{name:"keywordsState",value:{errors:[],isLoaded:!0,isLoading:!1}})}).catch(function(e){t.commit("updateStore",{name:"keywordsState",value:{errors:[e],isLoaded:!0,isLoading:!1}})})},getKeywordsToRemove:function(t){d.post("GetKeywordsToRemove/",{keywords:t.state.keywordsWithData,regions:t.state.regions,minKeywordRivals:t.state.minKeywordRivals,offerid:t.state.offerid}).then(function(e){var a=e.data;"string"==typeof e.data&&(a=JSON.parse(e.data)),t.commit("updateStore",{name:"keywordsToRemove",value:a}),t.commit("updateStore",{name:"keywordsToRemoveState",value:{errors:[],isLoaded:!0,isLoading:!1}})}).catch(function(e){t.commit("updateStore",{name:"keywordsToRemoveState",value:{errors:[e],isLoaded:!0,isLoading:!1}})})},toggleAllisExcluded:function(t,e){var a=t.state.rivals;for(var s in a)a[s].isExcluded=e;t.commit("updateStore",{name:"rivals",value:a})}}});s.a.config.productionTip=!1,new s.a({store:k,el:"#app",router:g,components:{App:o},template:"<App/>"})},Spu9:function(t,e){},sV3R:function(t,e){},tlis:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.db5bc6a8a6e652c15b84.js.map