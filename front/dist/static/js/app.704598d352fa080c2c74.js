webpackJsonp([1],{"/6eh":function(t,e){},"0XER":function(t,e){},"1nGp":function(t,e){},"356v":function(t,e){},"4BPl":function(t,e){},"4d3J":function(t,e){},"7W36":function(t,e){},AeFz:function(t,e){},DozP:function(t,e){},FZO8:function(t,e){},LbxH:function(t,e){},MHY7:function(t,e){},Mrzp:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),i=s("eFvv"),a=s.n(i),o={name:"App",components:{VueElementLoading:a.a},watch:{$route:function(t,e){document.title=t.meta.title}},computed:{isStateLoading:function(){return this.$store.state.isStateLoading}},created:function(){this.$store.dispatch("getState")}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("vue-element-loading",{attrs:{active:this.isStateLoading,"is-full-screen":!0,color:"#1C457D"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]},l=s("VU/8")(o,r,!1,null,null,null).exports,c=s("/ocq"),u=s("fZjL"),d=s.n(u),m=s("mtWM"),v=s.n(m),p={name:"Menu",props:["selectedElement"],data:function(){return{adminSubmenuShown:!1,reportsSubmenuShown:!1,isOverAdmin:!1,isOverReports:!1,isOverNoSubmenuEl:!1,isOverMenu:!1}},methods:{openMenu:function(t){var e=this;"admin"===t&&(this.isOverAdmin=!0,setTimeout(function(){e.isOverAdmin&&!e.isOverNoSubmenuEl&&e.isOverMenu&&(e.adminSubmenuShown=!0,e.reportsSubmenuShown=!1)},100)),"reports"===t&&(this.isOverReports=!0,setTimeout(function(){e.isOverReports&&!e.isOverNoSubmenuEl&&e.isOverMenu&&(e.adminSubmenuShown=!1,e.reportsSubmenuShown=!0)},100))},closeMenus:function(t){(this.isOverNoSubmenuEl||!this.isOverMenu||t)&&(this.reportsSubmenuShown=!1,this.adminSubmenuShown=!1)},leaveMenu:function(){this.isOverMenu=!1,setTimeout(this.closeMenus,300)},enterNoSubmenuEl:function(){this.isOverNoSubmenuEl=!0,setTimeout(this.closeMenus,300)},logout:function(){v.a.post("/logout").then(function(t){window.location.href="/login"})}},computed:{navClass:function(){var t="main-menu";return(this.adminSubmenuShown||this.reportsSubmenuShown)&&(t+=" submenu-shown"),t},adminClass:function(){var t="with-submenu";return"admin"===this.selectedElement&&(t+=" selected"),this.adminSubmenuShown&&(t+=" hovered"),t},reportsClass:function(){var t="with-submenu";return"reports"===this.selectedElement&&(t+=" selected"),this.reportsSubmenuShown&&(t+=" hovered"),t}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{class:t.navClass,on:{"&mouseleave":function(e){t.leaveMenu()},"&mouseover":function(e){t.isOverMenu=!0}}},[s("ul",{staticClass:"cell auto",class:t.adminSubmenuShown?"submenu shown":"submenu hidden"},[s("li",{staticClass:"close-item",on:{click:function(e){t.closeMenus(!0)}}},[s("button",{staticClass:"close-button",attrs:{type:"button"}},[t._v("√ó")])]),t._v(" "),s("li",[s("router-link",{attrs:{to:"/UploadExpenses"}},[t._v("–í–Ω–µ—Å—Ç–∏ —Ä–∞—Å—Ö–æ–¥—ã")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/Offices"}},[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/ServiceTypes"}},[t._v("–£—Å–ª—É–≥–∏")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/GoodsTypes"}},[t._v("–¢–æ–≤–∞—Ä—ã")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/ExpenseTypes"}},[t._v("–¢–∏–ø—ã —Ä–∞—Å—Ö–æ–¥–æ–≤")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/EmployeePaymentTypes"}},[t._v("–¢–∏–ø—ã –≤—ã–ø–ª–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/Employees"}},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/MasterTypes"}},[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤")])],1)]),t._v(" "),s("ul",{class:t.reportsSubmenuShown?"submenu shown":"submenu hidden"},[s("li",{staticClass:"close-item",on:{click:function(e){t.closeMenus(!0)}}},[s("button",{staticClass:"close-button",attrs:{type:"button"}},[t._v("√ó")])]),t._v(" "),s("li",[s("router-link",{attrs:{to:"/EmployeesReport"}},[t._v("–û—Ç—á—ë—Ç –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/ClientsReport"}},[t._v("–û—Ç—á—ë—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/FinancialReport"}},[t._v("–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç")])],1)]),t._v(" "),s("ul",[s("li",{class:"session"===t.selectedElement?"selected":"",on:{"&mouseenter":function(e){t.enterNoSubmenuEl()},"&mouseleave":function(e){t.isOverNoSubmenuEl=!1}}},[s("router-link",{attrs:{to:"/"}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40ZM20 36.5217C29.1247 36.5217 36.5217 29.1247 36.5217 20C36.5217 10.8753 29.1247 3.47826 20 3.47826C10.8753 3.47826 3.47826 10.8753 3.47826 20C3.47826 29.1247 10.8753 36.5217 20 36.5217Z",fill:"session"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M22.8986 20C22.8986 21.6008 21.6008 22.8986 20 22.8986C18.3992 22.8986 17.1014 21.6008 17.1014 20C17.1014 18.3992 18.3992 17.1014 20 17.1014C21.6008 17.1014 22.8986 18.3992 22.8986 20Z",fill:"session"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M20.8387 18.226C21.5283 18.8945 21.5455 19.9955 20.877 20.6852C20.2085 21.3749 19.1075 21.3921 18.4178 20.7236L13.4227 15.8819C12.733 15.2134 12.7158 14.1124 13.3843 13.4227C14.0528 12.733 15.1539 12.7158 15.8435 13.3843L20.8387 18.226Z",fill:"session"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M30.0853 12.4165C30.6349 12.088 31.3468 12.2673 31.6753 12.8169C32.0038 13.3666 31.8245 14.0784 31.2749 14.4069L20.8252 20.6525C20.2755 20.981 19.5636 20.8017 19.2351 20.2521C18.9066 19.7025 19.0859 18.9906 19.6355 18.6621L30.0853 12.4165Z",fill:"session"===t.selectedElement?"#FDFCFC":"#38342E"}})]),t._v(" "),s("label",[t._v("–°–º–µ–Ω–∞")])])],1),t._v(" "),s("li",{class:"clients"===t.selectedElement?"selected":"",on:{"&mouseenter":function(e){t.enterNoSubmenuEl()},"&mouseleave":function(e){t.isOverNoSubmenuEl=!1}}},[s("router-link",{attrs:{to:"/Clients"}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 34 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.6527 19.9163C22.1525 19.9163 26.6109 15.4579 26.6109 9.95816C26.6109 4.45842 22.1525 0 16.6527 0C11.153 0 6.69456 4.45842 6.69456 9.95816C6.69456 15.4579 11.153 19.9163 16.6527 19.9163ZM16.6527 16.9038C20.4887 16.9038 23.5983 13.7941 23.5983 9.95816C23.5983 6.12221 20.4887 3.01255 16.6527 3.01255C12.8168 3.01255 9.70711 6.12221 9.70711 9.95816C9.70711 13.7941 12.8168 16.9038 16.6527 16.9038Z",fill:"clients"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.48354 22.4455C3.95261 23.9909 3.01255 26.1093 3.01255 28.4519C3.01255 33.1659 6.83405 36.9874 11.5481 36.9874H21.9247C26.6387 36.9874 30.4602 33.1659 30.4602 28.4519C30.4602 26.069 29.4874 23.9175 27.9092 22.3657C27.8771 22.3775 27.8405 22.3926 27.7999 22.412C27.6784 22.47 27.5482 22.5532 27.4258 22.657C24.5233 25.1214 20.7581 26.6109 16.6527 26.6109C12.5906 26.6109 8.86116 25.1526 5.97115 22.7342C5.84761 22.6308 5.7161 22.5482 5.59338 22.4909C5.5526 22.4719 5.51585 22.457 5.48354 22.4455ZM3.61116 20.0635C4.80923 18.9296 6.63933 19.3652 7.90445 20.4239C10.2726 22.4055 13.3233 23.5983 16.6527 23.5983C20.0174 23.5983 23.0975 22.3801 25.4761 20.3606C26.7281 19.2975 28.5447 18.8476 29.7521 19.9612C32.0398 22.0713 33.4728 25.0942 33.4728 28.4519C33.4728 34.8297 28.3025 40 21.9247 40H11.5481C5.17027 40 0 34.8297 0 28.4519C0 25.1481 1.38732 22.1684 3.61116 20.0635Z",fill:"clients"===t.selectedElement?"#FDFCFC":"#38342E"}})]),t._v(" "),s("label",[t._v("–ö–ª–∏–µ–Ω—Ç—ã")])])],1),t._v(" "),s("li",{class:"history"===t.selectedElement?"selected":"",on:{"&mouseenter":function(e){t.enterNoSubmenuEl()},"&mouseleave":function(e){t.isOverNoSubmenuEl=!1}}},[s("router-link",{attrs:{to:"/SessionsHistory"}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 40 38",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M21.2034 33.7265C29.4489 33.7265 36.1333 27.0422 36.1333 18.7966C36.1333 10.5511 29.4489 3.86675 21.2034 3.86675C12.9578 3.86675 6.27348 10.5511 6.27348 18.7966C6.27348 19.7609 6.36488 20.7038 6.53951 21.6171C4.39123 21.6171 2.47413 20.0852 2.47329 17.9369C2.47205 14.7476 3.34525 11.7897 5.17282 8.86298C7.68288 4.84332 11.6154 1.917 16.1866 0.66717C20.7578 -0.582655 25.6321 -0.0642086 29.8382 2.11919C34.0442 4.3026 37.2731 7.99063 38.8815 12.4483C40.4899 16.9061 40.3596 21.8061 38.5166 26.1721C36.6736 30.538 33.2533 34.0493 28.9371 36.0061C24.621 37.9629 19.726 38.2216 15.2277 36.7306C15.2277 36.7306 13.6015 36.0441 14.1091 34.5212C14.6168 32.9982 21.2034 33.7265 21.2034 33.7265Z",fill:"history"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M6.09435 16.0347C6.52977 15.2054 7.55502 14.8862 8.38429 15.3216C9.21357 15.757 9.53285 16.7823 9.09743 17.6115L6.29421 22.9503C5.85878 23.7796 4.83354 24.0989 4.00426 23.6635C3.17499 23.228 2.85571 22.2028 3.29113 21.3735L6.09435 16.0347Z",fill:"history"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M0.217815 17.7556C-0.241102 16.9391 0.0487836 15.9051 0.865294 15.4462C1.6818 14.9873 2.71574 15.2772 3.17466 16.0937L6.12913 21.3503C6.58804 22.1668 6.29816 23.2008 5.48165 23.6597C4.66514 24.1186 3.6312 23.8287 3.17228 23.0122L0.217815 17.7556Z",fill:"history"===t.selectedElement?"#FDFCFC":"#38342E"}})]),t._v(" "),s("label",[t._v("–ò—Å—Ç–æ—Ä–∏—è")])])],1),t._v(" "),s("li",{class:t.reportsClass,on:{"&mouseenter":function(e){t.openMenu("reports")},"&mouseleave":function(e){t.isOverReports=!1}}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 30 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M7.584 11.5C7.584 10.6716 8.25557 10 9.084 10H20.9723C21.8008 10 22.4723 10.6716 22.4723 11.5C22.4723 12.3284 21.8008 13 20.9723 13H9.084C8.25557 13 7.584 12.3284 7.584 11.5Z",fill:"reports"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M9.084 16C8.25557 16 7.584 16.6716 7.584 17.5C7.584 18.3284 8.25557 19 9.084 19H20.9723C21.8008 19 22.4723 18.3284 22.4723 17.5C22.4723 16.6716 21.8008 16 20.9723 16H9.084Z",fill:"reports"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M7.584 23.5C7.584 22.6716 8.25557 22 9.084 22H20.9723C21.8008 22 22.4723 22.6716 22.4723 23.5C22.4723 24.3284 21.8008 25 20.9723 25H9.084C8.25557 25 7.584 24.3284 7.584 23.5Z",fill:"reports"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{d:"M9.084 28C8.25557 28 7.584 28.6716 7.584 29.5C7.584 30.3284 8.25557 31 9.084 31H20.9723C21.8008 31 22.4723 30.3284 22.4723 29.5C22.4723 28.6716 21.8008 28 20.9723 28H9.084Z",fill:"reports"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.95533 0C2.66629 0 0 2.75517 0 6.15385V33.8462C0 37.2448 2.66629 40 5.95533 40H23.8213C27.1104 40 30 37.9554 30 34.5567V6C30 2.60132 27.1104 0 23.8213 0H5.95533ZM23.7097 3H5.56452C4.33113 3 2.90323 4.7255 2.90323 6V34.5567C2.90323 35.8312 4.08919 37 5.32258 37H23.7097C24.9431 37 27.0968 35.7745 27.0968 34.5V6C27.0968 4.7255 24.9431 3 23.7097 3Z",fill:"reports"===t.selectedElement?"#FDFCFC":"#38342E"}})]),t._v(" "),s("label",[t._v("–û—Ç—á—ë—Ç—ã")])]),t._v(" "),s("li",{class:t.adminClass,on:{"&mouseenter":function(e){t.openMenu("admin")},"&mouseleave":function(e){t.isOverAdmin=!1}}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 39 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8605 0.000916544C15.8252 -4.58791e-05 15.7899 -0.000250263 15.7546 0.000303043C15.7028 -0.000509942 15.6509 0.000312842 15.599 0.0027714C15.5226 0.00639501 15.4466 0.0153202 15.3715 0.0294827C14.9113 0.116205 14.4865 0.331734 14.1452 0.649237C13.808 0.962833 13.566 1.36303 13.4433 1.80377L12.2876 5.81626C11.6168 6.15169 10.9829 6.53386 10.382 6.95065L6.39835 5.94375C5.87186 5.80563 5.31501 5.8455 4.81378 6.05663C4.30859 6.26942 3.89051 6.64312 3.62141 7.11632C3.62102 7.117 3.62063 7.11769 3.62025 7.11837L0.322345 12.9012C0.319141 12.9069 0.31597 12.9125 0.312832 12.9182C0.0539981 13.3847 -0.0478188 13.9216 0.0208605 14.4493C0.089535 14.977 0.325533 15.4709 0.697179 15.8562L3.52658 18.7822C3.48641 19.1623 3.45669 19.5711 3.45669 20.0005C3.45669 20.4298 3.48641 20.8386 3.52658 21.2186L0.697121 24.1448C0.325547 24.53 0.0895705 25.0239 0.0208941 25.5515C-0.0477771 26.0792 0.0539731 26.616 0.312774 27.0826C0.315931 27.0883 0.319121 27.0939 0.322345 27.0996L3.62017 32.8823C3.62045 32.8828 3.62074 32.8833 3.62102 32.8838C3.89006 33.3573 4.30823 33.7313 4.81364 33.9442C5.31509 34.1555 5.87199 34.1952 6.39831 34.0571L10.382 33.0502C10.9829 33.467 11.6168 33.8492 12.2876 34.1846L13.4467 38.2089C13.5963 38.725 13.9094 39.1809 14.3419 39.5054C14.7725 39.8283 15.2974 40.0028 15.8377 40H22.4255C22.9659 40.0028 23.4907 39.8283 23.9213 39.5054C24.3539 39.1809 24.6669 38.725 24.8165 38.2089L25.9756 34.1846C26.6465 33.8492 27.2803 33.467 27.8812 33.0502L31.8649 34.0572C32.3913 34.1952 32.9481 34.1555 33.4496 33.9442C33.9551 33.7312 34.3734 33.3571 34.6424 32.8835C34.6426 32.8831 34.6428 32.8827 34.6431 32.8823L37.9409 27.0996C37.9441 27.0939 37.9473 27.0883 37.9505 27.0826C38.2093 26.616 38.311 26.0792 38.2423 25.5515C38.1737 25.0239 37.9377 24.53 37.5661 24.1448L34.7367 21.2186C34.7768 20.8386 34.8065 20.4298 34.8065 20.0005C34.8065 19.5711 34.7768 19.1623 34.7366 18.7822L37.566 15.8562C37.9377 15.4709 38.1737 14.977 38.2424 14.4493C38.3111 13.9215 38.2092 13.3847 37.9504 12.9182C37.9473 12.9125 37.9441 12.9069 37.9409 12.9012L34.643 7.11837C34.6428 7.11801 34.6426 7.11766 34.6424 7.11731C34.3733 6.64367 33.955 6.26958 33.4495 6.05663C32.9482 5.8455 32.3914 5.80563 31.8649 5.94374L27.8813 6.95065C27.2803 6.53386 26.6464 6.15169 25.9756 5.81626L24.8165 1.79192C24.6669 1.27594 24.3539 0.820015 23.9212 0.495482C23.4909 0.172663 22.9661 -0.00192348 22.4258 0.000916544H15.8605ZM16.4483 3.30367H21.8149L23.0098 7.45221C23.1466 7.92701 23.4888 8.31563 23.9424 8.51138C24.859 8.90686 25.7162 9.42972 26.5329 10.0536C26.9334 10.3595 27.4516 10.4659 27.9401 10.3424L32.0824 9.29538L34.7659 14.0008L31.8134 17.0542C31.4617 17.4178 31.2962 17.9225 31.3641 18.4237C31.4436 19.0111 31.5038 19.4979 31.5038 20.0005C31.5038 20.503 31.4436 20.9897 31.3641 21.577C31.2962 22.0783 31.4617 22.583 31.8133 22.9466L34.7658 26.0001L32.0824 30.7055L27.9401 29.6585C27.4516 29.535 26.9334 29.6413 26.533 29.9472C25.7162 30.5711 24.8589 31.0941 23.9425 31.4895C23.4888 31.6852 23.1466 32.0739 23.0098 32.5487L21.8149 36.6972H16.4483L15.2534 32.5487C15.1166 32.0739 14.7744 31.6852 14.3207 31.4895C13.4043 31.0941 12.5471 30.5711 11.7302 29.9472C11.3298 29.6413 10.8116 29.535 10.3231 29.6585L6.18083 30.7055L3.49738 26.0001L6.44989 22.9466C6.8015 22.583 6.96706 22.0783 6.89916 21.577C6.8196 20.9897 6.75944 20.503 6.75944 20.0005C6.75944 19.4979 6.81961 19.0111 6.89916 18.4238C6.96706 17.9225 6.80149 17.4178 6.44988 17.0542L3.49737 14.0008L6.1808 9.29538L10.3231 10.3424C10.8117 10.4659 11.3299 10.3595 11.7303 10.0536C12.547 9.42972 13.4043 8.90686 14.3208 8.51138C14.7745 8.31563 15.1167 7.92701 15.2534 7.45221L16.4483 3.30367Z",fill:"admin"===t.selectedElement?"#FDFCFC":"#38342E"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.0826 23.3027C20.9066 23.3027 22.3853 21.8241 22.3853 20C22.3853 18.1759 20.9066 16.6972 19.0826 16.6972C17.2585 16.6972 15.7798 18.1759 15.7798 20C15.7798 21.8241 17.2585 23.3027 19.0826 23.3027ZM19.0826 26.6055C22.7307 26.6055 25.6881 23.6481 25.6881 20C25.6881 16.3519 22.7307 13.3945 19.0826 13.3945C15.4345 13.3945 12.4771 16.3519 12.4771 20C12.4771 23.6481 15.4345 26.6055 19.0826 26.6055Z",fill:"admin"===t.selectedElement?"#FDFCFC":"#38342E"}})]),t._v(" "),s("label",[t._v("–ê–¥–º–∏–Ω–∫–∞")])]),t._v(" "),s("li",{staticClass:"with-submenu logout show-for-large",on:{click:t.logout}},[s("svg",{staticClass:"main-menu-icon",attrs:{viewBox:"0 0 35 41",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.6499 15.5398C28.3715 14.8104 29.5415 14.8104 30.2631 15.5398L33.9588 19.2751C34.6804 20.0045 34.6804 21.1871 33.9588 21.9164L30.2631 25.6518C29.5415 26.3812 28.3715 26.3812 27.6499 25.6518C26.9283 24.9224 26.9283 23.7399 27.6499 23.0105L30.039 20.5958L27.6499 18.1811C26.9283 17.4517 26.9283 16.2691 27.6499 15.5398Z",fill:"#38342E"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6522 20.5958C15.6522 19.5643 16.4795 18.7281 17.5 18.7281H30.8043C31.8249 18.7281 32.6522 19.5643 32.6522 20.5958C32.6522 21.6273 31.8249 22.4635 30.8043 22.4635H17.5C16.4795 22.4635 15.6522 21.6273 15.6522 20.5958Z",fill:"#38342E"}}),t._v(" "),s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9754 6.42773C7.36164 8.79587 4.19565 12.5554 4.19565 20.9693C4.19565 29.3907 7.26591 32.6137 10.7289 34.5583C14.3807 36.6088 18.8998 36.6552 22.1003 36.2958C23.1146 36.1818 24.0282 36.9206 24.1409 37.9458C24.2536 38.971 23.5227 39.8944 22.5084 40.0083C19.0567 40.3959 13.5976 40.4422 8.93414 37.8236C4.08191 35.0989 0.5 30.4777 0.5 20.9693C0.5 11.4536 4.17097 6.43501 8.96486 3.29348C13.6327 0.234532 19.1159 -0.17273 22.6255 0.453269C23.6305 0.632528 24.3014 1.60131 24.1241 2.61711C23.9467 3.6329 22.9882 4.31105 21.9832 4.13179C19.2102 3.63718 14.7151 3.977 10.9754 6.42773Z",fill:"#38342E"}})]),t._v(" "),s("label",[t._v("–í—ã–π—Ç–∏")])])])])},staticRenderFns:[]};var f=s("VU/8")(p,_,!1,function(t){s("ecyf")},null,null).exports,y=v.a.create({baseURL:"/api/"});y.interceptors.response.use(function(t){return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t});var h=s("T1ft"),g=s.n(h),C={name:"EmployeeCard",components:{VueElementLoading:a.a,"v-select":g.a},props:["employee"],created:function(){this.selectedEmployeePayment=this.employeePaymentTypes[0].id,this.paymentSum=this.employeePaymentTypes[0].defaultSum},data:function(){return{selectedEmployeePayment:null,paymentSum:0,servicesSearch:"",goodsSearch:"",isSaving:!1,savingError:""}},methods:{updateSum:function(){var t=this;this.paymentSum=this.employeePaymentTypes.filter(function(e){return e.id===t.selectedEmployeePayment})[0].defaultSum},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e={type:"employeepayment",id:null,employeePaymentTypeId:this.selectedEmployeePayment,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment().utc(),employeeId:this.employee.id,sum:this.paymentSum,comment:""};y.post("EditOperations/",[e]).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},services:{get:function(){return this.$store.state.serviceTypes}},goods:{get:function(){return this.$store.state.goodsTypes}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}},filteredServices:function(){var t=this;return this.services.filter(function(e){return e.name.toLowerCase().includes(t.servicesSearch.toLowerCase())})},filteredGoods:function(){var t=this;return this.goods.filter(function(e){return e.name.toLowerCase().includes(t.goodsSearch.toLowerCase())})},adminId:function(){return this.$store.state.currentSession.employees.filter(function(t){return"officeAdmin"===t.role})[0].id}}},b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cell large-6 columns card employee-card"},[s("div",{staticClass:"employee-card-header grid-x grid-padding-x align-middle"},[s("div",{staticClass:"cell auto"},[s("h5",[t._v(t._s(t.employee.name))])]),t._v(" "),s("div",{staticClass:"cell auto show-for-medium"},[t._v("\n      –î–ª–∏–Ω–∞ —Å–º–µ–Ω—ã "),s("strong",[t._v(t._s(t.employee.workHours))]),t._v(" —á.\n    ")])]),t._v(" "),s("div",{staticClass:"employee-card-content grid-x grid-padding-x grid-padding-y"},["master"===t.employee.role?s("div",{staticClass:"cell small-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.servicesSearch,expression:"servicesSearch"}],attrs:{type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–æ —É—Å–ª—É–≥–∞–º"},domProps:{value:t.servicesSearch},on:{input:function(e){e.target.composing||(t.servicesSearch=e.target.value)}}}),t._v(" "),s("ul",{staticClass:"services-goods-list"},t._l(t.filteredServices,function(e){return s("li",{key:e.id},[s("router-link",{attrs:{to:{path:"/EditService/",query:{serviceTypeId:e.id,masterId:t.employee.id,adminId:t.adminId}}}},[t._v(t._s(e.name))])],1)}))]):t._e(),t._v(" "),s("div",{staticClass:"cell small-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsSearch,expression:"goodsSearch"}],attrs:{type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º"},domProps:{value:t.goodsSearch},on:{input:function(e){e.target.composing||(t.goodsSearch=e.target.value)}}}),t._v(" "),s("ul",{staticClass:"services-goods-list"},t._l(t.filteredGoods,function(e){return s("li",{key:e.id},[s("router-link",{attrs:{to:{path:"/EditGoodsSell/",query:{goodTypeId:e.id,employeeId:t.employee.id===t.adminId?null:t.employee.id,adminId:t.adminId}}}},[t._v(t._s(e.name))])],1)}))])]),t._v(" "),s("div",{staticClass:"employee-card-footer grid-x grid-padding-x grid-padding-y"},[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("label",{staticClass:"cell small-12 no-padding-top-bottom"},[t._v("–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É")]),t._v(" "),s("div",{staticClass:"cell medium-6"},[s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.selectedEmployeePayment,label:"name",options:t.employeePaymentTypes},on:{input:t.updateSum},model:{value:t.selectedEmployeePayment,callback:function(e){t.selectedEmployeePayment=e},expression:"selectedEmployeePayment"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentSum,expression:"paymentSum"}],attrs:{type:"number",placeholder:"–°—É–º–º–∞"},domProps:{value:t.paymentSum},on:{input:function(e){e.target.composing||(t.paymentSum=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"cell shrink"},[s("button",{staticClass:"button secondary",on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])]),t._v(" "),t.savingError?s("div",{staticClass:"cell small-12 callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)])},staticRenderFns:[]};var E={name:"Session",components:{appMenu:f,employeeCard:s("VU/8")(C,b,!1,function(t){s("ayN0")},null,null).exports,VueElementLoading:a.a,"v-select":g.a},created:function(){var t=this;document.title=this.$route.meta.title,setInterval(function(){t.time=t.getTime(),t.date=t.getDate()},1e3),this.$store.state.refreshCurrentSession=setInterval(function(){t.getCurrentSession()},3e4),this.spendTypes.length&&(this.selectedSpendType=this.spendTypes[0].id,this.spendSum=this.getSpendSum(this.spendTypes[0].id))},beforeRouteLeave:function(t,e,s){this.$store.state.refreshCurrentSession&&clearInterval(this.$store.state.refreshCurrentSession),s()},data:function(){return{selectedSpendType:null,spendSum:0,isExpenseSaving:!1,expenseSavingError:"",time:this.getTime(),date:this.getDate()}},methods:{saveExpense:function(){var t=this;this.expenseSavingError="",this.isExpenseSaving=!0;var e={type:"spendoperation",id:null,expenseTypeId:this.selectedSpendType,sessionId:this.session.id,officeId:this.session.officeId,datetime:this.moment().utc(),sum:this.spendSum,comment:""};y.post("EditOperations/",[e]).then(function(e){t.$store.dispatch("getCurrentSession"),t.updateSpendSum(),t.isExpenseSaving=!1}).catch(function(e){t.expenseSavingError=e,t.isExpenseSaving=!1})},updateSpendSum:function(){this.spendSum=this.getSpendSum(this.selectedSpendType)},getSpendSum:function(t){return parseInt(this.spendTypes.filter(function(e){return e.id===t})[0].defaultSum)},getGreeting:function(){var t=(new Date).getHours();return t<=12?"–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!":t>12&&t<17?"–î–æ–±—Ä—ã–π –¥–µ–Ω—å!":t>=17?"–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä!":void 0},getGreetingEmojis:function(){for(var t=["‚úÇÔ∏è","üòÄ","üí™","üëã","üòé","üëè","ü¶Ñ","üåÑ","üåÖ","‚ù§Ô∏è","üçí","üåà","üòÑ","‚úåÔ∏è","üòâ","üôÇ","‚úÇÔ∏è"],e=0,s="";e<3;){var n=Math.ceil(Math.random()*t.length-1);n<0&&(n=0),n>t.length&&(n=t.length-1),s+=t[n],e++}return s},getTime:function(){return this.moment().format("HH : mm")},getDate:function(){return this.moment().format("DD.MM.YY")},getCurrentSession:function(){this.$store.dispatch("getCurrentSession")},changeOffice:function(){this.$store.commit("updateStore",{name:"currentOfficeId",value:null}),this.$store.commit("updateStore",{name:"currentSession",value:{}}),this.$store.state.refreshCurrentSession&&clearInterval(this.$store.state.refreshCurrentSession)}},computed:{session:{get:function(){return this.$store.state.currentSession}},currentOfficeId:{get:function(){return this.$store.state.currentOfficeId},set:function(t){this.$store.commit("updateStore",{name:"currentOfficeId",value:t})}},isCurrentSessionLoading:{get:function(){return this.$store.state.isCurrentSessionLoading}},spendTypes:{get:function(){return this.$store.state.spendTypes}},offices:{get:function(){return this.$store.state.offices}},servicesCount:function(){return d()(this.session).length&&this.session.operations?this.session.operations.filter(function(t){return"serviceoperation"===t.type}).length:0},goodsCount:function(){return d()(this.session).length&&this.session.operations?this.session.operations.filter(function(t){return"goodsoperation"===t.type}).length:0},revenue:function(){if(d()(this.session).length&&this.session.operations){var t=0,e=this.session.operations.filter(function(t){return"serviceoperation"===t.type}),s=this.session.operations.filter(function(t){return"goodsoperation"===t.type});return e.map(function(e){t+=e.cashSum+e.cashlessSum-e.discountSum}),s.map(function(e){t+=e.cashSum+e.cashlessSum-e.discountSum}),t}return 0},costs:function(){if(d()(this.session).length&&this.session.operations){var t=0,e=this.session.operations.filter(function(t){return"spendoperation"===t.type}),s=this.session.operations.filter(function(t){return"employeepayment"===t.type});return e.map(function(e){t+=e.sum}),s.map(function(e){t+=e.sum}),t}return 0},bonus:function(){var t=this;if(d()(this.session).length&&this.session.operations){var e=0,s=this.session.operations.filter(function(t){return"serviceoperation"===t.type}),n=this.session.operations.filter(function(t){return"goodsoperation"===t.type});return s.map(function(s){e+=t.$store.getters.getOperationBonus(s)}),n.map(function(s){e+=t.$store.getters.getOperationBonus(s)}),e}return 0}}},S={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"background"},[s("appMenu",{attrs:{"selected-element":"session"}}),t._v(" "),Object.keys(t.session).length?t._e():s("div",{staticClass:"grid-x align-center-middle content"},[s("div",{staticClass:"card cell shrink text-center greeting-card"},[s("h1",[t._v(t._s(t.getGreeting())),s("br"),t._v(t._s(t.getGreetingEmojis()))]),t._v(" "),s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏–µ")]),t._v(" "),s("v-select",{attrs:{disabled:t.isCurrentSessionLoading,clearable:!1,reduce:function(t){return t.id},value:t.currentOfficeId,label:"name",options:t.offices},on:{input:t.getCurrentSession},model:{value:t.currentOfficeId,callback:function(e){t.currentOfficeId=e},expression:"currentOfficeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",{staticClass:"position-relative"},[s("vue-element-loading",{attrs:{active:t.isCurrentSessionLoading,color:"#1C457D"}}),t._v(" "),!Object.keys(t.session).length&&t.currentOfficeId?s("router-link",{staticClass:"button primary",attrs:{to:"/EditSession"}},[t._v("–û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É")]):t._e()],1)],1)]),t._v(" "),Object.keys(t.session).length?s("div",{staticClass:"session-info grid-x align-middle"},[s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.time))]),t._v(" "),s("label",[t._v(t._s(t.date))])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.servicesCount))]),t._v(" "),s("label",[t._v("–£—Å–ª—É–≥ –æ–∫–∞–∑–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.goodsCount))]),t._v(" "),s("label",[t._v("–¢–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.revenue))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.costs))]),t._v(" "),s("label",[t._v("–†–∞—Å—Ö–æ–¥, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-auto small-6"},[s("span",{staticClass:"big-number"},[t._v(t._s(t.bonus))]),t._v(" "),s("label",[t._v("–ü—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"session-info-block cell medium-2 small-12"},[s("router-link",{staticClass:"button primary small",attrs:{to:"/EditSession/"+t.session.id.toString()}},[t._v("–ò–∑–º–µ–Ω–∏—Ç—å/–∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É")])],1)]):t._e(),t._v(" "),Object.keys(t.session).length?s("div",{staticClass:"session-content"},[s("div",{staticClass:"grid-x grid-margin-x grid-margin-y"},[t._l(t.session.employees,function(e){return"master"===e.role?s("employeeCard",{key:e.id,attrs:{employee:e}}):t._e()}),t._v(" "),t._l(t.session.employees,function(e){return"officeAdmin"===e.role?s("employeeCard",{key:e.id,attrs:{employee:e}}):t._e()}),t._v(" "),s("div",{staticClass:"cell large-6 columns card employee-card"},[s("div",{staticClass:"employee-card-footer grid-x grid-padding-x grid-padding-y"},[s("vue-element-loading",{attrs:{active:t.isExpenseSaving,color:"#1C457D"}}),t._v(" "),s("h4",{staticClass:"cell small-12"},[t._v("–í–Ω–µ—Å—Ç–∏ —Ä–∞—Å—Ö–æ–¥")]),t._v(" "),s("div",{staticClass:"cell medium-6"},[s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.selectedSpendType,label:"name",options:t.spendTypes},on:{input:t.updateSpendSum},model:{value:t.selectedSpendType,callback:function(e){t.selectedSpendType=e},expression:"selectedSpendType"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell auto"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.spendSum,expression:"spendSum",modifiers:{number:!0}}],attrs:{type:"number",placeholder:"–°—É–º–º–∞"},domProps:{value:t.spendSum},on:{input:function(e){e.target.composing||(t.spendSum=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),s("div",{staticClass:"cell shrink"},[s("button",{staticClass:"button secondary",on:{click:t.saveExpense}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])])],1)]),t._v(" "),t.session.operations?s("div",{staticClass:"cell small-12 columns card"},[s("div",{staticClass:"table-container"},[s("table",{staticClass:"operations-table hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.session.operations,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                    "+t._s(t.$store.getters.getTimeFromOperation(e))+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)},domProps:{innerHTML:t._s(t.$store.getters.getOperationContent(e))}})],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                    "+t._s(t.$store.getters.getEmployeeNameFromOperation(e))+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                    "+t._s(t.$store.getters.getOperationSum(e))+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                    "+t._s(t.$store.getters.getOperationBonus(e))+"\n                  ")])],1)])}))])])]):t._e(),t._v(" "),s("div",{staticClass:"cell large-6 columns"},[s("button",{staticClass:"button secondary",on:{click:t.changeOffice}},[t._v("–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª–µ–Ω–∏–µ")])])],2)]):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–í—Ä–µ–º—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–û–ø–µ—Ä–∞—Ü–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°—É–º–º–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è")])])])}]};var k=s("VU/8")(E,S,!1,function(t){s("dPSK")},null,null).exports,I={name:"EditSession",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",session:this.getEmptyItem()}},methods:{addAdmin:function(){this.session.employees.push({id:this.admins[0].id,role:"officeAdmin",workHours:6})},addMaster:function(){this.session.employees.push({id:this.masters[0].id,role:"master",workHours:6})},removeEmployee:function(t){var e=this.session.employees.findIndex(function(e){return e.id===t});this.session.employees.splice(e,1)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetSession/",{id:t,withOperations:!1}).then(function(t){var s=t.data;null===s.employees&&(s.employees=[]),s.dateOpened&&(s.dateOpened=e.moment.utc(s.dateOpened,"DD.MM.YYYY HH:mm").local()),s.dateClosed&&(s.dateClosed=e.moment.utc(s.dateClosed,"DD.MM.YYYY HH:mm").local()),e.session=s,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(t){var e=this;this.isSaving=!0,this.savingError="";var s=this.session;t&&(s.state="closed",s.dateClosed=this.moment().utc()),null===s.dateClosed&&delete s.dateClosed,y.post("EditSession/",this.session).then(function(t){e.isSaving=!1,e.$store.dispatch("getCurrentSession"),e.$router.push("/")}).catch(function(t){e.savingError=t,e.isSaving=!1})},getEmptyItem:function(){return{id:null,dateOpened:this.moment().utc(),dateClosed:null,employees:[],officeId:this.$store.state.currentOfficeId,state:"open",openCash:0}}},computed:{offices:{get:function(){return this.$store.state.offices}},admins:{get:function(){return this.$store.state.employees.filter(function(t){return t.roles.includes("officeAdmin")})}},masters:{get:function(){return this.$store.state.employees.filter(function(t){return t.roles.includes("master")})}},selectedAdmins:{get:function(){return this.session.employees?this.session.employees.filter(function(t){return"officeAdmin"===t.role}):null},set:function(t){var e=this.session.employees.findIndex(function(e){return e.id===t.id});t.role="officeAdmin",this.session.employees.$set(e,t)}},selectedMasters:{get:function(){return this.session.employees?this.session.employees.filter(function(t){return"master"===t.role}):null},set:function(t){var e=this.session.employees.findIndex(function(e){return e.id===t.id});t.role="master",this.session.employees.$set(e,t)}},canEdit:function(){return"open"===this.session.state&&(this.session.id===this.$store.state.currentSession.id||!this.session.id)}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":t.canEdit?"session":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[t.canEdit?s("li",[s("router-link",{attrs:{to:"/"}},[t._v("–ù–∞–∑–∞–¥")])],1):s("li",[s("router-link",{attrs:{to:"/SessionsHistory/"}},[t._v("–ù–∞–∑–∞–¥")])],1)])]),t._v(" "),s("h1",[t._v("–°–º–µ–Ω–∞")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏–µ")]),t._v(" "),s("v-select",{attrs:{clearable:!1,disabled:!t.canEdit,reduce:function(t){return t.id},value:t.session.officeId,label:"name",options:t.offices},model:{value:t.session.officeId,callback:function(e){t.$set(t.session,"officeId",e)},expression:"session.officeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("h2",[t._v("–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã")]),t._v(" "),t._l(t.selectedAdmins,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä "+t._s(n>0?n+1:""))]),t._v(" "),n>0&&t.canEdit?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeEmployee(e.id)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,disabled:!t.canEdit,reduce:function(t){return t.id},value:e.id,label:"name",options:t.admins},model:{value:e.id,callback:function(s){t.$set(e,"id",s)},expression:"admin.id"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã, —á–∞—Å—ã")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.workHours,expression:"admin.workHours"}],attrs:{type:"number",disabled:!t.canEdit},domProps:{value:e.workHours},on:{input:function(s){s.target.composing||t.$set(e,"workHours",s.target.value)}}})],1)}),t._v(" "),t.canEdit?s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addAdmin}},[t._v("–î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")])]):t._e(),t._v(" "),s("h2",[t._v("–ú–∞—Å—Ç–µ—Ä–∞")]),t._v(" "),t._l(t.selectedMasters,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ú–∞—Å—Ç–µ—Ä "+t._s(n>0?n+1:""))]),t._v(" "),n>0&&t.canEdit?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeEmployee(e.id)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,disabled:!t.canEdit,reduce:function(t){return t.id},value:e.id,label:"name",options:t.masters},model:{value:e.id,callback:function(s){t.$set(e,"id",s)},expression:"master.id"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã, —á–∞—Å—ã")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.workHours,expression:"master.workHours"}],attrs:{type:"number",disabled:!t.canEdit},domProps:{value:e.workHours},on:{input:function(s){s.target.composing||t.$set(e,"workHours",s.target.value)}}})],1)}),t._v(" "),t.canEdit?s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addMaster}},[t._v("–î–æ–±–∞–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä–∞")])]):t._e(),t._v(" "),t.canEdit?s("div",{staticClass:"grid-x align-justify"},[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary cell shrink",attrs:{type:"button"},on:{click:function(e){t.save(!1)}}},[t._v(t._s(t.session.id?"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å":"–û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É"))]),t._v(" "),t.session.id?s("button",{staticClass:"button secondary alert cell shrink",attrs:{type:"button"},on:{click:function(e){t.save(!0)}}},[t._v("–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É")]):t._e()],1):t._e(),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–º–µ–Ω—ã")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2)],1)])],1)},staticRenderFns:[]};var $=s("VU/8")(I,T,!1,function(t){s("jve6")},null,null).exports,x={name:"SessionsHistory",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.load()},data:function(){return{dateFrom:null,dateTo:null,selectedOperationTypes:[],employeeIds:[],clientIds:[],officeIds:[],isLoading:!1,loadingError:"",noSessions:!1,sessions:[]}},methods:{load:function(){var t=this;this.isLoading=!0,this.noSessions=!1;var e={withOperations:!0};this.dateFrom&&(e.dateFrom=this.moment(this.dateFrom).format("DD.MM.YYYY")),this.dateTo&&(e.dateTo=this.moment(this.dateTo).format("DD.MM.YYYY")),this.selectedOperationTypes&&this.selectedOperationTypes.length>0&&(e.operationType=this.selectedOperationTypes),this.employeeIds&&this.employeeIds.length>0&&(e.employeeIds=this.employeeIds),this.clientIds&&this.clientIds.length>0&&(e.clientIds=this.clientIds),this.officeIds&&this.officeIds.length>0&&(e.officeIds=this.officeIds),y.post("GetSessions/",e).then(function(e){t.sessions=e.data,Array.isArray(t.sessions)||(t.noSessions=!0),t.isLoading=!1}).catch(function(e){t.loadingError=e,t.isLoading=!1})}},computed:{operationTypes:{get:function(){return this.$store.state.operationTypes}},offices:{get:function(){return this.$store.state.offices}},employees:{get:function(){return this.$store.state.employees}},clients:{get:function(){return this.$store.state.clients}}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π")]),t._v(" "),s("div",{staticClass:"grid-x grid-padding-x no-padding-small"},[s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–î–∞—Ç–∞ –æ—Ç")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dateFrom,expression:"dateFrom"}],attrs:{type:"date"},domProps:{value:t.dateFrom},on:{input:function(e){e.target.composing||(t.dateFrom=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–î–∞—Ç–∞ –¥–æ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dateTo,expression:"dateTo"}],attrs:{type:"date"},domProps:{value:t.dateTo},on:{input:function(e){e.target.composing||(t.dateTo=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.selectedOperationTypes,label:"name",options:t.operationTypes},model:{value:t.selectedOperationTypes,callback:function(e){t.selectedOperationTypes=e},expression:"selectedOperationTypes"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.officeIds,label:"name",options:t.offices},model:{value:t.officeIds,callback:function(e){t.officeIds=e},expression:"officeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–ö–ª–∏–µ–Ω—Ç—ã")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.clientIds,"get-option-label":t.$store.getters.getClientDescription,options:t.clients},model:{value:t.clientIds,callback:function(e){t.clientIds=e},expression:"clientIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.employeeIds,label:"name",options:t.employees},model:{value:t.employeeIds,callback:function(e){t.employeeIds=e},expression:"employeeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell small-12"},[s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.load}},[t._v("–ü–æ–∫–∞–∑–∞—Ç—å")])])]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),t.noSessions?s("div",[t._v("–ù–µ –Ω–∞–π–¥–µ–Ω–æ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥ –∑–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã")]):t._e(),t._v(" "),t.isLoading?s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}})],1):t._e(),t._v(" "),t._l(t.sessions,function(e){return t.noSessions||t.isLoading?t._e():s("div",{key:e.id},[s("h4",[s("router-link",{attrs:{to:"/EditSession/"+e.id.toString()}},[t._v("–°–º–µ–Ω–∞ "+t._s(t.moment.utc(e.dateOpened,"DD.MM.YYYY HH:mm").local().format("DD.MM.YY"))+" "+t._s(t.$store.getters.getOfficeName(e.officeId)))])],1),t._v(" "),s("div",{staticClass:"table-container margin-bottom-30px"},[s("table",{staticClass:"operations-table hover"},[t._m(0,!0),t._v(" "),s("tbody",t._l(e.operations,function(e){return s("tr",{key:e},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getTimeFromOperation(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getEmployeeNameFromOperation(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)},domProps:{innerHTML:t._s(t.$store.getters.getOperationContent(e))}})],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getOperationSum(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getOperationBonus(e))+"\n                ")])],1)])}))])])])})],2)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–í—Ä–µ–º—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–û–ø–µ—Ä–∞—Ü–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°—É–º–º–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è")])])])}]};var w=s("VU/8")(x,L,!1,function(t){s("zikU")},null,null).exports,P=s("Gu7T"),M=s.n(P),O={name:"EditService",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){this.$route.params.id?this.load(this.$route.params.id):this.operations=this.getEmptyItem()},mounted:function(){document.title=this.$route.meta.title},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",operations:[],newClient:this.getEmptyClient()}},methods:{getEmptyItem:function(){return[{type:"serviceoperation",sessionId:this.currentSession.id,id:null,officeId:this.currentSession.officeId,serviceId:this.$route.query.serviceTypeId||this.serviceTypes[0].id,startDatetime:this.moment().subtract(1,"hours"),finishDatetime:this.moment(),adminId:this.$route.query.adminId||this.admins[0].id,masterId:this.$route.query.masterId||this.masters[0].id,clientId:null,cashSum:this.getServiceSum(this.$route.query.serviceTypeId,this.$route.query.masterId),cashlessSum:0,discountSum:0,adminBonusSum:0,masterBonusSum:0,clientRating:null,review:"",photos:null,comment:""}]},addItem:function(){this.operations.push({type:"goodsoperation",id:null,goodsId:this.goodsTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:null,adminId:this.service.adminId,employeeId:this.service.masterId,clientId:this.service.clientId,amount:1,cashSum:this.goodsTypes[0].price,cashlessSum:0,discountSum:0,adminBonusSum:0,employeeBonusSum:0,comment:""})},removeItem:function(t){var e=this.operations.findIndex(function(e){return"goodsoperation"===e.type&&e.goodsId===t.goodsId&&e.id===t.id});this.operations.splice(e,1)},updateServiceSum:function(){this.service.cashSum=this.getServiceSum(this.service.serviceId,this.service.masterId),this.service.cashlessSum=0},updateItemSum:function(t){t.cashSum=this.goodsTypes.filter(function(e){return e.id===t.goodsId})[0].price*t.amount,t.cashlessSum=0},updateExpenseSum:function(t){t.sum=this.employeePaymentTypes.filter(function(e){return e.id===t.expenseTypeId})[0].defaultSum},updateEmployeePaymentSum:function(t){t.sum=this.employeePaymentTypes.filter(function(e){return e.id===t.employeePaymentTypeId})[0].defaultSum},addExpense:function(){this.operations.push({type:"spendoperation",id:null,expenseTypeId:this.spendTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:null,sum:this.spendTypes[0].defaultSum,comment:""})},removeExpense:function(t){var e=this.operations.findIndex(function(e){return"spendoperation"===e.type&&e.expenseTypeId===t.expenseTypeId&&e.id===t.id});this.operations.splice(e,1)},addEmployeePayment:function(){this.operations.push({type:"employeepayment",id:null,employeePaymentTypeId:this.employeePaymentTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:null,employeeId:this.service.masterId,sum:this.employeePaymentTypes[0].defaultSum,comment:""})},removeEmployeePayment:function(t){var e=this.operations.findIndex(function(e){return"employeepayment"===e.type&&e.employeePaymentTypeId===t.employeePaymentTypeId&&e.id===t.id});this.operations.splice(e,1)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetServiceOperation/",{id:t}).then(function(t){var s=t.data;s.type="serviceoperation",s.startDatetime=e.moment.utc(s.startDatetime,"DD.MM.YYYY HH:mm").local(),s.finishDatetime=e.moment.utc(s.startDatetime,"DD.MM.YYYY HH:mm").local(),e.operations=[s],e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e=this.operations;for(var s in e)"serviceoperation"===e[s].type?(e[s].adminBonusSum=this.getAdminBonus(e[s].cashSum+e[s].cashlessSum,e[s].adminId,e[s].type),e[s].masterBonusSum=this.getMasterBonus(e[s].cashSum+e[s].cashlessSum,e[s].masterId,e[s].type),e[s].startDatetime=e[s].startDatetime.utc(),e[s].finishDatetime=e[s].finishDatetime.utc()):"goodsoperation"===e[s].type?(e[s].adminBonusSum=this.getAdminBonus(e[s].cashSum+e[s].cashlessSum,e[s].adminId,e[s].type),e[s].employeeId&&e[s].employeeId!==e[s].adminId&&(e[s].employeeBonusSum=this.getEmployeeBonus(e[s].cashSum+e[s].cashlessSum,e[s].employeeId,e[s].type)),e[s].datetime=this.moment().utc()):e[s].datetime=this.moment().utc();if(this.operations=e,null===this.service.clientId){var n=this.newClient;null===n.photo&&delete n.photo,null===n.comment&&(n.comment=""),null!==n.contacts&&n.contacts!==[]||delete n.contacts,y.post("EditClient/",n).then(function(e){var s=e.data.id,n=t.operations;for(var i in n)"clientId"in n[i]&&(n[i].clientId=s);t.operations=n,y.post("EditOperations/",t.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1,t.$router.push("/")}).catch(function(e){t.savingError=e,t.isSaving=!1})}).catch(function(e){t.savingError=e,t.isSaving=!1})}else y.post("EditOperations/",this.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1,t.$router.push("/")}).catch(function(e){t.savingError=e,t.isSaving=!1})},getEmptyClient:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}]}},getServiceSum:function(t,e){var s=this.serviceTypes.filter(function(e){return e.id===t})[0],n=this.masters.filter(function(t){return t.id===e})[0],i=s.prices.filter(function(t){return t.category===n.categoryId});return i.length?parseInt(i[0].price):0},getAdminBonus:function(t,e,s){var n=this.admins.filter(function(t){return t.id===e})[0];return"serviceoperation"===s?t*n.servicePercent:"goodsoperation"===s?t*n.goodsPercent:void 0},getMasterBonus:function(t,e,s){var n=this.masters.filter(function(t){return t.id===e})[0];return"serviceoperation"===s?t*n.servicePercent:"goodsoperation"===s?t*n.goodsPercent:void 0},getEmployeeBonus:function(t,e,s){return t*this.employees.filter(function(t){return t.id===e})[0].goodsPercent},addContact:function(){this.newClient.contacts||(this.newClient.contacts=[]),this.newClient.contacts.push({type:"phone",value:""})},removeContact:function(t){this.newClient.contacts.splice(t,1)}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},serviceTypes:{get:function(){return this.$store.state.serviceTypes}},clients:{get:function(){var t=[].concat(M()(this.$store.state.clients));return t.unshift(this.getEmptyClient()),t}},admins:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees.filter(function(t){return"officeAdmin"===t.role}):this.$store.state.employees.filter(function(t){return t.roles.includes("officeAdmin")})}},masters:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees.filter(function(t){return"master"===t.role}):this.$store.state.employees.filter(function(t){return t.roles.includes("master")})}},employees:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees:this.$store.state.employees}},goodsTypes:{get:function(){return this.$store.state.goodsTypes}},spendTypes:{get:function(){return this.$store.state.spendTypes}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}},contactTypes:{get:function(){return this.$store.state.contactTypes}},service:{get:function(){return this.operations.filter(function(t){return"serviceoperation"===t.type})[0]},set:function(t){var e=this.operations.findIndex(function(t){return"serviceoperation"===t.type})||0;this.operations.$set(e,t)}},soldGoods:{get:function(){return this.operations.filter(function(t){return"goodsoperation"===t.type})},set:function(t){var e=this.operations.findIndex(function(e){return"goodsoperation"===e.type&&e.goodsId===t.goodsId&&e.id===t.id});this.operations.$set(e,t)}},expenses:{get:function(){return this.operations.filter(function(t){return"spendoperation"===t.type})},set:function(t){var e=this.operations.findIndex(function(e){return"spendoperation"===e.type&&e.expenseTypeId===t.expenseTypeId&&e.id===t.id});this.operations.$set(e,t)}},employeePayments:{get:function(){return this.operations.filter(function(t){return"employeepayment"===t.type})},set:function(t){var e=this.operations.findIndex(function(e){return"employeepayment"===e.type&&e.employeePaymentTypeId===t.employeePaymentTypeId&&e.id===t.id&&e.employeeId===t.employeeId});this.operations.$set(e,t)}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)},startTime:{get:function(){return this.service.startDatetime.format("HH:mm")},set:function(t){this.service.startDatetime=this.moment(t,"HH:mm")}},endTime:{get:function(){return this.service.finishDatetime.format("HH:mm")},set:function(t){this.service.finishDatetime=this.moment(t,"HH:mm")}}}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":t.canEdit?"session":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[t.canEdit?s("li",[s("router-link",{attrs:{to:"/"}},[t._v("–ù–∞–∑–∞–¥")])],1):s("li",[s("router-link",{attrs:{to:"/SessionsHistory"}},[t._v("–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π")])],1)])]),t._v(" "),s("h1",[t._v("–£—Å–ª—É–≥–∞")]),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.service?s("div",{staticClass:"cell large-6"},[s("label",[t._v("–£—Å–ª—É–≥–∞")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.service.serviceId,label:"name",options:t.serviceTypes},on:{input:t.updateServiceSum},model:{value:t.service.serviceId,callback:function(e){t.$set(t.service,"serviceId",e)},expression:"service.serviceId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x"},[s("div",{staticClass:"cell medium-6"},[s("label",[t._v("–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.startTime,expression:"startTime"}],attrs:{type:"time"},domProps:{value:t.startTime},on:{input:function(e){e.target.composing||(t.startTime=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"cell medium-6"},[s("label",[t._v("–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],attrs:{type:"time"},domProps:{value:t.endTime},on:{input:function(e){e.target.composing||(t.endTime=e.target.value)}}})])]),t._v(" "),s("label",[t._v("–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.service.adminId,label:"name",options:t.admins},model:{value:t.service.adminId,callback:function(e){t.$set(t.service,"adminId",e)},expression:"service.adminId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ú–∞—Å—Ç–µ—Ä")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.service.masterId,label:"name",options:t.masters},model:{value:t.service.masterId,callback:function(e){t.$set(t.service,"masterId",e)},expression:"service.masterId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ö–ª–∏–µ–Ω—Ç")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.service.clientId,"get-option-label":t.$store.getters.getClientDescription,options:t.clients},model:{value:t.service.clientId,callback:function(e){t.$set(t.service,"clientId",e)},expression:"service.clientId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),null===t.service.clientId?s("div",[s("label",[t._v("–ò–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newClient.name,expression:"newClient.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.newClient.name},on:{input:function(e){e.target.composing||t.$set(t.newClient,"name",e.target.value)}}}),t._v(" "),t._l(t.newClient.contacts,function(e,n){return s("div",{key:e},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ö–æ–Ω—Ç–∞–∫—Ç "+t._s(n>0?n+1:""))]),t._v(" "),s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(e){t.removeContact(n)}}},[t._v("\n                –£–¥–∞–ª–∏—Ç—å\n              ")])]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.type,label:"name",options:t.contactTypes},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"contact.type"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})],1)}),t._v(" "),s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addContact}},[t._v("\n              –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç\n            ")])]),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∫–ª–∏–µ–Ω—Ç—É")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newClient.comment,expression:"newClient.comment"}],attrs:{rows:"3"},domProps:{value:t.newClient.comment},on:{input:function(e){e.target.composing||t.$set(t.newClient,"comment",e.target.value)}}})],2):t._e(),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–Ω–∞–ª–∏—á–∫–∞)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.service.cashSum,expression:"service.cashSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.service.cashSum},on:{input:function(e){e.target.composing||t.$set(t.service,"cashSum",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–±–µ–∑–Ω–∞–ª)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.service.cashlessSum,expression:"service.cashlessSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.service.cashlessSum},on:{input:function(e){e.target.composing||t.$set(t.service,"cashlessSum",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°–∫–∏–¥–∫–∞, —Ä—É–±.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.service.discountSum,expression:"service.discountSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.service.discountSum},on:{input:function(e){e.target.composing||t.$set(t.service,"discountSum",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–û—Ü–µ–Ω–∫–∞ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç 1 –¥–æ 10")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.service.score,expression:"service.score",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.service.score},on:{input:function(e){e.target.composing||t.$set(t.service,"score",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–û—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç–∞")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.service.review,expression:"service.review"}],attrs:{rows:"2"},domProps:{value:t.service.review},on:{input:function(e){e.target.composing||t.$set(t.service,"review",e.target.value)}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.service.comment,expression:"service.comment"}],attrs:{rows:"2"},domProps:{value:t.service.comment},on:{input:function(e){e.target.composing||t.$set(t.service,"comment",e.target.value)}}}),t._v(" "),t.canEdit?s("div",[s("h2",[t._v("–ü—Ä–æ–¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã")]),t._v(" "),t._l(t.soldGoods,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–¢–æ–≤–∞—Ä "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeItem(e)}}},[t._v("\n                –£–¥–∞–ª–∏—Ç—å\n              ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.goodsId,label:"name",options:t.goodsTypes},on:{input:function(s){t.updateItemSum(e)}},model:{value:e.goodsId,callback:function(s){t.$set(e,"goodsId",s)},expression:"soldItem.goodsId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"soldItem.amount",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.amount},on:{input:[function(s){s.target.composing||t.$set(e,"amount",t._n(s.target.value))},function(s){t.updateItemSum(e)}],blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–Ω–∞–ª–∏—á–∫–∞)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cashSum,expression:"soldItem.cashSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.cashSum},on:{input:function(s){s.target.composing||t.$set(e,"cashSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–±–µ–∑–Ω–∞–ª)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cashlessSum,expression:"soldItem.cashlessSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.cashlessSum},on:{input:function(s){s.target.composing||t.$set(e,"cashlessSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°–∫–∏–¥–∫–∞, —Ä—É–±.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.discountSum,expression:"soldItem.discountSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.discountSum},on:{input:function(s){s.target.composing||t.$set(e,"discountSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"soldItem.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),s("div",[t.canEdit?s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addItem}},[t._v("\n              –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä\n            ")]):t._e()]),t._v(" "),s("h2",[t._v("–†–∞—Å—Ö–æ–¥—ã")]),t._v(" "),t._l(t.expenses,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–†–∞—Å—Ö–æ–¥ "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeExpense(e)}}},[t._v("\n                –£–¥–∞–ª–∏—Ç—å\n              ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.expenseTypeId,label:"name",options:t.spendTypes},on:{input:function(s){t.updateExpenseSum(e)}},model:{value:e.expenseTypeId,callback:function(s){t.$set(e,"expenseTypeId",s)},expression:"expense.expenseTypeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°—É–º–º–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"expense.sum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.sum},on:{input:function(s){s.target.composing||t.$set(e,"sum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"expense.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),t.canEdit?s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addExpense}},[t._v("\n              –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥\n            ")])]):t._e(),t._v(" "),s("h2",[t._v("–í—ã–ø–ª–∞—Ç—ã –º–∞—Å—Ç–µ—Ä—É")]),t._v(" "),t._l(t.employeePayments,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–í—ã–ø–ª–∞—Ç–∞ –º–∞—Å—Ç–µ—Ä—É "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeEmployeePayment(e)}}},[t._v("\n                –£–¥–∞–ª–∏—Ç—å\n              ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.employeePaymentTypeId,label:"name",options:t.employeePaymentTypes},on:{input:function(s){t.updateEmployeePaymentSum(e)}},model:{value:e.employeePaymentTypeId,callback:function(s){t.$set(e,"employeePaymentTypeId",s)},expression:"payment.employeePaymentTypeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°—É–º–º–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"payment.sum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.sum},on:{input:function(s){s.target.composing||t.$set(e,"sum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"payment.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),t.canEdit?s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addEmployeePayment}},[t._v("\n              –î–æ–±–∞–≤–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É –º–∞—Å—Ç–µ—Ä—É\n            ")])]):t._e()],2):t._e(),t._v(" "),t.canEdit?s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])],1):t._e(),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1):t._e()],1)])],1)},staticRenderFns:[]};var j=s("VU/8")(O,D,!1,function(t){s("356v")},null,null).exports,N={name:"EditGoodsSell",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){this.adminId=this.$route.query.adminId||this.admins[0].id,this.employeeId=this.$route.query.employeeId,this.operations=[this.getEmptyItem()],this.$route.params.id&&this.load(this.$route.params.id),document.title=this.$route.meta.title},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",newClient:this.getEmptyClient(),operations:[],adminId:null,employeeId:null,clientId:null,time:this.moment().format("HH:mm")}},methods:{addItem:function(){this.operations.push(this.getEmptyItem())},removeItem:function(t){var e=this.operations.findIndex(function(e){return"goodsoperation"===e.type&&e.goodsId===t.goodsId&&e.id===t.id});this.operations.splice(e,1)},getEmptyItem:function(){return{type:"goodsoperation",id:null,goodsId:this.$route.query.goodTypeId||this.goodsTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:null,adminId:this.adminId,employeeId:this.employeeId,clientId:null,amount:1,cashSum:this.goodsTypes[0].price,cashlessSum:0,discountSum:0,adminBonusSum:0,employeeBonusSum:0,comment:""}},updateSum:function(t,e){t.cashSum=this.goodsTypes.filter(function(e){return e.id===t.goodsId})[0].price*t.amount,t.cashlessSum=0,this.$set(this.operations,e,t)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetGoodsOperation/",{id:t}).then(function(t){var s=t.data;s.type="goodsoperation",s.datetime=e.moment.utc(s.datetime,"DD.MM.YYYY HH:mm").local(),e.operations=[s],e.adminId=s.adminId,e.employeeId=s.employeeId,e.clientId=s.clientId,e.time=s.datetime.format("HH:mm"),e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e=this.operations;for(var s in e)e[s].adminBonusSum=this.getAdminBonus(e[s].cashSum+e[s].cashlessSum,e[s].adminId,e[s].type),e[s].employeeId&&e[s].employeeId!==e[s].adminId&&(e[s].employeeBonusSum=this.getEmployeeBonus(e[s].cashSum+e[s].cashlessSum,e[s].employeeId,e[s].type)),e[s].adminId=this.adminId,e[s].employeeId=this.employeeId,e[s].clientId=this.clientId,e[s].datetime=this.moment(this.time,"HH:mm").utc();if(this.operations=e,null===this.clientId){var n=this.newClient;null===n.photo&&delete n.photo,null===n.comment&&(n.comment=""),null!==n.contacts&&n.contacts!==[]||delete n.contacts,y.post("EditClient/",n).then(function(e){var s=e.data.id,n=t.operations;for(var i in n)"clientId"in n[i]&&(n[i].clientId=s);t.operations=n,y.post("EditOperations/",t.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1,t.$router.push("/")}).catch(function(e){t.savingError=e,t.isSaving=!1})}).catch(function(e){t.savingError=e,t.isSaving=!1})}else{var i=this.clientId;for(s in e=this.operations)"clientId"in e[s]&&(e[s].clientId=i);this.operations=e,y.post("EditOperations/",this.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.$router.push("/"),t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})}},getEmptyClient:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}]}},getAdminBonus:function(t,e,s){var n=this.admins.filter(function(t){return t.id===e})[0];return"serviceoperation"===s?t*n.servicePercent:"goodsoperation"===s?t*n.goodsPercent:void 0},getEmployeeBonus:function(t,e,s){var n=this.employees.filter(function(t){return t.id===e})[0];return"serviceoperation"===s?t*n.servicePercent:"goodsoperation"===s?t*n.goodsPercent:void 0},addContact:function(){this.newClient.contacts||(this.newClient.contacts=[]),this.newClient.contacts.push({type:"phone",value:""})},removeContact:function(t){this.newClient.contacts.splice(t,1)}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},clients:{get:function(){var t=[].concat(M()(this.$store.state.clients));return t.unshift(this.getEmptyClient()),t}},admins:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees.filter(function(t){return"officeAdmin"===t.role}):this.$store.state.employees.filter(function(t){return t.roles.includes("officeAdmin")})}},employees:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees:this.$store.state.employees}},goodsTypes:{get:function(){return this.$store.state.goodsTypes}},contactTypes:{get:function(){return this.$store.state.contactTypes}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)}}},F={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":t.canEdit?"session":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[t.canEdit?s("li",[s("router-link",{attrs:{to:"/"}},[t._v("–ù–∞–∑–∞–¥")])],1):s("li",[s("router-link",{attrs:{to:"/SessionsHistory"}},[t._v("–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π")])],1)])]),t._v(" "),s("h1",[t._v("–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤")]),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.operations.length?s("div",{staticClass:"cell large-6"},[s("label",[t._v("–í—Ä–µ–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"time"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),s("label",[t._v("–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.adminId,label:"name",options:t.admins},model:{value:t.adminId,callback:function(e){t.adminId=e},expression:"adminId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–π–¥—ë—Ç –ø—Ä–æ–¥–∞–∂–∞ –≤ –ø—Ä–µ–º–∏—é, –∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞")]),t._v(" "),s("v-select",{attrs:{reduce:function(t){return t.id},value:t.employeeId,label:"name",options:t.employees},model:{value:t.employeeId,callback:function(e){t.employeeId=e},expression:"employeeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ö–ª–∏–µ–Ω—Ç")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.clientId,"get-option-label":t.$store.getters.getClientDescription,options:t.clients},model:{value:t.clientId,callback:function(e){t.clientId=e},expression:"clientId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),null===t.clientId?s("div",[s("label",[t._v("–ò–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newClient.name,expression:"newClient.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.newClient.name},on:{input:function(e){e.target.composing||t.$set(t.newClient,"name",e.target.value)}}}),t._v(" "),t._l(t.newClient.contacts,function(e,n){return s("div",{key:e},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ö–æ–Ω—Ç–∞–∫—Ç "+t._s(n>0?n+1:""))]),t._v(" "),s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(e){t.removeContact(n)}}},[t._v("\n                –£–¥–∞–ª–∏—Ç—å\n              ")])]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.type,label:"name",options:t.contactTypes},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"contact.type"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})],1)}),t._v(" "),s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addContact}},[t._v("\n              –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç\n            ")])]),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∫–ª–∏–µ–Ω—Ç—É")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newClient.comment,expression:"newClient.comment"}],attrs:{rows:"3"},domProps:{value:t.newClient.comment},on:{input:function(e){e.target.composing||t.$set(t.newClient,"comment",e.target.value)}}})],2):t._e(),t._v(" "),t._l(t.operations,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–¢–æ–≤–∞—Ä "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit&&n>0?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeItem(e)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.goodsId,label:"name",options:t.goodsTypes},on:{input:function(s){t.updateSum(e,n)}},model:{value:e.goodsId,callback:function(s){t.$set(e,"goodsId",s)},expression:"soldItem.goodsId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.amount,expression:"soldItem.amount",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.amount},on:{input:[function(s){s.target.composing||t.$set(e,"amount",t._n(s.target.value))},function(s){t.updateSum(e,n)}],blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–Ω–∞–ª–∏—á–∫–∞)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cashSum,expression:"soldItem.cashSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.cashSum},on:{input:function(s){s.target.composing||t.$set(e,"cashSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ (–±–µ–∑–Ω–∞–ª)")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cashlessSum,expression:"soldItem.cashlessSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.cashlessSum},on:{input:function(s){s.target.composing||t.$set(e,"cashlessSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–°–∫–∏–¥–∫–∞, —Ä—É–±.")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.discountSum,expression:"soldItem.discountSum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.discountSum},on:{input:function(s){s.target.composing||t.$set(e,"discountSum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"soldItem.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),s("div",[t.canEdit?s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addItem}},[t._v("\n            –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä\n          ")]):t._e()]),t._v(" "),t.canEdit?s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])],1):t._e(),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2):t._e()],1)])],1)},staticRenderFns:[]};var H=s("VU/8")(N,F,!1,function(t){s("gTcm")},null,null).exports,Y={name:"EditEmployeePayment",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){this.operations=[this.getEmptyItem()],this.$route.params.id&&this.load(this.$route.params.id),document.title=this.$route.meta.title},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",operations:[],time:this.moment().format("HH:mm")}},methods:{addItem:function(){this.operations.push(this.getEmptyItem())},removeItem:function(t){var e=this.operations.findIndex(function(e){return"employeepayment"===e.type&&e.employeePaymentTypeId===t.employeePaymentTypeId&&e.id===t.id});this.operations.splice(e,1)},getEmptyItem:function(){return{type:"employeepayment",id:null,employeePaymentTypeId:this.$route.query.employeePaymentTypeId||this.employeePaymentTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:null,employeeId:this.employees[0].id,sum:this.employeePaymentTypes[0].defaultSum,comment:""}},updateSum:function(t){t.sum=this.employeePaymentTypes.filter(function(e){return e.id===t.employeePaymentTypeId})[0].defaultSum},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetEmployeePaymentOperation/",{id:t}).then(function(t){var s=t.data;s.type="employeepayment",s.datetime=e.moment.utc(s.datetime,"DD.MM.YYYY HH:mm").local(),e.operations=[s],e.time=s.datetime.format("HH:mm"),e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e=this.operations;for(var s in e)e[s].datetime=this.moment(this.time,"HH:mm").utc();this.operations=e,y.post("EditOperations/",this.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1,t.$router.push("/")}).catch(function(e){t.savingError=e,t.isSaving=!1})}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},employees:{get:function(){return this.currentSession&&d()(this.currentSession).length?this.currentSession.employees:this.$store.state.employees}},employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)}}},G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":t.canEdit?"session":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[t.canEdit?s("li",[s("router-link",{attrs:{to:"/"}},[t._v("–ù–∞–∑–∞–¥")])],1):s("li",[s("router-link",{attrs:{to:"/SessionsHistory"}},[t._v("–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π")])],1)])]),t._v(" "),s("h1",[t._v("–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É")]),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.operations.length?s("div",{staticClass:"cell large-6"},[s("label",[t._v("–í—Ä–µ–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"time"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),t._l(t.operations,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit&&n>0?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeItem(e)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.employeePaymentTypeId,label:"name",options:t.employeePaymentTypes},on:{input:function(s){t.updateSum(e)}},model:{value:e.employeePaymentTypeId,callback:function(s){t.$set(e,"employeePaymentTypeId",s)},expression:"payment.employeePaymentTypeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),s("v-select",{attrs:{reduce:function(t){return t.id},value:e.employeeId,label:"name",options:t.employees},model:{value:e.employeeId,callback:function(s){t.$set(e,"employeeId",s)},expression:"payment.employeeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°—É–º–º–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"payment.sum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.sum},on:{input:function(s){s.target.composing||t.$set(e,"sum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"payment.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),s("div",[t.canEdit?s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addItem}},[t._v("\n            –î–æ–±–∞–≤–∏—Ç—å –≤—ã–ø–ª–∞—Ç—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É\n          ")]):t._e()]),t._v(" "),t.canEdit?s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])],1):t._e(),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2):t._e()],1)])],1)},staticRenderFns:[]};var A=s("VU/8")(Y,G,!1,function(t){s("bSEx")},null,null).exports,R={name:"EditExpense",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){document.title=this.$route.meta.title,this.$route.params.id?this.load(this.$route.params.id):this.operations=[this.getEmptyItem()]},data:function(){return{isLoading:!1,loadingError:!1,isSaving:!1,savingError:"",operations:[],time:this.moment().format("HH:mm")}},methods:{getEmptyItem:function(){return{type:"spendoperation",id:null,expenseTypeId:this.spendTypes[0].id,sessionId:this.currentSession.id,officeId:this.currentSession.officeId,datetime:this.moment(),sum:this.getSpendSum(this.spendTypes[0].id),comment:""}},updateSpendSum:function(t){t.sum=this.getSpendSum(t.expenseTypeId)},getSpendSum:function(t){return parseInt(this.spendTypes.filter(function(e){return e.id===t})[0].defaultSum)},addExpense:function(){this.operations.push(this.getEmptyItem())},removeExpense:function(t){var e=this.operations.findIndex(function(e){return"spendoperation"===e.type&&e.type===t.type&&e.id===t.id});this.operations.splice(e,1)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetSpendOperation/",{id:t}).then(function(t){var s=t.data;s.type="spendoperation",s.datetime=e.moment.utc(s.datetime,"DD.MM.YYYY HH:mm").local(),e.operations=[s],e.time=s.datetime.format("HH:mm"),e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.savingError="",this.isSaving=!0;var e=this.operations;for(var s in e)e[s].datetime=this.moment(this.time,"HH:mm").utc();this.operations=e,y.post("EditOperations/",this.operations).then(function(e){t.$store.dispatch("getCurrentSession"),t.isSaving=!1,t.$router.push("/")}).catch(function(e){t.savingError=e,t.isSaving=!1})}},computed:{currentSession:{get:function(){return this.$store.state.currentSession}},spendTypes:{get:function(){return this.$store.state.spendTypes}},canEdit:function(){return!!this.operations[0]&&(!this.operations[0].id||this.operations[0].sessionId===this.currentSession.id)}}},V={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":t.canEdit?"session":"history"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[t.canEdit?s("li",[s("router-link",{attrs:{to:"/Session"}},[t._v("–°–º–µ–Ω–∞")])],1):s("li",[s("router-link",{attrs:{to:"/SessionsHistory"}},[t._v("–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π")])],1)])]),t._v(" "),s("h1",[t._v("–†–∞—Å—Ö–æ–¥")]),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–í—Ä–µ–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.time,expression:"time"}],attrs:{type:"time"},domProps:{value:t.time},on:{input:function(e){e.target.composing||(t.time=e.target.value)}}}),t._v(" "),t._l(t.operations,function(e,n){return s("div",{key:e.id},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–†–∞—Å—Ö–æ–¥ "+t._s(n>0?n+1:""))]),t._v(" "),t.canEdit&&n>0?s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(s){t.removeExpense(e)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")]):t._e()]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.expenseTypeId,label:"name",options:t.spendTypes},on:{input:function(s){t.updateSpendSum(e)}},model:{value:e.expenseTypeId,callback:function(s){t.$set(e,"expenseTypeId",s)},expression:"expense.expenseTypeId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°—É–º–º–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"expense.sum",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.sum},on:{input:function(s){s.target.composing||t.$set(e,"sum",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"expense.comment"}],attrs:{rows:"2"},domProps:{value:e.comment},on:{input:function(s){s.target.composing||t.$set(e,"comment",s.target.value)}}})],1)}),t._v(" "),t.canEdit?s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addExpense}},[t._v("–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥")])]):t._e(),t._v(" "),t.canEdit?s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")])],1):t._e()],2)],1)])],1)},staticRenderFns:[]};var U=s("VU/8")(R,V,!1,function(t){s("u8sv")},null,null).exports,B={name:"EditClient",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",client:this.getEmptyItem()}},methods:{addContact:function(){this.client.contacts||(this.client.contacts=[]),this.client.contacts.push({type:"phone",value:""})},removeContact:function(t){this.client.contacts.splice(t,1)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetClient/",{id:t}).then(function(t){e.client=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e=this.client;null===e.photo&&delete e.photo,null===e.comment&&(e.comment=""),null!==e.contacts&&e.contacts!==[]||delete e.contacts,delete e.operations,y.post("EditClient/",e).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.client=this.getEmptyItem(),this.$router.push("/EditClient")},getEmptyItem:function(){return{id:null,name:"",photo:null,contacts:[{type:"phone",value:""}],comment:""}}},computed:{contactTypes:{get:function(){return this.$store.state.contactTypes}}}},z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"clients"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/Clients"}},[t._v("–ö–ª–∏–µ–Ω—Ç—ã")])],1)])]),t._v(" "),s("h1",[t._v("–ö–ª–∏–µ–Ω—Ç")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ò–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.client.name,expression:"client.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.client.name},on:{input:function(e){e.target.composing||t.$set(t.client,"name",e.target.value)}}}),t._v(" "),t._l(t.client.contacts,function(e,n){return s("div",{key:e},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ö–æ–Ω—Ç–∞–∫—Ç "+t._s(n>0?n+1:""))]),t._v(" "),s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(e){t.removeContact(n)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")])]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.type,label:"name",options:t.contactTypes},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"contact.type"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})],1)}),t._v(" "),s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addContact}},[t._v("\n            –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç\n          ")])]),t._v(" "),s("label",[t._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.client.comment,expression:"client.comment"}],attrs:{rows:"3"},domProps:{value:t.client.comment},on:{input:function(e){e.target.composing||t.$set(t.client,"comment",e.target.value)}}}),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2)],1),t._v(" "),t.client.id>0?s("div",[s("h2",[t._v("–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –∫–ª–∏–µ–Ω—Ç—É")]),t._v(" "),s("div",{staticClass:"table-container"},[s("table",{staticClass:"operations-table hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.client.operations,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getDateTimeFromOperation(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getEmployeeNameFromOperation(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)},domProps:{innerHTML:t._s(t.$store.getters.getOperationContent(e))}})],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getOperationSum(e))+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:t.$store.getters.getOperationLink(e)}},[t._v("\n                  "+t._s(t.$store.getters.getOperationBonus(e))+"\n                ")])],1)])}))])])]):t._e()])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–î–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ú–∞—Å—Ç–µ—Ä")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–£—Å–ª—É–≥–∞ / —Ç–æ–≤–∞—Ä")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°—É–º–º–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è")])])])}]};var q=s("VU/8")(B,z,!1,function(t){s("Nk2v")},null,null).exports,Z={name:"Clients",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadClients()},data:function(){return{q:"",clients:[],isLoading:!1,error:""}},methods:{loadClients:function(){var t=this;this.isLoading=!0,y.post("GetClients/",{q:this.q}).then(function(e){t.clients=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},watch:{clients:function(){""===this.q&&this.$store.commit("updateStore",{name:"clients",value:this.clients})}}},W={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"clients"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–ö–ª–∏–µ–Ω—Ç—ã "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditClient/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.q,expression:"q"}],staticClass:"input-group-field",attrs:{type:"text",placeholder:"–ò–º—è –∏–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç –∫–ª–∏–µ–Ω—Ç–∞"},domProps:{value:t.q},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;e.stopPropagation(),t.loadClients(e)},input:function(e){e.target.composing||(t.q=e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-button"},[s("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.loadClients}},[t._v("–ù–∞–π—Ç–∏")])])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.error?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.error))])]):t._e(),t._v(" "),s("div",{staticClass:"table-container"},[s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.clients,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+e.id}},t._l(e.contacts,function(e,n){return s("div",{key:n},[t._v("\n                    "+t._s(t.$store.getters.getContactTypeName(e.type))+": "+t._s(e.value)+"\n                  ")])}))],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditClient/"+e.id}},[t._v("\n                  "+t._s(e.comment)+"\n                ")])],1)])}))])])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"sticky-header"},[this._v("–ò–º—è")]),this._v(" "),e("th",{staticClass:"sticky-header"},[this._v("–ö–æ–Ω—Ç–∞–∫—Ç—ã")]),this._v(" "),e("th",{staticClass:"sticky-header"},[this._v("–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π")])])])}]};var X=s("VU/8")(Z,W,!1,function(t){s("mpjx")},null,null).exports,J={name:"UploadExpenses",components:{appMenu:f},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},K={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("appMenu",{attrs:{"selected-element":"admin"}}),this._v(" "),e("div",{staticClass:"content"},[e("h1",[this._v("–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤")]),this._v(" "),e("div",{staticClass:"grid-x grid-margin-x align-middle"},[e("div",{staticClass:"cell shrink"},[e("button",{staticClass:"button no-margin",attrs:{type:"button"}},[this._v("–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã")]),this._v(" "),e("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"}})]),this._v(" "),e("div",{staticClass:"cell auto"},[e("router-link",{attrs:{to:""}},[this._v("–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω")])],1)])])],1)},staticRenderFns:[]};var Q=s("VU/8")(J,K,!1,function(t){s("lMXO")},null,null).exports,tt={name:"Offices",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadOffices()},data:function(){return{isLoading:!1,error:""}},methods:{loadOffices:function(){var t=this;this.isLoading=!0,y.post("GetOffices/",{}).then(function(e){t.offices=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{offices:{get:function(){return this.$store.state.offices},set:function(t){this.$store.commit("updateStore",{name:"offices",value:t})}}}},et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è "),s("router-link",{staticClass:"button no-margin",attrs:{to:"/EditOffice/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.offices,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditOffice/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditOffice/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getOfficeStateName(e.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),this._v(" "),e("th",[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var st=s("VU/8")(tt,et,!1,function(t){s("musY")},null,null).exports,nt={name:"EditOffice",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",office:this.getEmptyItem()}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetOffice/",{id:t}).then(function(t){e.office=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditOffice/",this.office).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.office=this.getEmptyItem(),this.$router.push("/EditOffice")},getEmptyItem:function(){return{id:null,name:"",state:"open",city:"null",address:"null",coordinatex:"null",coordinatey:"null"}}},computed:{officeStates:{get:function(){return this.$store.state.officeStates}}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/Offices"}},[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")])],1)])]),t._v(" "),s("h1",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏–µ")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.office.name,expression:"office.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.office.name},on:{input:function(e){e.target.composing||t.$set(t.office,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.office.state,label:"name",options:t.officeStates},model:{value:t.office.state,callback:function(e){t.$set(t.office,"state",e)},expression:"office.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)],1)])],1)},staticRenderFns:[]};var at=s("VU/8")(nt,it,!1,function(t){s("1nGp")},null,null).exports,ot={name:"ServiceTypes",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetServicesPrices/",{}).then(function(e){t.serviceTypes=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{serviceTypes:{get:function(){return this.$store.state.serviceTypes},set:function(t){this.$store.commit("updateStore",{name:"serviceTypes",value:t})}}}},rt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–£—Å–ª—É–≥–∏ "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditServiceType/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.serviceTypes,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditServiceType/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditServiceType/"+e.id}},t._l(e.prices,function(e){return s("div",{key:e},[e.category?s("span",[t._v("\n                    "+t._s(t.$store.getters.getMasterCategoryName(e.category))+": "+t._s(e.price)+"¬†‚ÇΩ\n                  ")]):t._e(),t._v(" "),e.category||0===e.category?t._e():s("span",[t._v("\n                    –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤: "+t._s(e.price)+"¬†‚ÇΩ\n                  ")])])}))],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditServiceType/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getServiceStateName(e.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),this._v(" "),e("th",[this._v("–¶–µ–Ω—ã")]),this._v(" "),e("th",[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var lt=s("VU/8")(ot,rt,!1,function(t){s("MHY7")},null,null).exports,ct={name:"EditServiceType",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",serviceType:this.getEmptyItem()}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetService/",{id:t}).then(function(t){e.serviceType=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditService/",this.serviceType).then(function(e){t.isSaving=!1,t.$router.push({name:"ServiceTypes"})}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.serviceType=this.getEmptyItem(),this.$router.push("/EditServiceType")},getEmptyItem:function(){return{id:null,name:"",prices:this.getMergedPrices(),state:"active"}},getMergedPrices:function(){var t=this,e=[];return this.$store.state.masterCategories.map(function(s){var n=0;try{n=t.serviceType.prices.filter(function(t){return t.category===s.id})[0].price}catch(t){}e.push({category:s.id,price:parseInt(n)})}),e}},computed:{serviceStates:{get:function(){return this.$store.state.serviceStates}}}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/ServiceTypes"}},[t._v("–£—Å–ª—É–≥–∏")])],1)])]),t._v(" "),s("h1",[t._v("–¢–∏–ø —É—Å–ª—É–≥–∏")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.serviceType.name,expression:"serviceType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.serviceType.name},on:{input:function(e){e.target.composing||t.$set(t.serviceType,"name",e.target.value)}}}),t._v(" "),t._l(t.serviceType.prices,function(e){return s("div",{key:e},[s("label",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Å—Ç–µ—Ä–∞: "+t._s(t.$store.getters.getMasterCategoryName(e.category)))]),t._v(" "),s("label",[t._v("–¶–µ–Ω–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.price,expression:"price.price",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.price},on:{input:function(s){s.target.composing||t.$set(e,"price",t._n(s.target.value))},blur:function(e){t.$forceUpdate()}}})])}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.serviceType.state,label:"name",options:t.serviceStates},model:{value:t.serviceType.state,callback:function(e){t.$set(t.serviceType,"state",e)},expression:"serviceType.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2)],1)])],1)},staticRenderFns:[]};var dt=s("VU/8")(ct,ut,!1,function(t){s("7W36")},null,null).exports,mt={name:"GoodsTypes",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetGoods/",{}).then(function(e){t.goodsTypes=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{goodsTypes:{get:function(){return this.$store.state.goodsTypes},set:function(t){this.$store.commit("updateStore",{name:"goodsTypes",value:t})}}}},vt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–¢–æ–≤–∞—Ä—ã "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditGoodsType/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"table-container"},[s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.goodsTypes,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+e.id}},[t._v("\n                  "+t._s(e.name)+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+e.id}},[t._v("\n                  "+t._s(e.price)+"\n                ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditGoodsType/"+e.id}},[t._v("\n                  "+t._s(t.$store.getters.getGoodsStateName(e.state))+"\n                ")])],1)])}))])])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"sticky-header"},[this._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),this._v(" "),e("th",{staticClass:"sticky-header"},[this._v("–¶–µ–Ω–∞")]),this._v(" "),e("th",{staticClass:"sticky-header"},[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var pt=s("VU/8")(mt,vt,!1,function(t){s("/6eh")},null,null).exports,_t={name:"EditGoodsType",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",goodsType:this.getEmptyItem()}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetGood/",{id:t}).then(function(t){e.goodsType=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditGood/",this.goodsType).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.goodsType=this.getEmptyItem(),this.$router.push("/EditGoodsType")},getEmptyItem:function(){return{id:null,name:"",price:"",state:"active"}}},computed:{goodsStates:{get:function(){return this.$store.state.goodsStates}}}},ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/GoodsTypes"}},[t._v("–¢–æ–≤–∞—Ä—ã")])],1)])]),t._v(" "),s("h1",[t._v("–¢–æ–≤–∞—Ä")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsType.name,expression:"goodsType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.goodsType.name},on:{input:function(e){e.target.composing||t.$set(t.goodsType,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–¶–µ–Ω–∞")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsType.price,expression:"goodsType.price"}],attrs:{type:"number",autofocus:""},domProps:{value:t.goodsType.price},on:{input:function(e){e.target.composing||t.$set(t.goodsType,"price",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.goodsType.state,label:"name",options:t.goodsStates},model:{value:t.goodsType.state,callback:function(e){t.$set(t.goodsType,"state",e)},expression:"goodsType.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)],1)])],1)},staticRenderFns:[]};var yt=s("VU/8")(_t,ft,!1,function(t){s("4BPl")},null,null).exports,ht={name:"ExpenseTypes",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetSpendTypes/",{}).then(function(e){t.spendTypes=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{spendTypes:{get:function(){return this.$store.state.spendTypes},set:function(t){this.$store.commit("updateStore",{name:"spendTypes",value:t})}}}},gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–¢–∏–ø—ã —Ä–∞—Å—Ö–æ–¥–æ–≤ "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditExpenseType/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.spendTypes,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+e.id}},[t._v("\n                "+t._s(e.defaultSum)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditExpenseType/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getSpendTypeStateName(e.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),this._v(" "),e("th",[this._v("–°—É–º–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")]),this._v(" "),e("th",[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var Ct=s("VU/8")(ht,gt,!1,function(t){s("yID9")},null,null).exports,bt={name:"EditExpenseType",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",spendType:this.getEmptyItem()}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetSpendType/",{id:t}).then(function(t){e.spendType=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditSpendType/",this.spendType).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.spendType=this.getEmptyItem(),this.$router.push("/EditSpendType")},getEmptyItem:function(){return{id:null,name:"",defaultSum:0,state:"active"}}},computed:{spendTypeStates:{get:function(){return this.$store.state.spendTypeStates}}}},Et={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/ExpenseTypes"}},[t._v("–¢–∏–ø—ã —Ä–∞—Å—Ö–æ–¥–æ–≤")])],1)])]),t._v(" "),s("h1",[t._v("–¢–∏–ø —Ä–∞—Å—Ö–æ–¥–∞")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.spendType.name,expression:"spendType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.spendType.name},on:{input:function(e){e.target.composing||t.$set(t.spendType,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.spendType.defaultSum,expression:"spendType.defaultSum"}],attrs:{type:"number",autofocus:""},domProps:{value:t.spendType.defaultSum},on:{input:function(e){e.target.composing||t.$set(t.spendType,"defaultSum",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.spendType.state,label:"name",options:t.spendTypeStates},model:{value:t.spendType.state,callback:function(e){t.$set(t.spendType,"state",e)},expression:"spendType.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)],1)])],1)},staticRenderFns:[]};var St=s("VU/8")(bt,Et,!1,function(t){s("AeFz")},null,null).exports,kt={name:"EmployeePaymentTypes",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetEmployeePaymentTypes/",{}).then(function(e){t.employeePaymentTypes=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{employeePaymentTypes:{get:function(){return this.$store.state.employeePaymentTypes},set:function(t){this.$store.commit("updateStore",{name:"employeePaymentTypes",value:t})}}}},It={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–¢–∏–ø—ã –≤—ã–ø–ª–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditEmployeePaymentType/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.employeePaymentTypes,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+e.id}},[t._v("\n                "+t._s(e.defaultSum)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getEmployeePaymentTypeTypeName(e.type))+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getEmployeePaymentStateName(e.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),this._v(" "),e("th",[this._v("–°—É–º–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")]),this._v(" "),e("th",[this._v("–¢–∏–ø")]),this._v(" "),e("th",[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var Tt=s("VU/8")(kt,It,!1,function(t){s("TBX2")},null,null).exports,$t={name:"EditEmployeePaymentType",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},created:function(){document.title=this.$route.meta.title,this.$route.params.id?this.load(this.$route.params.id):this.employeePaymentType=this.getEmptyItem()},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",employeePaymentType:{}}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetEmployeePaymentType/",{id:t}).then(function(t){e.employeePaymentType=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditEmployeePaymentType/",this.employeePaymentType).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.employeePaymentType=this.getEmptyItem(),this.$router.push("/EditEmployeePaymentType")},getEmptyItem:function(){return{id:null,name:"",defaultSum:0,type:this.employeePaymentTypeTypes[0].id,state:"active"}}},computed:{employeePaymentTypeStates:{get:function(){return this.$store.state.employeePaymentTypeStates}},employeePaymentTypeTypes:{get:function(){return this.$store.state.employeePaymentTypeTypes}}}},xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/EmployeePaymentTypes"}},[t._v("–¢–∏–ø—ã –≤—ã–ø–ª–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º")])],1)])]),t._v(" "),s("h1",[t._v("–¢–∏–ø –≤—ã–ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employeePaymentType.name,expression:"employeePaymentType.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.employeePaymentType.name},on:{input:function(e){e.target.composing||t.$set(t.employeePaymentType,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—É–º–º–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employeePaymentType.defaultSum,expression:"employeePaymentType.defaultSum"}],attrs:{type:"number",autofocus:""},domProps:{value:t.employeePaymentType.defaultSum},on:{input:function(e){e.target.composing||t.$set(t.employeePaymentType,"defaultSum",e.target.value)}}}),t._v(" "),s("label",[t._v("–¢–∏–ø")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.employeePaymentType.type,label:"name",options:t.employeePaymentTypeTypes},model:{value:t.employeePaymentType.type,callback:function(e){t.$set(t.employeePaymentType,"type",e)},expression:"employeePaymentType.type"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.employeePaymentType.state,label:"name",options:t.employeePaymentTypeStates},model:{value:t.employeePaymentType.state,callback:function(e){t.$set(t.employeePaymentType,"state",e)},expression:"employeePaymentType.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)],1)])],1)},staticRenderFns:[]};var Lt=s("VU/8")($t,xt,!1,function(t){s("Mrzp")},null,null).exports,wt={name:"Employees",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetEmployees/",{}).then(function(e){t.employees=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{employees:{get:function(){return this.$store.state.employees},set:function(t){this.$store.commit("updateStore",{name:"employees",value:t})}}}},Pt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditEmployee/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.employees,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployee/"+e.id}},[e.photo?s("img",{attrs:{src:"url("+e.photo+")"}}):t._e(),t._v(" "),e.photo?t._e():s("div",[t._v(t._s(t.$store.getters.getUserPicturePlaceholderText(e.name)))]),t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployee/"+e.id}},t._l(e.roles,function(e){return s("div",{key:e},[t._v("\n                    "+t._s(t.$store.getters.getUserRoleName(e))+"\n                ")])}))],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),this._v(" "),e("th",[this._v("–†–æ–ª–∏")])])])}]};var Mt=s("VU/8")(wt,Pt,!1,function(t){s("0XER")},null,null).exports,Ot={name:"EditEmployee",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",employee:this.getEmptyItem()}},methods:{addContact:function(){this.employee.contacts||(this.employee.contacts=[]),this.employee.contacts.push({type:"phone",value:""})},removeContact:function(t){this.employee.contacts.splice(t,1)},load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetEmployee/",{id:t}).then(function(t){e.employee=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="";var e=this.employee;e.contacts&&0===e.contacts.length&&delete e.contacts,e.photo||delete e.photo,y.post("EditEmployee/",e).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.employee=this.getEmptyItem(),this.$router.push("/EditEmployee/")},getEmptyItem:function(){return{id:null,name:"",login:"",password:"",contacts:[],roles:["master"],photo:null,salary:0,servicePercent:.1,goodsPercent:.1,categoryId:0,state:"working"}}},computed:{userRoles:{get:function(){return this.$store.state.userRoles}},employeeStates:{get:function(){return this.$store.state.employeeStates}},contactTypes:{get:function(){return this.$store.state.contactTypes}},masterCategories:{get:function(){return this.$store.state.masterCategories}}}},Dt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/Employees"}},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏")])],1)])]),t._v(" "),s("h1",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ò–º—è")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.name,expression:"employee.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.employee.name},on:{input:function(e){e.target.composing||t.$set(t.employee,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–§–æ—Ç–æ")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"}},[t._v("–í—ã–±—Ä–∞—Ç—å")]),t._v(" "),s("input",{ref:"photoSelector",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"}}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.employee.state,label:"name",options:t.employeeStates},model:{value:t.employee.state,callback:function(e){t.$set(t.employee,"state",e)},expression:"employee.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–†–æ–ª–∏")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.employee.roles,label:"name",options:t.userRoles},model:{value:t.employee.roles,callback:function(e){t.$set(t.employee,"roles",e)},expression:"employee.roles"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Å—Ç–µ—Ä–∞")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.employee.categoryId,label:"name",options:t.masterCategories},model:{value:t.employee.categoryId,callback:function(e){t.$set(t.employee,"categoryId",e)},expression:"employee.categoryId"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("label",[t._v("–õ–æ–≥–∏–Ω")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.login,expression:"employee.login"}],attrs:{type:"text"},domProps:{value:t.employee.login},on:{input:function(e){e.target.composing||t.$set(t.employee,"login",e.target.value)}}}),t._v(" "),s("label",[t._v("–ü–∞—Ä–æ–ª—å")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.password,expression:"employee.password"}],attrs:{type:"password"},domProps:{value:t.employee.password},on:{input:function(e){e.target.composing||t.$set(t.employee,"password",e.target.value)}}}),t._v(" "),t._l(t.employee.contacts,function(e,n){return s("div",{key:e},[s("label",{staticClass:"grid-x",on:{click:function(t){t.preventDefault()}}},[s("span",{staticClass:"cell auto"},[t._v("–ö–æ–Ω—Ç–∞–∫—Ç "+t._s(n>0?n+1:""))]),t._v(" "),s("button",{staticClass:"button clear small cell shrink no-margin",attrs:{type:"button"},on:{click:function(e){t.removeContact(n)}}},[t._v("\n              –£–¥–∞–ª–∏—Ç—å\n            ")])]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:e.type,label:"name",options:t.contactTypes},model:{value:e.type,callback:function(s){t.$set(e,"type",s)},expression:"contact.type"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"contact.value"}],attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}})],1)}),t._v(" "),s("div",[s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.addContact}},[t._v("\n            –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç\n          ")])]),t._v(" "),s("label",[t._v("–û–∫–ª–∞–¥")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.salary,expression:"employee.salary"}],attrs:{type:"number"},domProps:{value:t.employee.salary},on:{input:function(e){e.target.composing||t.$set(t.employee,"salary",e.target.value)}}}),t._v(" "),s("label",[t._v("% –ø—Ä–µ–º–∏–∏ –æ—Ç —É—Å–ª—É–≥")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.servicePercent,expression:"employee.servicePercent"}],attrs:{type:"number"},domProps:{value:t.employee.servicePercent},on:{input:function(e){e.target.composing||t.$set(t.employee,"servicePercent",e.target.value)}}}),t._v(" "),s("label",[t._v("% –ø—Ä–µ–º–∏–∏ –æ—Ç —Ç–æ–≤–∞—Ä–æ–≤")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.goodsPercent,expression:"employee.goodsPercent"}],attrs:{type:"number"},domProps:{value:t.employee.goodsPercent},on:{input:function(e){e.target.composing||t.$set(t.employee,"goodsPercent",e.target.value)}}}),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],2)],1)])],1)},staticRenderFns:[]};var jt=s("VU/8")(Ot,Dt,!1,function(t){s("FZO8")},null,null).exports,Nt={name:"MasterTypes",components:{appMenu:f,VueElementLoading:a.a},mounted:function(){document.title=this.$route.meta.title,this.loadData()},data:function(){return{isLoading:!1,error:""}},methods:{loadData:function(){var t=this;this.isLoading=!0,y.post("GetBarberCategories/",{}).then(function(e){t.masterCategories=e.data,t.isLoading=!1}).catch(function(e){t.error=e,t.isLoading=!1})}},computed:{masterCategories:{get:function(){return this.$store.state.masterCategories},set:function(t){this.$store.commit("updateStore",{name:"masterCategories",value:t})}}}},Ft={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤ "),s("router-link",{staticClass:"button no-margion",attrs:{to:"/EditMasterType/"}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")])],1),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.masterCategories,function(e){return s("tr",{key:e.id},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditMasterType/"+e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:"/EditEmployeePaymentType/"+e.id}},[t._v("\n                "+t._s(t.$store.getters.getMasterCategoryStateName(e.state))+"\n              ")])],1)])}))])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è")]),this._v(" "),e("th",[this._v("–°—Ç–∞—Ç—É—Å")])])])}]};var Ht=s("VU/8")(Nt,Ft,!1,function(t){s("LbxH")},null,null).exports,Yt={name:"EditMasterType",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.$route.params.id&&this.load(this.$route.params.id)},data:function(){return{isLoading:!1,isSaving:!1,loadingError:"",savingError:"",masterCategory:this.getEmptyItem()}},methods:{load:function(t){var e=this;this.isLoading=!0,this.loadingError="",y.post("GetBarberCategory/",{id:t}).then(function(t){e.masterCategory=t.data,e.isLoading=!1}).catch(function(t){e.loadingError=t,e.isLoading=!1})},save:function(){var t=this;this.isSaving=!0,this.savingError="",y.post("EditBarberCategory/",this.masterCategory).then(function(e){t.isSaving=!1}).catch(function(e){t.savingError=e,t.isSaving=!1})},saveAndAddMore:function(){this.save(),this.masterCategory=this.getEmptyItem(),this.$router.push("/EditMasterType")},getEmptyItem:function(){return{id:null,name:"",state:"active"}}},computed:{masterCategoryStates:{get:function(){return this.$store.state.masterCategoryStates}}}},Gt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"admin"}}),t._v(" "),s("div",{staticClass:"content"},[s("nav",[s("ul",{staticClass:"breadcrumbs"},[s("li",[s("router-link",{attrs:{to:"/MasterTypes"}},[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤")])],1)])]),t._v(" "),s("h1",[t._v("–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Å—Ç–µ—Ä–∞")]),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),s("div",{staticClass:"grid-x"},[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),s("div",{staticClass:"cell large-6"},[s("label",[t._v("–ù–∞–∑–≤–∞–Ω–∏–µ")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.masterCategory.name,expression:"masterCategory.name"}],attrs:{type:"text",autofocus:""},domProps:{value:t.masterCategory.name},on:{input:function(e){e.target.composing||t.$set(t.masterCategory,"name",e.target.value)}}}),t._v(" "),s("label",[t._v("–°—Ç–∞—Ç—É—Å")]),t._v(" "),s("v-select",{attrs:{clearable:!1,reduce:function(t){return t.id},value:t.masterCategory.state,label:"name",options:t.masterCategoryStates},model:{value:t.masterCategory.state,callback:function(e){t.$set(t.masterCategory,"state",e)},expression:"masterCategory.state"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isSaving,color:"#1C457D"}}),t._v(" "),s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.save}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")]),t._v(" "),s("button",{staticClass:"button secondary",attrs:{type:"button"},on:{click:t.saveAndAddMore}},[t._v("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –µ—â—ë")])],1),t._v(" "),t.savingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.savingError))])]):t._e()],1)],1)])],1)},staticRenderFns:[]};var At=s("VU/8")(Yt,Gt,!1,function(t){s("kxPN")},null,null).exports,Rt=s("lHA8"),Vt=s.n(Rt),Ut={name:"EmployeesReport",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.load()},data:function(){return{period:this.moment().format("MM YYYY"),employeeIds:[],officeIds:[],isLoading:!1,loadingError:"",summary:null,byOffices:[],byEmployees:[],byOfficesAndEmployees:[]}},methods:{load:function(){var t=this;this.isLoading=!0,this.loadingError="";var e={period:this.moment(this.period,"MM YYYY").format("DD.MM.YYYY")};this.employeeIds&&this.employeeIds.length>0&&(e.employeeIds=this.employeeIds),this.officeIds&&this.officeIds.length>0&&(e.officeIds=this.officeIds),y.post("GenerateEmployeeReport/",e).then(function(e){if(t.summary=e.data.summary[0],!e.data.byOfficeAndEmployee.warning)for(var s in e.data.byOffices){var n=e.data.byOffices[s];n.employees=e.data.byOfficeAndEmployee.filter(function(t){return t.officeId===n.officeId}),n.detailsShown=!1,n.uniqueEmployeesCount=new Vt.a(n.employees.map(function(t){return t.employeeId})).size}t.byOffices=e.data.byOffices,t.byEmployees=e.data.byEmployees,t.byOfficesAndEmployees=e.data.byOfficeAndEmployee,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.summary=null,t.byOffices=[],t.byEmployees=[],t.byOfficesAndEmployees=[],t.isLoading=!1})},inclineWord:function(t,e,s,n){if(t){var i=t.toString()[t.toString().length-1];if(["5","6","7","8","9","0"].includes(i)||t%100>10&&t%100<20)return n;if(["2","3","4"].includes(i))return s;if("1"===i)return e}return e},showOfficeDetails:function(t){t.detailsShown=!t.detailsShown}},computed:{offices:{get:function(){return this.$store.state.offices}},employees:{get:function(){return this.$store.state.employees}},periods:function(){for(var t=[],e=0;e<=12;e++)t.push(this.moment().subtract(e,"months").format("MM YYYY"));return t},uniqueEmployeesCount:function(){if(this.byEmployees&&this.byEmployees.length&&!this.byEmployees.warning&&!this.byEmployees.error)return new Vt.a(this.byEmployees.map(function(t){return t.employeeId})).size}}},Bt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"reports"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–û—Ç—á—ë—Ç –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º")]),t._v(" "),s("div",{staticClass:"grid-x grid-padding-x no-padding-small"},[s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–ú–µ—Å—è—Ü")]),t._v(" "),s("v-select",{attrs:{clearable:!1,value:t.period,label:"name",options:t.periods},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.officeIds,label:"name",options:t.offices},model:{value:t.officeIds,callback:function(e){t.officeIds=e},expression:"officeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.employeeIds,label:"name",options:t.employees},model:{value:t.employeeIds,callback:function(e){t.employeeIds=e},expression:"employeeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell small-12"},[s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.load}},[t._v("–ü–æ–∫–∞–∑–∞—Ç—å")])])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&(!t.summary.totalsalary||t.byOffices.length&&t.byOffices.warning)?s("div",[t._v("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º")]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&t.summary.totalsalary?s("div",[s("h2",[t._v("–ò—Ç–æ–≥–æ")]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.uniqueEmployeesCount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(t.uniqueEmployeesCount,"–°–æ—Ç—Ä—É–¥–Ω–∏–∫","–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞","–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalsalary||0))]),t._v(" "),s("label",[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –∑–∞–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalpaidsalary||0))]),t._v(" "),s("label",[t._v("–í—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalpenalty||0))]),t._v(" "),s("label",[t._v("–®—Ç—Ä–∞—Ñ—ã, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalunpaidsalary||0))]),t._v(" "),s("label",[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s((t.summary.totalgoodsbonus||0)+(t.summary.totalservicebonus||0)))]),t._v(" "),s("label",[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalservicebonus||0))]),t._v(" "),s("label",[t._v("–ü—Ä–µ–º–∏—è (—É—Å–ª—É–≥–∏), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalgoodsbonus||0))]),t._v(" "),s("label",[t._v("–ü—Ä–µ–º–∏—è (—Ç–æ–≤–∞—Ä—ã), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalpaidbonus||0))]),t._v(" "),s("label",[t._v("–í—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalunpaidbonus||0))]),t._v(" "),s("label",[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.estimatedworkhours||0))]),t._v(" "),s("label",[t._v("–†–∞–±–æ—á–∏–µ —á–∞—Å—ã –≤ –º–µ—Å—è—Ü–µ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.total_time||0))]),t._v(" "),s("label",[t._v("–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—ã")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s((100*(t.summary.meanworkload||0)).toString()+"%"))]),t._v(" "),s("label",[t._v("% –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤")])])]),t._v(" "),s("div",{staticClass:"table-container margin-bottom-30px"},[s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.byEmployees,function(e){return s("tr",{key:e.employeeId},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalsalary||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalpenalty||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalpaidsalary||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalunpaidsalary||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s((e.totalgoodsbonus||0)+(e.totalservicebonus||0)||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalservicebonus||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalgoodsbonus||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalpaidbonus||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.totalunpaidbonus||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.estimatedworkhours||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s(e.total_time||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                    "+t._s((100*(e.meanworkload||0)).toString()+"%")+"\n                  ")])],1)])}))])])]):t._e(),t._v(" "),t.loadingError||t.isLoading||!t.byOffices||!t.byOffices.length||t.byOffices.warning?t._e():s("div",[s("h2",[t._v("–ü–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è–º")]),t._v(" "),t._l(t.byOffices,function(e){return t.isLoading?t._e():s("div",{key:e.id},[s("h3",[t._v(t._s(t.$store.getters.getOfficeName(e.officeId)))]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.uniqueEmployeesCount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(e.uniqueEmployeesCount,"–°–æ—Ç—Ä—É–¥–Ω–∏–∫","–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞","–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalsalary||0))]),t._v(" "),s("label",[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –∑–∞–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalpaidsalary||0))]),t._v(" "),s("label",[t._v("–í—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalpenalty||0))]),t._v(" "),s("label",[t._v("–®—Ç—Ä–∞—Ñ—ã, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalunpaidsalary||0))]),t._v(" "),s("label",[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s((e.totalgoodsbonus||0)+(e.totalservicebonus||0)||0))]),t._v(" "),s("label",[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalservicebonus||0))]),t._v(" "),s("label",[t._v("–ü—Ä–µ–º–∏—è (—É—Å–ª—É–≥–∏), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalgoodsbonus||0))]),t._v(" "),s("label",[t._v("–ü—Ä–µ–º–∏—è (—Ç–æ–≤–∞—Ä—ã), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalpaidbonus||0))]),t._v(" "),s("label",[t._v("–í—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalunpaidbonus||0))]),t._v(" "),s("label",[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.estimatedworkhours||0))]),t._v(" "),s("label",[t._v("–†–∞–±–æ—á–∏–µ —á–∞—Å—ã –≤ –º–µ—Å—è—Ü–µ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.total_time||0))]),t._v(" "),s("label",[t._v("–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—ã")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s((100*(e.meanworkload||0)).toString()+"%"))]),t._v(" "),s("label",[t._v("% –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤")])])]),t._v(" "),s("div",[s("button",{staticClass:"button secondary small",on:{click:function(s){t.showOfficeDetails(e)}}},[t._v("\n              "+t._s(e.detailsShown?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –æ—Ç–¥–µ–ª–µ–Ω–∏—è")+"\n            ")])]),t._v(" "),e.detailsShown?s("div",{staticClass:"table-container margin-bottom-30px"},[s("table",{staticClass:"hover"},[t._m(1,!0),t._v(" "),s("tbody",t._l(e.employees,function(e){return s("tr",{key:e.employeeId},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalsalary||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalpenalty||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalpaidsalary||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalunpaidsalary||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s((e.totalgoodsbonus||0)+(e.totalservicebonus||0)||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalservicebonus||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalgoodsbonus||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalpaidbonus||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.totalunpaidbonus||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.estimatedworkhours||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s(e.total_time||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditEmployee/+parseInt(e.employeeId)}},[t._v("\n                      "+t._s((100*(e.meanworkload||0)).toString()+"%")+"\n                    ")])],1)])}))])]):t._e()])})],2)],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –∑–∞–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–®—Ç—Ä–∞—Ñ—ã")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è (—É—Å–ª—É–≥–∏)")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è (—Ç–æ–≤–∞—Ä—ã)")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–†–∞–±–æ—á–∏–µ —á–∞—Å—ã –≤ –º–µ—Å—è—Ü–µ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—ã")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("% –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –∑–∞–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–®—Ç—Ä–∞—Ñ—ã")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞—á–∏—Å–ª–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è (—É—Å–ª—É–≥–∏)")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–º–∏—è (—Ç–æ–≤–∞—Ä—ã)")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–µ–≤—ã–ø–ª–∞—á–µ–Ω–Ω–∞—è –ø—Ä–µ–º–∏—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–†–∞–±–æ—á–∏–µ —á–∞—Å—ã –≤ –º–µ—Å—è—Ü–µ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–û—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–∞—Å—ã")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("% –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤")])])])}]};var zt=s("VU/8")(Ut,Bt,!1,function(t){s("DozP")},null,null).exports,qt={name:"ClientsReport",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.load()},data:function(){return{period:this.moment().format("MM YYYY"),clientIds:[],officeIds:[],isLoading:!1,loadingError:"",summary:null,byOffices:[],byClients:[],byOfficesAndClients:[]}},methods:{load:function(){var t=this;this.isLoading=!0,this.loadingError="";var e={period:this.moment(this.period,"MM YYYY").format("DD.MM.YYYY")};this.clientIds&&this.clientIds.length>0&&(e.clientIds=this.clientIds),this.officeIds&&this.officeIds.length>0&&(e.officeIds=this.officeIds),y.post("GenerateClientReport/",e).then(function(e){if(t.summary=e.data.summary[0],!e.data.byOfficeAndClient.warning)for(var s in e.data.byOffices){var n=e.data.byOffices[s];n.clients=e.data.byOfficeAndClient.filter(function(t){return t.officeId===n.officeId}),n.detailsShown=!1,n.uniqueClientsCount=new Vt.a(n.clients.map(function(t){return t.clientId})).size}t.byOffices=e.data.byOffices,t.byClients=e.data.byClients,t.byOfficesAndClients=e.data.byOfficeAndClient,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.summary=null,t.byOffices=[],t.byClients=[],t.byOfficesAndClients=[],t.isLoading=!1})},inclineWord:function(t,e,s,n){if(t){var i=t.toString()[t.toString().length-1];if(["5","6","7","8","9","0"].includes(i)||t%100>10&&t%100<20)return n;if(["2","3","4"].includes(i))return s;if("1"===i)return e}return e},showOfficeDetails:function(t){t.detailsShown=!t.detailsShown},getLoyalityDescription:function(t){switch(t){case"lost":return'<span title="–ù–µ –ø–æ—Å–µ—â–∞–ª 3 –º–µ—Å—è—Ü–∞">–ü–æ—Ç–µ—Ä—è–Ω</span>';case"likely lost":return'<span title="–ù–µ –ø–æ—Å–µ—â–∞–ª –±–æ–ª–µ–µ 40 –¥–Ω–µ–π">–í–µ—Ä–æ—è—Ç–Ω–æ –ø–æ—Ç–µ—Ä—è–Ω</span>';case"loyal":return'<span title="–ë–æ–ª–µ–µ 2 –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞ 3 –º–µ—Å—è—Ü–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–µ –±–æ–ª–µ–µ 40 –¥–Ω–µ–π –Ω–∞–∑–∞–¥">–õ–æ—è–ª–µ–Ω</span>';case"likely loyal":return'<span title="–ë–æ–ª–µ–µ 1 –ø–æ—Å–µ—â–µ–Ω–∏—è –∑–∞ 3 –º–µ—Å—è—Ü–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–µ –±–æ–ª–µ–µ 40 –¥–Ω–µ–π –Ω–∞–∑–∞–¥">–í–µ—Ä–æ—è—Ç–Ω–æ –ª–æ—è–ª–µ–Ω</span>';case"ambivalent":return"–ü–æ–∫–∞ –Ω–µ —è—Å–Ω–æ"}return t}},computed:{offices:{get:function(){return this.$store.state.offices}},clients:{get:function(){return this.$store.state.clients}},periods:function(){for(var t=[],e=0;e<=12;e++)t.push(this.moment().subtract(e,"months").format("MM YYYY"));return t},uniqueClientsCount:function(){if(this.byClients&&this.byClients.length&&!this.byClients.warning&&!this.byClients.error)return new Vt.a(this.byClients.map(function(t){return t.clientId})).size}}},Zt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"reports"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–û—Ç—á—ë—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º")]),t._v(" "),s("div",{staticClass:"grid-x grid-padding-x no-padding-small"},[s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–ú–µ—Å—è—Ü")]),t._v(" "),s("v-select",{attrs:{clearable:!1,value:t.period,label:"name",options:t.periods},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.officeIds,label:"name",options:t.offices},model:{value:t.officeIds,callback:function(e){t.officeIds=e},expression:"officeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-4 small-12"},[s("label",[t._v("–ö–ª–∏–µ–Ω—Ç—ã")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.clientIds,"get-option-label":t.$store.getters.getClientDescription,options:t.clients},model:{value:t.clientIds,callback:function(e){t.clientIds=e},expression:"clientIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell small-12"},[s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.load}},[t._v("–ü–æ–∫–∞–∑–∞—Ç—å")])])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&(!t.summary.totalvisitsduringperiod||t.byOffices.length&&t.byOffices.warning)?s("div",[t._v("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º")]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&t.summary.totalvisitsduringperiod?s("div",[s("h2",[t._v("–ò—Ç–æ–≥–æ")]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.uniqueClientsCount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(t.uniqueClientsCount,"–ö–ª–∏–µ–Ω—Ç","–ö–ª–∏–µ–Ω—Ç–∞","–ö–ª–∏–µ–Ω—Ç–æ–≤")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalvisitsduringperiod||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(t.summary.totalvisitsduringperiod,"–ü–æ—Å–µ—â–µ–Ω–∏–µ","–ü–æ—Å–µ—â–µ–Ω–∏—è","–ü–æ—Å–µ—â–µ–Ω–∏–π")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalsum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalservicesum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†—É—Å–ª—É–≥, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalgoodssum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†–ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalcash||0))]),t._v(" "),s("label",[t._v("–ù–∞–ª–∏—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalcashless||0))]),t._v(" "),s("label",[t._v("–ë–µ–∑–Ω–∞–ª, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totaldiscount||0))]),t._v(" "),s("label",[t._v("–°–∫–∏–¥–∫–∏, ‚ÇΩ")])])]),t._v(" "),s("div",{staticClass:"table-container margin-bottom-30px"},[s("table",{staticClass:"hover"},[t._m(0),t._v(" "),s("tbody",t._l(t.byClients,function(e){return s("tr",{key:e.clientId},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalsum||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalservicesum||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalgoodssum||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalcash||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalcashless||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totaldiscount||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalvisitsduringperiod)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},t._l(e.mastervisits,function(e){return s("div",{key:e},[s("div",[s("router-link",{attrs:{to:"/EditEmployee/"+e.masterId.toString()}},[t._v(t._s(e.name))])],1),t._v(" "),s("div",{staticClass:"margin-bottom-10px"},[t._v(t._s(e.count||0)+" "+t._s(t.inclineWord(e.count,"—Ä–∞–∑","—Ä–∞–∑–∞","—Ä–∞–∑")))])])}))],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.totalvisits)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.lastndaysvisitscount||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.lastvisitdatetime||0)+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                    "+t._s(e.newclient?"–î–∞":"–ù–µ—Ç")+"\n                  ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)},domProps:{innerHTML:t._s(t.getLoyalityDescription(e.loyalty))}})],1)])}))])])]):t._e(),t._v(" "),t.loadingError||t.isLoading||!t.byOffices||!t.byOffices.length||t.byOffices.warning?t._e():s("div",[s("h2",[t._v("–ü–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è–º")]),t._v(" "),t._l(t.byOffices,function(e){return t.isLoading?t._e():s("div",{key:e.id},[s("h3",[t._v(t._s(t.$store.getters.getOfficeName(e.officeId)))]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.uniqueClientsCount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(e.uniqueClientsCount,"–ö–ª–∏–µ–Ω—Ç","–ö–ª–∏–µ–Ω—Ç–∞","–ö–ª–∏–µ–Ω—Ç–æ–≤")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalvisitsduringperiod||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(e.totalvisitsduringperiod,"–ü–æ—Å–µ—â–µ–Ω–∏–µ","–ü–æ—Å–µ—â–µ–Ω–∏—è","–ü–æ—Å–µ—â–µ–Ω–∏–π")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalsum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalservicesum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†—É—Å–ª—É–≥, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalgoodssum||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†–ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalcash||0))]),t._v(" "),s("label",[t._v("–ù–∞–ª–∏—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalcashless||0))]),t._v(" "),s("label",[t._v("–ë–µ–∑–Ω–∞–ª, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-auto"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totaldiscount||0))]),t._v(" "),s("label",[t._v("–°–∫–∏–¥–∫–∏, ‚ÇΩ")])])]),t._v(" "),s("div",[s("button",{staticClass:"button secondary small",on:{click:function(s){t.showOfficeDetails(e)}}},[t._v("\n              "+t._s(e.detailsShown?"–°–∫—Ä—ã—Ç—å":"–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º –æ—Ç–¥–µ–ª–µ–Ω–∏—è")+"\n            ")])]),t._v(" "),e.detailsShown?s("div",{staticClass:"table-container margin-bottom-30px"},[s("table",{staticClass:"hover"},[t._m(1,!0),t._v(" "),s("tbody",t._l(e.clients,function(e){return s("tr",{key:e.clientId},[s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.name||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalsum||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalservicesum||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalgoodssum||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalcash||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalcashless||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totaldiscount||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalvisitsduringperiod)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},t._l(e.mastervisits,function(e){return s("div",{key:e},[s("div",[s("router-link",{attrs:{to:"/EditEmployee/"+e.masterId.toString()}},[t._v(t._s(e.name))])],1),t._v(" "),s("div",{staticClass:"margin-bottom-10px"},[t._v(t._s(e.count||0)+" "+t._s(t.inclineWord(e.count,"—Ä–∞–∑","—Ä–∞–∑–∞","—Ä–∞–∑")))])])}))],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.totalvisits)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.lastndaysvisitscount||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.lastvisitdatetime||0)+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)}},[t._v("\n                      "+t._s(e.newclient?"–î–∞":"–ù–µ—Ç")+"\n                    ")])],1),t._v(" "),s("td",[s("router-link",{staticClass:"table-link",attrs:{to:/EditClient/+parseInt(e.clientId)},domProps:{innerHTML:t._s(t.getLoyalityDescription(e.loyalty))}})],1)])}))])]):t._e()])})],2)],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–ö–ª–∏–µ–Ω—Ç")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†—É—Å–ª—É–≥")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†–ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞–ª–∏—á–∫–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ë–µ–∑–Ω–∞–ª")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°–∫–∏–¥–∫–∏")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è¬†–∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤ –∑–∞¬†–≤—Å—ë –≤—Ä–µ–º—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è –≤—Å–µ–≥–æ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è¬†–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6¬†–º–µ—Å.")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–õ–æ—è–ª—å–Ω–æ—Å—Ç—å")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"sticky-header"},[t._v("–ö–ª–∏–µ–Ω—Ç")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†—É—Å–ª—É–≥")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–í—ã—Ä—É—á–∫–∞ –æ—Ç¬†–ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–∞–ª–∏—á–∫–∞")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ë–µ–∑–Ω–∞–ª")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–°–∫–∏–¥–∫–∏")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è¬†–∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤ –∑–∞¬†–≤—Å—ë –≤—Ä–µ–º—è")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è –≤—Å–µ–≥–æ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü–æ—Å–µ—â–µ–Ω–∏—è¬†–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6¬†–º–µ—Å.")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç")]),t._v(" "),s("th",{staticClass:"sticky-header"},[t._v("–õ–æ—è–ª—å–Ω–æ—Å—Ç—å")])])])}]};var Wt=s("VU/8")(qt,Zt,!1,function(t){s("4d3J")},null,null).exports,Xt={name:"FinancialReport",components:{appMenu:f,VueElementLoading:a.a,"v-select":g.a},mounted:function(){document.title=this.$route.meta.title,this.load()},data:function(){return{period:this.moment().format("MM YYYY"),officeIds:[],isLoading:!1,loadingError:"",summary:null,byOffices:[]}},methods:{load:function(){var t=this;this.isLoading=!0,this.loadingError="";var e={period:this.moment(this.period,"MM YYYY").format("DD.MM.YYYY")};this.officeIds&&this.officeIds.length>0&&(e.officeIds=this.officeIds),y.post("GenerateFinanceReport/",e).then(function(e){t.summary=e.data.summary[0],t.byOffices=e.data.byOffices,t.isLoading=!1}).catch(function(e){t.loadingError=e,t.summary=null,t.byOffices=[],t.isLoading=!1})},inclineWord:function(t,e,s,n){if(t){var i=t.toString()[t.toString().length-1];if(["5","6","7","8","9","0"].includes(i)||t%100>10&&t%100<20)return n;if(["2","3","4"].includes(i))return s;if("1"===i)return e}return e}},computed:{offices:{get:function(){return this.$store.state.offices}},periods:function(){for(var t=[],e=0;e<=12;e++)t.push(this.moment().subtract(e,"months").format("MM YYYY"));return t}}},Jt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("appMenu",{attrs:{"selected-element":"reports"}}),t._v(" "),s("div",{staticClass:"content"},[s("h1",[t._v("–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç")]),t._v(" "),s("div",{staticClass:"grid-x grid-padding-x no-padding-small"},[s("div",{staticClass:"cell large-6 small-12"},[s("label",[t._v("–ú–µ—Å—è—Ü")]),t._v(" "),s("v-select",{attrs:{clearable:!1,value:t.period,label:"name",options:t.periods},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell large-6 small-12"},[s("label",[t._v("–û—Ç–¥–µ–ª–µ–Ω–∏—è")]),t._v(" "),s("v-select",{attrs:{multiple:"",reduce:function(t){return t.id},value:t.officeIds,label:"name",options:t.offices},model:{value:t.officeIds,callback:function(e){t.officeIds=e},expression:"officeIds"}},[s("div",{attrs:{slot:"no-options"},slot:"no-options"},[t._v("–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")])])],1),t._v(" "),s("div",{staticClass:"cell small-12"},[s("button",{staticClass:"button primary",attrs:{type:"button"},on:{click:t.load}},[t._v("–ü–æ–∫–∞–∑–∞—Ç—å")])])]),t._v(" "),s("div",[s("vue-element-loading",{attrs:{active:t.isLoading,color:"#1C457D"}}),t._v(" "),t.loadingError?s("div",{staticClass:"callout alert"},[s("h5",[t._v("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö")]),t._v(" "),s("p",[t._v(t._s(t.loadingError))])]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&(!t.summary.operationcount||t.byOffices.length&&t.byOffices.warning)?s("div",[t._v("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º")]):t._e(),t._v(" "),!t.loadingError&&!t.isLoading&&t.summary&&t.summary.totalsalary?s("div",[s("h2",[t._v("–ò—Ç–æ–≥–æ")]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.operationcount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(t.summary.operationcount,"–û–ø–µ—Ä–∞—Ü–∏—è","–û–ø–µ—Ä–∞—Ü–∏–∏","–û–ø–µ—Ä–∞—Ü–∏–π")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.serviceoperationcount||0))]),t._v(" "),s("label",[t._v("–£—Å–ª—É–≥ –æ–∫–∞–∑–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.goodsoperationcount||0))]),t._v(" "),s("label",[t._v("–¢–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.spendoperationcount||0))]),t._v(" "),s("label",[t._v("–†–∞—Å—Ö–æ–¥–æ–≤ –≤–Ω–µ—Å–µ–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.serviceincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (—É—Å–ª—É–≥–∏), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.goodsincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (—Ç–æ–≤–∞—Ä—ã), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalcash||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (–Ω–∞–ª–∏—á–∫–∞), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalcashless||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (–±–µ–∑–Ω–∞–ª), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalspend||0))]),t._v(" "),s("label",[t._v("–†–∞—Å—Ö–æ–¥—ã, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(t.summary.totalrevenue||0))]),t._v(" "),s("label",[t._v("–ü—Ä–∏–±—ã–ª—å, ‚ÇΩ")])])])]):t._e(),t._v(" "),t.loadingError||t.isLoading||!t.byOffices||!t.byOffices.length||t.byOffices.warning?t._e():s("div",[s("h2",[t._v("–ü–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è–º")]),t._v(" "),t._l(t.byOffices,function(e){return t.isLoading?t._e():s("div",{key:e.id},[s("h3",[t._v(t._s(t.$store.getters.getOfficeName(e.officeId)))]),t._v(" "),s("div",{staticClass:"grid-x grid-margin-x grid-margin-y margin-bottom-10px"},[s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.operationcount||0))]),t._v(" "),s("label",[t._v(t._s(t.inclineWord(e.operationcount,"–û–ø–µ—Ä–∞—Ü–∏—è","–û–ø–µ—Ä–∞—Ü–∏–∏","–û–ø–µ—Ä–∞—Ü–∏–π")))])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.serviceoperationcount||0))]),t._v(" "),s("label",[t._v("–£—Å–ª—É–≥ –æ–∫–∞–∑–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.goodsoperationcount||0))]),t._v(" "),s("label",[t._v("–¢–æ–≤–∞—Ä–æ–≤ –ø—Ä–æ–¥–∞–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.spendoperationcount||0))]),t._v(" "),s("label",[t._v("–†–∞—Å—Ö–æ–¥–æ–≤ –≤–Ω–µ—Å–µ–Ω–æ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.serviceincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (—É—Å–ª—É–≥–∏), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.goodsincome||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (—Ç–æ–≤–∞—Ä—ã), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalcash||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (–Ω–∞–ª–∏—á–∫–∞), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalcashless||0))]),t._v(" "),s("label",[t._v("–í—ã—Ä—É—á–∫–∞ (–±–µ–∑–Ω–∞–ª), ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalspend||0))]),t._v(" "),s("label",[t._v("–†–∞—Å—Ö–æ–¥—ã, ‚ÇΩ")])]),t._v(" "),s("div",{staticClass:"cell small-6 medium-4 large-2"},[s("div",{staticClass:"big-number"},[t._v(t._s(e.totalrevenue||0))]),t._v(" "),s("label",[t._v("–ü—Ä–∏–±—ã–ª—å, ‚ÇΩ")])])])])})],2)],1)])],1)},staticRenderFns:[]};var Kt=s("VU/8")(Xt,Jt,!1,function(t){s("dJ8r")},null,null).exports,Qt={name:"NotFound",components:{appMenu:f},mounted:function(){document.title=this.$route.meta.title},data:function(){return{}},methods:{},computed:{}},te={render:function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("appMenu"),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("h1",[this._v("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")]),this._v(" "),e("p",[e("a",{attrs:{href:"/"}},[this._v("–ù–∞ –≥–ª–∞–≤–Ω—É—é")])])])}]};var ee=s("VU/8")(Qt,te,!1,function(t){s("lbBR")},null,null).exports;n.a.use(c.a);var se=new c.a({routes:[{path:"/",name:"Session",component:k,meta:{title:"–°–º–µ–Ω–∞"}},{path:"/EditSession/:id?",name:"EditSession",component:$,meta:{title:"–°–º–µ–Ω–∞"}},{path:"/SessionsHistory",name:"SessionsHistory",component:w,meta:{title:"–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω –∏ –æ–ø–µ—Ä–∞—Ü–∏–π"}},{path:"/EditService/:id?",name:"EditService",component:j,meta:{title:"–£—Å–ª—É–≥–∞"}},{path:"/EditGoodsSell/:id?",name:"EditGoodsSell",component:H,meta:{title:"–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤"}},{path:"/EditEmployeePayment/:id?",name:"EditEmployeePayment",component:A,meta:{title:"–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É"}},{path:"/EditExpense/:id?",name:"EditExpense",component:U,meta:{title:"–†–∞—Å—Ö–æ–¥"}},{path:"/EditClient/:id?",name:"EditClient",component:q,meta:{title:"–ö–ª–∏–µ–Ω—Ç"}},{path:"/Clients",name:"Clients",component:X,meta:{title:"–ö–ª–∏–µ–Ω—Ç—ã"}},{path:"/UploadExpenses",name:"UploadExpenses",component:Q,meta:{title:"–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤"}},{path:"/Offices",name:"Offices",component:st,meta:{title:"–û—Ç–¥–µ–ª–µ–Ω–∏—è"}},{path:"/EditOffice/:id?",name:"EditOffice",component:at,meta:{title:"–û—Ç–¥–µ–ª–µ–Ω–∏–µ"}},{path:"/ServiceTypes",name:"ServiceTypes",component:lt,meta:{title:"–£—Å–ª—É–≥–∏"}},{path:"/EditServiceType/:id?",name:"EditServiceType",component:dt,meta:{title:"–¢–∏–ø —É—Å–ª—É–≥–∏"}},{path:"/GoodsTypes",name:"GoodsTypes",component:pt,meta:{title:"–¢–æ–≤–∞—Ä—ã"}},{path:"/EditGoodsType/:id?",name:"EditGoodsType",component:yt,meta:{title:"–¢–æ–≤–∞—Ä"}},{path:"/ExpenseTypes",name:"ExpenseTypes",component:Ct,meta:{title:"–¢–∏–ø—ã —Ä–∞—Å—Ö–æ–¥–æ–≤"}},{path:"/EditExpenseType/:id?",name:"EditExpenseType",component:St,meta:{title:"–¢–∏–ø —Ä–∞—Å—Ö–æ–¥–∞"}},{path:"/EmployeePaymentTypes",name:"EmployeePaymentTypes",component:Tt,meta:{title:"–¢–∏–ø—ã –≤—ã–ø–ª–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É"}},{path:"/EditEmployeePaymentType/:id?",name:"EditEmployeePaymentType",component:Lt,meta:{title:"–¢–∏–ø –≤—ã–ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É"}},{path:"/Employees",name:"Employees",component:Mt,meta:{title:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏"}},{path:"/EditEmployee/:id?",name:"EditEmployee",component:jt,meta:{title:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫"}},{path:"/MasterTypes",name:"MasterTypes",component:Ht,meta:{title:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Å—Ç–µ—Ä–æ–≤"}},{path:"/EditMasterType/:id?",name:"EditMasterType",component:At,meta:{title:"–ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–∞—Å—Ç–µ—Ä–∞"}},{path:"/EmployeesReport",name:"EmployeesReport",component:zt,meta:{title:"–û—Ç—á—ë—Ç –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º"}},{path:"/ClientsReport",name:"ClientsReport",component:Wt,meta:{title:"–û—Ç—á—ë—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º"}},{path:"/FinancialReport",name:"FinancialReport",component:Kt,meta:{title:"–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç"}},{path:"*",component:ee,meta:{title:"–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"}}],scrollBehavior:function(t,e,s){return s||{x:0,y:0}}}),ne=s("gRE1"),ie=s.n(ne),ae=s("Dd8w"),oe=s.n(ae),re=s("NYxO"),le=s("PJh5"),ce=s.n(le);n.a.use(re.a),n.a.config.devtools=!0;var ue=new re.a.Store({state:{isStateLoading:!1,isStateLoaded:!1,stateLoadDetails:{serviceTypes:!1,goodsTypes:!1,employeePaymentTypes:!1,spendTypes:!1,offices:!1,employees:!1,clients:!1,masterCategories:!1},stateGetError:"",currentOfficeId:null,currentSessionGetError:"",isCurrentSessionLoading:!1,currentSession:{},refreshCurrentSession:null,operationTypes:[{id:"serviceoperation",name:"–£—Å–ª—É–≥–∞"},{id:"goodsoperation",name:"–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–∞"},{id:"spendoperation",name:"–†–∞—Å—Ö–æ–¥"},{id:"employeepayment",name:"–í—ã–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É"}],officeStates:[{id:"open",name:"–†–∞–±–æ—Ç–∞–µ—Ç"},{id:"closed",name:"–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"}],serviceStates:[{id:"active",name:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"},{id:"notactive",name:"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"}],goodsStates:[{id:"active",name:"–í –ø—Ä–æ–¥–∞–∂–µ"},{id:"notactive",name:"–ù–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è"}],spendTypeStates:[{id:"active",name:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"},{id:"notactive",name:"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"}],employeePaymentTypeStates:[{id:"active",name:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"},{id:"notactive",name:"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"}],masterCategoryStates:[{id:"active",name:"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"},{id:"notactive",name:"–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"}],employeeStates:[{id:"working",name:"–†–∞–±–æ—Ç–∞–µ—Ç"},{id:"notworking",name:"–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"}],userRoles:[{id:"officeAdmin",name:"–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ñ–∏—Å–∞"},{id:"manager",name:"–£–ø—Ä–∞–≤–ª—è—é—â–∏–π"},{id:"master",name:"–ú–∞—Å—Ç–µ—Ä"},{id:"other",name:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫"}],contactTypes:[{id:"phone",name:"–¢–µ–ª–µ—Ñ–æ–Ω"},{id:"whatsapp",name:"WhatsApp"},{id:"telegram",name:"Telegram"},{id:"viber",name:"Viber"},{id:"email",name:"–ü–æ—á—Ç–∞"},{id:"instagram",name:"Instagram"},{id:"vk",name:"–í–ö–æ–Ω—Ç–∞–∫—Ç–µ"},{id:"facebook",name:"Facebook"},{id:"other",name:"–î—Ä—É–≥–æ–µ"}],employeePaymentTypeTypes:[{id:"salary",name:"–ó–∞—Ä–ø–ª–∞—Ç–∞"},{id:"bonus",name:"–ü—Ä–µ–º–∏—è"},{id:"penalty",name:"–®—Ç—Ä–∞—Ñ"}],serviceTypes:[],goodsTypes:[],employeePaymentTypes:[],spendTypes:[],offices:[],employees:[],clients:[],masterCategories:[]},getters:{getServiceName:function(t){return function(e){var s=t.serviceTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getEmployeeName:function(t){return function(e){var s=t.employees.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getItemName:function(t){return function(e){var s=t.goodsTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getContactTypeName:function(t){return function(e){var s=t.contactTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getSpendTypeName:function(t){return function(e){var s=t.spendTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getEmployeePaymentTypeName:function(t){return function(e){var s=t.employeePaymentTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getMasterCategoryName:function(t){return function(e){var s=t.masterCategories.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getClientDescription:function(t){return function(e){var s=e;if("number"==typeof s&&(s=t.clients.filter(function(t){return t.id===s})[0]),s){if(null===s.id)return"–ù–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç";var n=s.contacts.filter(function(t){return"phone"===t.type})[0];return n?s.name+" ("+n.value+")":s.name+" (—Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω)"}return"‚Äì"}},getDateTimeFromOperation:function(t){return function(t){var e="";return t.finishDatetime?e=t.finishDatetime:t.datetime&&(e=t.datetime),ce.a.utc(e).local().format("DD.MM.YYYY HH:mm")}},getTimeFromOperation:function(t){return function(t){var e="";return t.startDatetime?e=t.startDatetime:t.datetime&&(e=t.datetime),ce.a.utc(e).local().format("HH:mm")}},getEmployeeNameFromOperation:function(t,e){return function(t){return t.employeeId?e.getEmployeeName(t.employeeId):t.masterId?e.getEmployeeName(t.masterId):t.adminId?e.getEmployeeName(t.adminId):"‚Äì"}},getOperationContent:function(t,e){return function(t){return"serviceoperation"===t.type?e.getServiceName(t.serviceId):"goodsoperation"===t.type?e.getItemName(t.goodsId):"spendoperation"===t.type?e.getSpendTypeName(t.expenseTypeId):"employeepayment"===t.type?e.getEmployeePaymentTypeName(t.employeePaymentTypeId):"‚Äì"}},getOperationSum:function(t){return function(t){return"serviceoperation"===t.type?t.cashSum+t.cashlessSum-t.discountSum:"goodsoperation"===t.type?t.cashSum+t.cashlessSum-t.discountSum:"spendoperation"===t.type?t.sum:"employeepayment"===t.type?t.sum:"‚Äì"}},getOperationBonus:function(t){return function(t){return"serviceoperation"===t.type?t.masterBonusSum+t.adminBonusSum:"goodsoperation"===t.type?t.employeeBonusSum+t.adminBonusSum:"‚Äì"}},getOperationLink:function(t){return function(t){return"serviceoperation"===t.type?"/EditService/"+t.id.toString():"goodsoperation"===t.type?"/EditGoodsSell/"+t.id.toString():"spendoperation"===t.type?"/EditExpense/"+t.id.toString():"employeepayment"===t.type?"/EditEmployeePayment/"+t.id.toString():void 0}},getOfficeName:function(t){return function(e){var s=t.offices.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getOfficeStateName:function(t){return function(e){var s=t.officeStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getServiceStateName:function(t){return function(e){var s=t.serviceStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getGoodsStateName:function(t){return function(e){var s=t.goodsStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getSpendTypeStateName:function(t){return function(e){var s=t.spendTypeStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getEmployeePaymentStateName:function(t){return function(e){var s=t.employeePaymentTypeStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getMasterCategoryStateName:function(t){return function(e){var s=t.masterCategoryStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getEmployeeStateName:function(t){return function(e){var s=t.employeeStates.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getUserRoleName:function(t){return function(e){var s=t.userRoles.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getEmployeePaymentTypeTypeName:function(t){return function(e){var s=t.employeePaymentTypeTypes.filter(function(t){return t.id===e})[0];return s?s.name:"‚Äì"}},getUserPicturePlaceholderText:function(t){return function(t){var e="";return t.split(" ").map(function(t){e+=t[0].toUpperCase()}),e}}},mutations:{updateStore:function(t,e){t[e.name]=e.value},updateStateLoadingDetails:function(t,e){t.stateLoadDetails[e.name]=e.value},updateIfExists:function(t,e){var s=e.data,n=e.key;s[n]&&(t[n]=s[n])}},actions:{getCurrentSession:function(t){t.state.currentOfficeId&&(t.commit("updateStore",{name:"isCurrentSessionLoading",value:!0}),y.post("GetCurrentSession/",{officeId:t.state.currentOfficeId,withOperations:!0}).then(function(e){var s=e.data;s.employees&&s.employees.length&&(s.employees=s.employees.map(function(e){var s=t.state.employees.filter(function(t){return t.id===e.id})[0];return oe()({},e,s)})),t.commit("updateStore",{name:"currentSession",value:s}),t.commit("updateStore",{name:"isCurrentSessionLoading",value:!1})}).catch(function(e){t.commit("updateStore",{name:"currentSessionGetError",value:e}),t.commit("updateStore",{name:"isCurrentSessionLoading",value:!1})}))},checkIfStateLoaded:function(t){var e=ie()(t.state.stateLoadDetails).every(function(t){return t});e!==t.state.isStateLoaded&&(t.commit("updateStore",{name:"isStateLoaded",value:e}),t.commit("updateStore",{name:"isStateLoading",value:!e}))},getState:function(t,e){t.state.isStateLoaded||(t.commit("updateStore",{name:"isStateLoading",value:!0}),t.commit("updateStore",{name:"isStateLoaded",value:!1})),y.post("GetServicesPrices/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"serviceTypes",value:s}),t.commit("updateStateLoadingDetails",{name:"serviceTypes",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetGoods/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"goodsTypes",value:s}),t.commit("updateStateLoadingDetails",{name:"goodsTypes",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetEmployeePaymentTypes/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"employeePaymentTypes",value:s}),t.commit("updateStateLoadingDetails",{name:"employeePaymentTypes",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetSpendTypes/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"spendTypes",value:s}),t.commit("updateStateLoadingDetails",{name:"spendTypes",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetOffices/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"offices",value:s}),t.commit("updateStateLoadingDetails",{name:"offices",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetEmployees/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"employees",value:s}),t.commit("updateStateLoadingDetails",{name:"employees",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetClients/",{q:""}).then(function(e){var s=e.data;t.commit("updateStore",{name:"clients",value:s}),t.commit("updateStateLoadingDetails",{name:"clients",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})}),y.post("GetBarberCategories/",{}).then(function(e){var s=e.data;t.commit("updateStore",{name:"masterCategories",value:s}),t.commit("updateStateLoadingDetails",{name:"masterCategories",value:!0}),t.dispatch("checkIfStateLoaded")}).catch(function(e){t.commit("updateStore",{name:"stateGetError",value:e})})}}});n.a.prototype.moment=ce.a,n.a.config.productionTip=!1,new n.a({store:ue,el:"#app",router:se,components:{App:l},template:"<App/>"})},Nk2v:function(t,e){},TBX2:function(t,e){},ayN0:function(t,e){},bSEx:function(t,e){},dJ8r:function(t,e){},dPSK:function(t,e){},ecyf:function(t,e){},gTcm:function(t,e){},jve6:function(t,e){},kxPN:function(t,e){},lMXO:function(t,e){},lbBR:function(t,e){},mpjx:function(t,e){},musY:function(t,e){},u8sv:function(t,e){},uslO:function(t,e,s){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-SG":"oYA3","./en-SG.js":"oYA3","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function i(t){return s(a(t))}function a(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(n)},i.resolve=a,t.exports=i,i.id="uslO"},yID9:function(t,e){},zikU:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.704598d352fa080c2c74.js.map